var zc=Object.defineProperty,Hc=Object.defineProperties;var Gc=Object.getOwnPropertyDescriptors;var zs=Object.getOwnPropertySymbols;var Zc=Object.prototype.hasOwnProperty,Vc=Object.prototype.propertyIsEnumerable;var Hs=Math.pow,On=(t,i,e)=>i in t?zc(t,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[i]=e,Ot=(t,i)=>{for(var e in i||(i={}))Zc.call(i,e)&&On(t,e,i[e]);if(zs)for(var e of zs(i))Vc.call(i,e)&&On(t,e,i[e]);return t},fe=(t,i)=>Hc(t,Gc(i));var wt=(t,i,e)=>On(t,typeof i!="symbol"?i+"":i,e);var Ne=(t,i,e)=>new Promise((n,s)=>{var r=f=>{try{o(e.next(f))}catch(c){s(c)}},a=f=>{try{o(e.throw(f))}catch(c){s(c)}},o=f=>f.done?n(f.value):Promise.resolve(f.value).then(r,a);o((e=e.apply(t,i)).next())});(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();const ee=()=>{const t=new WeakMap;return(e,n)=>t.get(e)||n&&t.set(e,n).get(e)},Yo=ee(),Xo=ee(),Wc=ee(),De=new Map,Qc=t=>De.get(t),Fi=ee(),qc=ee(),Kc=ee(),Yi=ee(),fi=(t,i,e)=>{const n=Kc(t,{});let s=n[i];if(!s){let r=t[i];const a=Object.getOwnPropertyDescriptor(t,i)||{};s=[],n[i]=s,Object.defineProperty(t,i,{get:a.get||(()=>r),set:function(o){var c;const f=r;if(o!==f){(c=a.set)==null||c.call(a,o),r=o;for(const v of s)v(this,o,f)}}})}s.push(e)},Yc={},rs=ee(),Jo=ee(),Xc=ee(),tl=(t,i,...e)=>{Gs(Yc,t,i,...e),Gs(rs(i)||{},t,...e)},Gs=(t,i,...e)=>{for(const n of t[i]||[])t[i].includes(n)&&n(...e)},wi=t=>{const i=[t];let e;for(;e=i.shift();){for(const n of Jo(e,[]))n();for(const n of e.childNodes)i.push(n)}},Rn=(t,i,e,n)=>{const s=rs(t,{});s[e]?s[e].push(n):s[e]=[n],Jo(i,[]).push(()=>{const a=rs(t);a!=null&&a[e]&&(a[e]=a[e].filter(o=>o!==n))})},Zs=(t,i,e)=>{const n=Xc(i,{});n[e]||(n[e]=1,fi(i,e,(s,r,a)=>{tl(`set:${e}`,s,t,r,a)}))},el=(t,i,e,n={})=>{t.dispatchEvent(new CustomEvent(i,Ot({bubbles:!0,cancelable:!1,composed:!0,detail:e},n)))},ye=(t,i,e,n={})=>{const s=De.get(t);s&&el(s,i,e,n)},il=t=>t.entries?t.entries():Object.entries(t),Jc=t=>JSON.stringify(t),nl=t=>{const i=new Map;return e=>{if(i.has(e))return i.get(e);const n=t(e);return i.set(e,n),n}},dn=t=>t.replace(new RegExp("-(\\p{Ll})","gu"),i=>i[1].toUpperCase()),fn=t=>t.replace(new RegExp("\\p{Lu}","gu"),i=>`-${i[0]}`.toLowerCase()),th=t=>fn(t.replace(new RegExp("^\\p{Lu}","gu"),i=>i.toLowerCase())),sl=t=>`${t!=null?t:""}`,rl=t=>typeof t=="string",ci=(t,i)=>t.getAttribute(i),al=t=>{var e,n;const i=De.get(t);return(n=(e=i==null?void 0:i.shadowRoot)!=null?e:i)!=null?n:null},Le=(t,i,e)=>{e===!0&&(e=""),rl(e)?t.setAttribute(i,e):t.removeAttribute(i)},pi=(t,i)=>[...new Set([...t,...i])],_i=(t,i)=>typeof t[i]=="function"?t[i].bind(t):t[i],Vt=document,Qt=window,pn=t=>t.cloneNode(!0),Es=t=>Vt.createElement(t),eh=t=>Vt.createTextNode(t),ih=t=>Vt.createComment(t),ol=()=>Vt.createDocumentFragment(),nh=t=>{const i=Es("style");return i.append(eh(t)),i},ll=()=>Es("template"),cl=(t,i)=>Vt.createTreeWalker(t,i),sh=t=>{const i=Vt.implementation.createHTMLDocument(""),e=i.createElement("style");return e.textContent=t,i.body.append(e),e.sheet.cssRules||[]};function qe(t,i,e,n,s){Rn(t,i,"set:",e);for(const r of n){const a=`set:${r}`;r in s?(Zs(t,s,r),Rn(s,i,a,e)):(Zs(t,t,r),fi(t,r,(o,f,c)=>{var v;(v=o.onChange)==null||v.call(o,r,f,c)}),Rn(t,i,a,e))}}const _e=t=>{let i=Yi(t);if(t){let e=t.parentNode;for(;!i&&e;)i=Yi(e),e=e.parentNode}return i||(i={},Yi(Vt.body,i)),i},Ss=(t,i)=>{const e=Object.create(t);return Yi(i,e),e},ke=(t,i)=>new Proxy(t,{get:(e,n)=>n in i?_i(i,n):_i(e,n)});let Jt="",Ut=0,H=0;const rh={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",v:"\v"},ah={"-":t=>i=>-t(i),"!":t=>i=>!t(i),"~":t=>i=>~t(i),"+":t=>i=>+t(i)},oh={"||":[1,(t,i)=>e=>t(e)||i(e)],"&&":[2,(t,i)=>e=>t(e)&&i(e)],"|":[3,(t,i)=>e=>t(e)|i(e)],"^":[4,(t,i)=>e=>t(e)^i(e)],"&":[5,(t,i)=>e=>t(e)&i(e)],"==":[6,(t,i)=>e=>t(e)==i(e)],"!=":[6,(t,i)=>e=>t(e)!=i(e)],"===":[6,(t,i)=>e=>t(e)===i(e)],"!==":[6,(t,i)=>e=>t(e)!==i(e)],"<":[7,(t,i)=>e=>t(e)<i(e)],">":[7,(t,i)=>e=>t(e)>i(e)],"<=":[7,(t,i)=>e=>t(e)<=i(e)],">=":[7,(t,i)=>e=>t(e)>=i(e)],"<<":[8,(t,i)=>e=>t(e)<<i(e)],">>":[8,(t,i)=>e=>t(e)>>i(e)],">>>":[8,(t,i)=>e=>t(e)>>>i(e)],"+":[9,(t,i)=>e=>t(e)+i(e)],"-":[9,(t,i)=>e=>t(e)-i(e)],"*":[10,(t,i)=>e=>t(e)*i(e)],"/":[10,(t,i)=>e=>t(e)/i(e)],"%":[10,(t,i)=>e=>t(e)%i(e)]},Vs={true:()=>!0,false:()=>!1,null:()=>null},Ke=t=>{Jt=t,Ut=0,at(0);let i=[()=>{},[]];try{i=As()||vt()}catch(e){}return i},at=(t=1)=>{Ut+=t,H=Jt.charCodeAt(Ut)},pe=()=>Jt.charAt(Ut),vi=t=>t>=48&&t<=57,sn=t=>t>=65&&t<=90||t>=97&&t<=122||t>=128||t===36||t===95,vt=()=>{const t=`Parse error at index ${Ut}: ${Jt}`;throw console.error(t),new Error(t)},Kt=()=>{for(;H===32||H===9||H===10||H===13;)at()},As=()=>{const t=lh();return Kt(),t},Ws=()=>{Kt();let t=Jt.substr(Ut,3),i=3,e;for(;i>0;){if(e=oh[t],e){at(i);break}t=t.substr(0,--i)}return e},lh=()=>{let t,i,e,n,s,r,a;if(s=Xi(),!s||(i=Ws(),!i))return s;for(r=Xi()||vt(),n=[s,i,r],a=()=>{let o=n.pop(),f=n.pop(),c=n.pop();n.push([f[1](c[0],o[0]),pi(c[1],o[1])])};e=Ws();){for(;n.length>2&&e[0]<=n[n.length-2][0];)a();t=Xi()||vt(),n.push(e,t)}for(;n.length>1;)a();return n[0]},Xi=()=>{let t;if(Kt(),vi(H)||H===46)return hh();if(H===39||H===34)t=uh();else{const i=ah[pe()];if(i){at();const n=Xi()||vt();return[i(n[0]),n[1]]}sn(H)||vt();const e=hl();t=Vs[e]?[Vs[e],[]]:[n=>_i(n,e),[e]]}return ch(t)},ch=t=>{for(Kt();H===46||H===91||H===40||H===63;){let i,e,n=[],s=t;if(H===63&&(at(),Kt(),H!==46&&vt(),i=!0),H===91){at();const r=As()||vt();e=(a,o)=>_i(a,r[0](o)),n=r[1],H!==93&&vt(),at()}else if(H===40){at();const r=dh();e=(a,o)=>a(...r.map(f=>f[0](o))),n=r.reduce((a,o)=>pi(a,o[1]),n)}else if(H===46){at(),Kt();const r=hl();e=a=>_i(a,r)}else vt();t=i?[r=>{const a=s[0](r);return a===void 0?void 0:e(a,r)},pi(s[1],n)]:[r=>e(s[0](r),r),pi(s[1],n)],Kt()}return t},hh=()=>{let t="";for(;vi(H);)t+=pe(),at();if(H===46)for(t+=".",at();vi(H);)t+=pe(),at();if(H===101||H===69){t+=pe(),at(),(H===43||H===45)&&(t+=pe(),at());let e=!0;for(;vi(H);)t+=pe(),at(),e=!1;e&&vt()}(sn(H)||H===46||t===".")&&vt();const i=parseFloat(t);return[()=>i,[]]},uh=()=>{let t="";const i=H;for(at();Ut<Jt.length&&H!==i;){if(H===92){at();const e=pe();t+=rh[e]||e}else t+=pe();at()}return Ut>=Jt.length&&vt(),at(),[()=>t,[]]},hl=()=>{let t=Ut;for(sn(H)?at():vt();Ut<Jt.length&&!(!sn(H)&&!vi(H));)at();return Jt.slice(t,Ut)},dh=()=>{const t=[];for(Kt();H!==41;)Ut>=Jt.length&&vt(),t.push(As()||vt()),Kt(),H===44?(at(),Kt()):H!==41&&vt();return at(),t},ul=t=>{const i=t.split(/{{(.*?)}}/);if(i.length<2)return null;const e=[];let n=!1,s=[];for(const r of i){if(n){const a=Ke(r);e.push(a[0]),s=pi(s,a[1])}else e.push(r);n=!n}return[e,s]},dl=t=>t?[i=>t[0].map(e=>sl(e!=null&&e.call?e(i):e)).join(""),t[1]]:null,fh=nl(t=>{const i=ul(t),e=i==null?void 0:i[0];return(e==null?void 0:e.length)===3&&e[0]===""&&e[2]===""?[n=>{const s=e[1](n);return typeof s=="boolean"?s:sl(s)},i[1]]:dl(i)}),ph=nl(t=>dl(ul(t))),vh=(t,i,e,n)=>{const s=fh(e);if(s){const r=_e(i),a=o=>{Le(i,n,s[0](ke(o,r)))};qe(t,i,a,s[1],r),a(t)}},gh={window:()=>{},document:()=>{},stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:(t,i)=>t.target!==i,outside:(t,i)=>i.contains(t.target),ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>t.button!==0,middle:t=>t.button!==1,right:t=>t.button!==2,exact:(t,i,e)=>["ctrl","shift","alt","meta"].some(n=>t[`${n}Key`]&&!e.has(n))},mh=(t,i,e,n)=>{const[s,...r]=dn(n.slice(1)).split("."),a=Object.create(_e(i)),o=Ke(e),f=h=>{a.$event=h,o[0](ke(t,a))},c={},v=new Set(r);let y=i;for(const h of["passive","capture","once"])v.has(h)&&(c[h]=!0);v.has("window")&&(y=Qt),(v.has("document")||v.has("outside"))&&(y=Vt),y.addEventListener(s,h=>{r.some(d=>(gh[d]||(l=>th(l.key)!==(d.match(/^code-\d+$/)?String.fromCodePoint(+d.split("-")[1]):d)))(h,i,v))||f(h)},c),Le(i,n)},bh=(t,i,e,n)=>{t[dn(e)]=i,Le(i,n)},wh=(t,i,e,n)=>{const s=Ke(e),r=dn(n.slice(1)),a=_e(i),o=f=>{const c=s[0](ke(f,a));i[r]=c};qe(t,i,o,s[1],a),o(t),Le(i,n)},_h=(t,i,e,n)=>{let s="key",r="value";const a=n.match(/^\s*(?:(?:(\S+)\s*,\s*)?(\S+)\s+of\s+)?(\S+)\s*$/);a&&(s=a[1]||s,r=a[2]||r,n=a[3]);const o=Ke(n),f=_e(i);let c=new Map;const v=y=>{const h=o[0](ke(y,f))||[];let d=c;c=new Map;let l=i;for(const[u,g]of il(h)){let p=d.get(u);if(d.delete(u),p===l.nextSibling){const m=_e(p);m[r]=g}else{p&&(wi(p),p.remove()),p=pn(e);const m=Ss(f,p);m[s]=u,m[r]=g,Ds(p,y),l.after(p)}l=p,c.set(u,l)}for(const u of d.values())wi(u),u.remove()};qe(t,i,v,o[1],f),v(t)},yh=(t,i,e,n)=>{const s=Ke(n),r=_e(i);let a=null;const o=f=>{s[0](ke(f,r))?a||(a=pn(e),Ss(r,a),Ds(a,f),i.after(a)):a&&(wi(a),a.remove(),a=null)};qe(t,i,o,s[1],r),o(t)},Eh=(t,i,e,n)=>{let s="index";const r=n.match(/^(\S+)\s+as\s+(\S+)$/);r&&(n=r[1],s=r[2]);const a=Ke(n),o=_e(i);let f=[];const c=v=>{let y=+a[0](ke(v,o));for(;f.length>y;){const l=f.pop();wi(l),l.remove()}let h=f.length+1,d=f[h-1]||i;for(;f.length<y;){let l=pn(e);const u=Ss(o,l);u[s]=h++,Ds(l,v),f.push(l),d.after(l),d=l}};qe(t,i,c,a[1],o),c(t)},Sh=0,Ah=1,fl=[{"*for":_h,"*if":yh,"*repeat":Eh},{"":vh,"@":mh,"#ref":bh,".":wh}];function xh(t,i){if(i.nodeType===1)for(const e of[...i.attributes]){const n=e.nodeName,s=n.charAt(0),r=fl[Ah],a=r[n]||r[s]||r[""];a==null||a(t,i,e.nodeValue||"",n)}}const Dh=(t,i,e)=>{const n=e.attributes;if(e.nodeType===1&&n){let s;for(const[r,a]of il(fl[Sh])){const o=n.getNamedItem(r);if(o){if(s)throw new Error(`${s[0]} breaks ${r}`);s=[r,a,o.nodeValue||""]}}if(s){const r=ih(`${s[0]}=${Jc(s[2])}`);return e.before(r),i.previousNode(),e.remove(),Le(e,s[0]),s[1](t,r,e,s[2],s[0]),1}}};function Th(t,i){if(i.nodeType===3){const e=ph(i.textContent||"");if(e){const n=_e(i),s=r=>{i.nodeValue=e[0](ke(r,n))};return qe(t,i,s,e[1],n),s(t),1}}}const xs=(t,i)=>{const e=cl(t,133);let n;for(;n=e.nextNode();)n.nodeName==="TEMPLATE"&&xs(n.content,i),Dh(i,e,n)||Th(i,n)||xh(i,n)},Ds=(t,i)=>{const e=ol();e.append(t),xs(e,i)},Qs="DOMContentLoaded",Ch=(t,i,e)=>{const n=t.ownerDocument,s=()=>{let r=t;do if(r.nextSibling)return!0;while(r=r.parentNode);return!1};if(i===t||n.readyState!=="loading"||s())e();else{const r=Rh(n,t,a=>{(a||s())&&(r(),e())})}},Oh=t=>{let i=t;do t=i,i=t.parentNode;while(i&&i.nodeType===1);return t},Rh=(t,i,e)=>{const n=()=>{e(!0)};t.addEventListener(Qs,n);const s=Oh(i),r=qc(s,{s:new Set}),a=()=>{e(!1)};return r.s.add(a),r.o||(r.o=new MutationObserver(()=>{for(const o of[...r.s])o()}),r.o.observe(s,{childList:!0,subtree:!0})),()=>{r.s.delete(a),t.removeEventListener(Qs,n),r.s.size||(r.o.disconnect(),delete r.o)}};class Mh extends HTMLElement{constructor(){super()}attributeChangedCallback(i,e,n){const s=dn(i),r=Fi(this);r&&this.C(r,s,n)}connectedCallback(){var a;const i=this.constructor,e=new(Xo(i)),n=Yo(i),s=n.useShadow,r=s?this.shadowRoot||this.attachShadow({mode:"open"}):this;Fi(this,e),De.set(e,this),Wc(e,n),this.classList.add(n.className),this.vt(n,e),(a=e.onInit)==null||a.call(e),Ch(this,r,()=>{var f,c;(f=e.onParse)==null||f.call(e);const o=ll();o.innerHTML=n.template,xs(o.content,e),s||this.K(),n.style&&r.append(nh(n.style)),r.append(o.content),(c=e.onViewInit)==null||c.call(e)})}disconnectedCallback(){var e;const i=Fi(this);(e=i==null?void 0:i.onDestroy)==null||e.call(i),wi(this),De.delete(i),this.K()}vt(i,e){for(const n of i.prop||[]){const s=(a,o)=>{const f=Fi(a);this.C(f,n,o)};fi(this,n,s),s(this,this[n]);const r=(a,o)=>{const f=De.get(a);f&&(f[n]=o)};fi(e,n,r),r(e,e[n])}for(const n of i.attr||[]){const s=fn(n);this.C(e,n,ci(this,s)),(i.prop||[]).includes(n)||fi(e,n,(a,o)=>{const f=De.get(a);f&&Le(f,s,o)})}}C(i,e,n){var r;const s=i[e];i[e]=n,(r=i.onChange)==null||r.call(i,e,s,n)}K(){this.innerHTML="",this.shadowRoot&&(this.shadowRoot.innerHTML="")}}let rn=new Map,pl=()=>{(t=>rn=Qt[t]||(Qt[t]=rn))("__fudgel"),pl=()=>{}};const Ph=()=>{const t=rn.get("n")||0;return rn.set("n",t+1),t},O=(t,i)=>e=>{Ih(t,i,e)},qs=customElements,Ih=(t,i,e)=>{pl();const n=`fudgel-${Ph()}`,s=Lh(i.style||"",t,n,i.useShadow),r=fe(Ot({},i),{className:n,style:s});class a extends Mh{}a.observedAttributes=(r.attr||[]).map(fn),Yo(a,r),Xo(a,e||class{});const o=ll();o.innerHTML=r.template,vl(o,n),r.template=o.innerHTML,tl("component",a,a,r),qs.get(t)||qs.define(t,a)},vl=(t,i)=>{const e=cl(t.content,1);let n;for(;n=e.nextNode();)n.nodeName==="TEMPLATE"&&vl(n,i),n.classList.add(i)},Lh=(t,i,e,n)=>{const s=(a,o)=>{a[Mn]&&(a[Mn]=a[Mn].split(",").map(f=>r(f,o)).join(","),o="");for(const f of a.cssRules||[])s(f,o);return a.cssText},r=(a,o)=>{a=a.trim();const f=y=>`${y}.${e}`,c=(y,h)=>y.replace(/:host/,h),v=c(a,"")===a;return n?(v||a.includes(" "))&&(a=f(a)):(a=c(a,o),v&&(a=`${o} ${f(a)}`)),a};return[...sh(t)].map(a=>s(a,i)).join("")},Mn="selectorText";class kh extends HTMLElement{constructor(){super(),this.gt=ol(),this.O=[],this.R=[],this.D=[];let i=this.children,e=i[0];if(e.nodeName==="TEMPLATE")this.R=Array.from(e.content.children);else for(;i.length>0;){const n=i[0];this.R.push(n),this.gt.append(n)}}connectedCallback(){this.Y(Qt,"popstate",this.mt),this.Y(Vt.body,"click",this.bt),this.P(Qt.location.pathname),this.X(Qt.history,"pushState",this.J),this.X(Qt.history,"replaceState",this.J)}disconnectedCallback(){for(;this.D.length;)this.D.pop()()}go(i){Qt.history.pushState(null,"",i)}wt(i){let e=!1;if(i.e!==this.O[0]){const s=ci(i.e,"title"),r=ci(i.e,"component");this.innerHTML="",s&&(Vt.title=s),this.O=[i.e,r?Es(r):pn(i.e)],e=!0}const n=this.O[1];for(const[s,r]of i.g)Le(n,fn(s),r);e&&this.append(n)}bt(i){if(!i.defaultPrevented){const e=i.composedPath().filter(n=>n.tagName==="A")[0];e&&e.href&&e.origin===Qt.location.origin&&!e.href.startsWith("blob:")&&(i.preventDefault(),this.go(`${e.pathname}${e.search}${e.hash}`))}}Y(i,e,n){const s=n.bind(this);i.addEventListener(e,s),this.D.push(()=>i.removeEventListener(e,s))}_t(i){for(const e of this.R){const n=ci(e,"path")||"**",s=ci(e,"regexp");let r=n;rl(s)||(r=n.replace(/\*+/g,f=>f.length>1?".*":"[^/]*").replace(/:[^:\/]+/g,f=>`(?<${f.slice(1)}>[^/]+)`));const a=new RegExp(`^${r}(/.*)?$`),o=i.match(a);if(o)return{e,g:Object.entries(o.groups||{})}}return null}J(i,e){return(n,s,r)=>{e.call(i,n,s,r),this.P(r||"/")}}X(i,e,n){const s=i[e];i[e]=n.call(this,i,s),this.D.push(()=>i[e]=s)}mt(){this.P(Qt.location.pathname)}P(i){const e=this._t(i);e&&this.wt(e),el(Vt.body,"routeChange",i)}}const Uh=(t="router-outlet")=>{customElements.define(t,kh)},C=(t,...i)=>String.raw({raw:t},...i),R=C,Ks=new Map,si=[],b=t=>{if(si.includes(t))throw si.push(t),new Error(`Circular dependency: ${si.map(e=>`${e.name}`).join(" -> ")}`);si.push(t);const i=Ks.get(t)||Ks.set(t,new t).get(t);return si.pop(),i};var as=function(t,i){return as=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])},as(t,i)};function ie(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");as(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}function Nh(t,i,e,n){function s(r){return r instanceof e?r:new e(function(a){a(r)})}return new(e||(e=Promise))(function(r,a){function o(v){try{c(n.next(v))}catch(y){a(y)}}function f(v){try{c(n.throw(v))}catch(y){a(y)}}function c(v){v.done?r(v.value):s(v.value).then(o,f)}c((n=n.apply(t,i||[])).next())})}function gl(t,i){var e={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,s,r,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(v){return f([c,v])}}function f(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(e=0)),e;)try{if(n=1,s&&(r=c[0]&2?s.return:c[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,c[1])).done)return r;switch(s=0,r&&(c=[c[0]&2,r.value]),c[0]){case 0:case 1:r=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,s=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(r=e.trys,!(r=r.length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){e.label=c[1];break}if(c[0]===6&&e.label<r[1]){e.label=r[1],r=c;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(c);break}r[2]&&e.ops.pop(),e.trys.pop();continue}c=i.call(t,e)}catch(v){c=[6,v],s=0}finally{n=r=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function He(t){var i=typeof Symbol=="function"&&Symbol.iterator,e=i&&t[i],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ge(t,i){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),s,r=[],a;try{for(;(i===void 0||i-- >0)&&!(s=n.next()).done;)r.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return r}function Ze(t,i,e){if(e||arguments.length===2)for(var n=0,s=i.length,r;n<s;n++)(r||!(n in i))&&(r||(r=Array.prototype.slice.call(i,0,n)),r[n]=i[n]);return t.concat(r||Array.prototype.slice.call(i))}function je(t){return this instanceof je?(this.v=t,this):new je(t)}function $h(t,i,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(t,i||[]),s,r=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(d){return function(l){return Promise.resolve(l).then(d,y)}}function o(d,l){n[d]&&(s[d]=function(u){return new Promise(function(g,p){r.push([d,u,g,p])>1||f(d,u)})},l&&(s[d]=l(s[d])))}function f(d,l){try{c(n[d](l))}catch(u){h(r[0][3],u)}}function c(d){d.value instanceof je?Promise.resolve(d.value.v).then(v,y):h(r[0][2],d)}function v(d){f("next",d)}function y(d){f("throw",d)}function h(d,l){d(l),r.shift(),r.length&&f(r[0][0],r[0][1])}}function Bh(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t[Symbol.asyncIterator],e;return i?i.call(t):(t=typeof He=="function"?He(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(a){return new Promise(function(o,f){a=t[r](a),s(o,f,a.done,a.value)})}}function s(r,a,o,f){Promise.resolve(f).then(function(c){r({value:c,done:o})},a)}}function ht(t){return typeof t=="function"}function vn(t){var i=function(n){Error.call(n),n.stack=new Error().stack},e=t(i);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Pn=vn(function(t){return function(e){t(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(n,s){return s+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function an(t,i){if(t){var e=t.indexOf(i);0<=e&&t.splice(e,1)}}var Mi=function(){function t(i){this.initialTeardown=i,this.closed=!1,this._=null,this.A=null}return t.prototype.unsubscribe=function(){var i,e,n,s,r;if(!this.closed){this.closed=!0;var a=this._;if(a)if(this._=null,Array.isArray(a))try{for(var o=He(a),f=o.next();!f.done;f=o.next()){var c=f.value;c.remove(this)}}catch(u){i={error:u}}finally{try{f&&!f.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}else a.remove(this);var v=this.initialTeardown;if(ht(v))try{v()}catch(u){r=u instanceof Pn?u.errors:[u]}var y=this.A;if(y){this.A=null;try{for(var h=He(y),d=h.next();!d.done;d=h.next()){var l=d.value;try{Ys(l)}catch(u){r=r!=null?r:[],u instanceof Pn?r=Ze(Ze([],Ge(r)),Ge(u.errors)):r.push(u)}}}catch(u){n={error:u}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(n)throw n.error}}}if(r)throw new Pn(r)}},t.prototype.add=function(i){var e;if(i&&i!==this)if(this.closed)Ys(i);else{if(i instanceof t){if(i.closed||i.yt(this))return;i.Et(this)}(this.A=(e=this.A)!==null&&e!==void 0?e:[]).push(i)}},t.prototype.yt=function(i){var e=this._;return e===i||Array.isArray(e)&&e.includes(i)},t.prototype.Et=function(i){var e=this._;this._=Array.isArray(e)?(e.push(i),e):e?[e,i]:i},t.prototype.St=function(i){var e=this._;e===i?this._=null:Array.isArray(e)&&an(e,i)},t.prototype.remove=function(i){var e=this.A;e&&an(e,i),i instanceof t&&i.St(this)},t.EMPTY=function(){var i=new t;return i.closed=!0,i}(),t}(),ml=Mi.EMPTY;function bl(t){return t instanceof Mi||t&&"closed"in t&&ht(t.remove)&&ht(t.add)&&ht(t.unsubscribe)}function Ys(t){ht(t)?t():t.unsubscribe()}var Fh={Promise:void 0},jh={setTimeout:function(t,i){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];return setTimeout.apply(void 0,Ze([t,i],Ge(e)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function wl(t){jh.setTimeout(function(){throw t})}function os(){}function Ji(t){t()}var Ts=function(t){ie(i,t);function i(e){var n=t.call(this)||this;return n.isStopped=!1,e?(n.destination=e,bl(e)&&e.add(n)):n.destination=Gh,n}return i.create=function(e,n,s){return new yi(e,n,s)},i.prototype.next=function(e){this.isStopped||this.I(e)},i.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this.U(e))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this.$())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},i.prototype.I=function(e){this.destination.next(e)},i.prototype.U=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},i.prototype.$=function(){try{this.destination.complete()}finally{this.unsubscribe()}},i}(Mi),zh=function(){function t(i){this.partialObserver=i}return t.prototype.next=function(i){var e=this.partialObserver;if(e.next)try{e.next(i)}catch(n){ji(n)}},t.prototype.error=function(i){var e=this.partialObserver;if(e.error)try{e.error(i)}catch(n){ji(n)}else ji(i)},t.prototype.complete=function(){var i=this.partialObserver;if(i.complete)try{i.complete()}catch(e){ji(e)}},t}(),yi=function(t){ie(i,t);function i(e,n,s){var r=t.call(this)||this,a;return ht(e)||!e?a={next:e!=null?e:void 0,error:n!=null?n:void 0,complete:s!=null?s:void 0}:a=e,r.destination=new zh(a),r}return i}(Ts);function ji(t){wl(t)}function Hh(t){throw t}var Gh={closed:!0,next:os,error:Hh,complete:os},Cs=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Ye(t){return t}function Zh(t){return t.length===0?Ye:t.length===1?t[0]:function(e){return t.reduce(function(n,s){return s(n)},e)}}var mt=function(){function t(i){i&&(this.w=i)}return t.prototype.lift=function(i){var e=new t;return e.source=this,e.operator=i,e},t.prototype.subscribe=function(i,e,n){var s=this,r=Wh(i)?i:new yi(i,e,n);return Ji(function(){var a=s,o=a.operator,f=a.source;r.add(o?o.call(r,f):f?s.w(r):s.B(r))}),r},t.prototype.B=function(i){try{return this.w(i)}catch(e){i.error(e)}},t.prototype.forEach=function(i,e){var n=this;return e=Xs(e),new e(function(s,r){var a=new yi({next:function(o){try{i(o)}catch(f){r(f),a.unsubscribe()}},error:r,complete:s});n.subscribe(a)})},t.prototype.w=function(i){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(i)},t.prototype[Cs]=function(){return this},t.prototype.pipe=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];return Zh(i)(this)},t.prototype.toPromise=function(i){var e=this;return i=Xs(i),new i(function(n,s){var r;e.subscribe(function(a){return r=a},function(a){return s(a)},function(){return n(r)})})},t.create=function(i){return new t(i)},t}();function Xs(t){var i;return(i=t!=null?t:Fh.Promise)!==null&&i!==void 0?i:Promise}function Vh(t){return t&&ht(t.next)&&ht(t.error)&&ht(t.complete)}function Wh(t){return t&&t instanceof Ts||Vh(t)&&bl(t)}function Qh(t){return ht(t==null?void 0:t.lift)}function Et(t){return function(i){if(Qh(i))return i.lift(function(e){try{return t(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function yt(t,i,e,n,s){return new qh(t,i,e,n,s)}var qh=function(t){ie(i,t);function i(e,n,s,r,a,o){var f=t.call(this,e)||this;return f.onFinalize=a,f.shouldUnsubscribe=o,f.I=n?function(c){try{n(c)}catch(v){e.error(v)}}:t.prototype.I,f.U=r?function(c){try{r(c)}catch(v){e.error(v)}finally{this.unsubscribe()}}:t.prototype.U,f.$=s?function(){try{s()}catch(c){e.error(c)}finally{this.unsubscribe()}}:t.prototype.$,f}return i.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}},i}(Ts),Kh=vn(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),ut=function(t){ie(i,t);function i(){var e=t.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i.prototype.lift=function(e){var n=new Js(this,this);return n.operator=e,n},i.prototype.S=function(){if(this.closed)throw new Kh},i.prototype.next=function(e){var n=this;Ji(function(){var s,r;if(n.S(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var a=He(n.currentObservers),o=a.next();!o.done;o=a.next()){var f=o.value;f.next(e)}}catch(c){s={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(s)throw s.error}}}})},i.prototype.error=function(e){var n=this;Ji(function(){if(n.S(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=e;for(var s=n.observers;s.length;)s.shift().error(e)}})},i.prototype.complete=function(){var e=this;Ji(function(){if(e.S(),!e.isStopped){e.isStopped=!0;for(var n=e.observers;n.length;)n.shift().complete()}})},i.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(i.prototype,"observed",{get:function(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0},enumerable:!1,configurable:!0}),i.prototype.B=function(e){return this.S(),t.prototype.B.call(this,e)},i.prototype.w=function(e){return this.S(),this.tt(e),this.et(e)},i.prototype.et=function(e){var n=this,s=this,r=s.hasError,a=s.isStopped,o=s.observers;return r||a?ml:(this.currentObservers=null,o.push(e),new Mi(function(){n.currentObservers=null,an(o,e)}))},i.prototype.tt=function(e){var n=this,s=n.hasError,r=n.thrownError,a=n.isStopped;s?e.error(r):a&&e.complete()},i.prototype.asObservable=function(){var e=new mt;return e.source=this,e},i.create=function(e,n){return new Js(e,n)},i}(mt),Js=function(t){ie(i,t);function i(e,n){var s=t.call(this)||this;return s.destination=e,s.source=n,s}return i.prototype.next=function(e){var n,s;(s=(n=this.destination)===null||n===void 0?void 0:n.next)===null||s===void 0||s.call(n,e)},i.prototype.error=function(e){var n,s;(s=(n=this.destination)===null||n===void 0?void 0:n.error)===null||s===void 0||s.call(n,e)},i.prototype.complete=function(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)},i.prototype.w=function(e){var n,s;return(s=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&s!==void 0?s:ml},i}(ut),gn=function(t){ie(i,t);function i(e){var n=t.call(this)||this;return n.F=e,n}return Object.defineProperty(i.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),i.prototype.w=function(e){var n=t.prototype.w.call(this,e);return!n.closed&&e.next(this.F),n},i.prototype.getValue=function(){var e=this,n=e.hasError,s=e.thrownError,r=e.F;if(n)throw s;return this.S(),r},i.prototype.next=function(e){t.prototype.next.call(this,this.F=e)},i}(ut),Os={now:function(){return(Os.delegate||Date).now()},delegate:void 0},te=function(t){ie(i,t);function i(e,n,s){e===void 0&&(e=1/0),n===void 0&&(n=1/0),s===void 0&&(s=Os);var r=t.call(this)||this;return r.it=e,r.nt=n,r.st=s,r.G=[],r.T=!0,r.T=n===1/0,r.it=Math.max(1,e),r.nt=Math.max(1,n),r}return i.prototype.next=function(e){var n=this,s=n.isStopped,r=n.G,a=n.T,o=n.st,f=n.nt;s||(r.push(e),!a&&r.push(o.now()+f)),this.rt(),t.prototype.next.call(this,e)},i.prototype.w=function(e){this.S(),this.rt();for(var n=this.et(e),s=this,r=s.T,a=s.G,o=a.slice(),f=0;f<o.length&&!e.closed;f+=r?1:2)e.next(o[f]);return this.tt(e),n},i.prototype.rt=function(){var e=this,n=e.it,s=e.st,r=e.G,a=e.T,o=(a?1:2)*n;if(n<1/0&&o<r.length&&r.splice(0,r.length-o),!a){for(var f=s.now(),c=0,v=1;v<r.length&&r[v]<=f;v+=2)c=v;c&&r.splice(0,c+1)}},i}(ut),Yh=function(t){ie(i,t);function i(e,n){return t.call(this)||this}return i.prototype.schedule=function(e,n){return this},i}(Mi),tr={setInterval:function(t,i){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];return setInterval.apply(void 0,Ze([t,i],Ge(e)))},clearInterval:function(t){return clearInterval(t)},delegate:void 0},Xh=function(t){ie(i,t);function i(e,n){var s=t.call(this,e,n)||this;return s.scheduler=e,s.work=n,s.pending=!1,s}return i.prototype.schedule=function(e,n){var s;if(n===void 0&&(n=0),this.closed)return this;this.state=e;var r=this.id,a=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(a,r,n)),this.pending=!0,this.delay=n,this.id=(s=this.id)!==null&&s!==void 0?s:this.requestAsyncId(a,this.id,n),this},i.prototype.requestAsyncId=function(e,n,s){return s===void 0&&(s=0),tr.setInterval(e.flush.bind(e,this),s)},i.prototype.recycleAsyncId=function(e,n,s){if(s===void 0&&(s=0),s!=null&&this.delay===s&&this.pending===!1)return n;n!=null&&tr.clearInterval(n)},i.prototype.execute=function(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var s=this.At(e,n);if(s)return s;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},i.prototype.At=function(e,n){var s=!1,r;try{this.work(e)}catch(a){s=!0,r=a||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),r},i.prototype.unsubscribe=function(){if(!this.closed){var e=this,n=e.id,s=e.scheduler,r=s.actions;this.work=this.state=this.scheduler=null,this.pending=!1,an(r,this),n!=null&&(this.id=this.recycleAsyncId(s,n,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},i}(Yh),er=function(){function t(i,e){e===void 0&&(e=t.now),this.schedulerActionCtor=i,this.now=e}return t.prototype.schedule=function(i,e,n){return e===void 0&&(e=0),new this.schedulerActionCtor(this,i).schedule(n,e)},t.now=Os.now,t}(),Jh=function(t){ie(i,t);function i(e,n){n===void 0&&(n=er.now);var s=t.call(this,e,n)||this;return s.actions=[],s.Z=!1,s}return i.prototype.flush=function(e){var n=this.actions;if(this.Z){n.push(e);return}var s;this.Z=!0;do if(s=e.execute(e.state,e.delay))break;while(e=n.shift());if(this.Z=!1,s){for(;e=n.shift();)e.unsubscribe();throw s}},i}(er),_l=new Jh(Xh),tu=_l,yl=new mt(function(t){return t.complete()});function eu(t){return t&&ht(t.schedule)}function El(t){return t[t.length-1]}function Sl(t){return ht(El(t))?t.pop():void 0}function Al(t){return eu(El(t))?t.pop():void 0}var xl=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function Dl(t){return ht(t==null?void 0:t.then)}function Tl(t){return ht(t[Cs])}function Cl(t){return Symbol.asyncIterator&&ht(t==null?void 0:t[Symbol.asyncIterator])}function Ol(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function iu(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Rl=iu();function Ml(t){return ht(t==null?void 0:t[Rl])}function Pl(t){return $h(this,arguments,function(){var e,n,s,r;return gl(this,function(a){switch(a.label){case 0:e=t.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,je(e.read())];case 3:return n=a.sent(),s=n.value,r=n.done,r?[4,je(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,je(s)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function Il(t){return ht(t==null?void 0:t.getReader)}function ne(t){if(t instanceof mt)return t;if(t!=null){if(Tl(t))return nu(t);if(xl(t))return su(t);if(Dl(t))return ru(t);if(Cl(t))return Ll(t);if(Ml(t))return au(t);if(Il(t))return ou(t)}throw Ol(t)}function nu(t){return new mt(function(i){var e=t[Cs]();if(ht(e.subscribe))return e.subscribe(i);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function su(t){return new mt(function(i){for(var e=0;e<t.length&&!i.closed;e++)i.next(t[e]);i.complete()})}function ru(t){return new mt(function(i){t.then(function(e){i.closed||(i.next(e),i.complete())},function(e){return i.error(e)}).then(null,wl)})}function au(t){return new mt(function(i){var e,n;try{for(var s=He(t),r=s.next();!r.done;r=s.next()){var a=r.value;if(i.next(a),i.closed)return}}catch(o){e={error:o}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}i.complete()})}function Ll(t){return new mt(function(i){lu(t,i).catch(function(e){return i.error(e)})})}function ou(t){return Ll(Pl(t))}function lu(t,i){var e,n,s,r;return Nh(this,void 0,void 0,function(){var a,o;return gl(this,function(f){switch(f.label){case 0:f.trys.push([0,5,6,11]),e=Bh(t),f.label=1;case 1:return[4,e.next()];case 2:if(n=f.sent(),!!n.done)return[3,4];if(a=n.value,i.next(a),i.closed)return[2];f.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o=f.sent(),s={error:o},[3,11];case 6:return f.trys.push([6,,9,10]),n&&!n.done&&(r=e.return)?[4,r.call(e)]:[3,8];case 7:f.sent(),f.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return i.complete(),[2]}})})}function ce(t,i,e,n,s){n===void 0&&(n=0),s===void 0&&(s=!1);var r=i.schedule(function(){e(),s?t.add(this.schedule(null,n)):this.unsubscribe()},n);if(t.add(r),!s)return r}function kl(t,i){return i===void 0&&(i=0),Et(function(e,n){e.subscribe(yt(n,function(s){return ce(n,t,function(){return n.next(s)},i)},function(){return ce(n,t,function(){return n.complete()},i)},function(s){return ce(n,t,function(){return n.error(s)},i)}))})}function Ul(t,i){return i===void 0&&(i=0),Et(function(e,n){n.add(t.schedule(function(){return e.subscribe(n)},i))})}function cu(t,i){return ne(t).pipe(Ul(i),kl(i))}function hu(t,i){return ne(t).pipe(Ul(i),kl(i))}function uu(t,i){return new mt(function(e){var n=0;return i.schedule(function(){n===t.length?e.complete():(e.next(t[n++]),e.closed||this.schedule())})})}function du(t,i){return new mt(function(e){var n;return ce(e,i,function(){n=t[Rl](),ce(e,i,function(){var s,r,a;try{s=n.next(),r=s.value,a=s.done}catch(o){e.error(o);return}a?e.complete():e.next(r)},0,!0)}),function(){return ht(n==null?void 0:n.return)&&n.return()}})}function Nl(t,i){if(!t)throw new Error("Iterable cannot be null");return new mt(function(e){ce(e,i,function(){var n=t[Symbol.asyncIterator]();ce(e,i,function(){n.next().then(function(s){s.done?e.complete():e.next(s.value)})},0,!0)})})}function fu(t,i){return Nl(Pl(t),i)}function pu(t,i){if(t!=null){if(Tl(t))return cu(t,i);if(xl(t))return uu(t,i);if(Dl(t))return hu(t,i);if(Cl(t))return Nl(t,i);if(Ml(t))return du(t,i);if(Il(t))return fu(t,i)}throw Ol(t)}function ue(t,i){return i?pu(t,i):ne(t)}function $(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var e=Al(t);return ue(t,e)}function vu(t,i){var e=ht(t)?t:function(){return t},n=function(s){return s.error(e())};return new mt(n)}var $l=vn(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}});function Bl(t){return t instanceof Date&&!isNaN(t)}var gu=vn(function(t){return function(e){e===void 0&&(e=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e}});function Fl(t,i){var e=Bl(t)?{first:t}:typeof t=="number"?{each:t}:t,n=e.first,s=e.each,r=e.with,a=r===void 0?mu:r,o=e.scheduler,f=o===void 0?_l:o,c=e.meta,v=c===void 0?null:c;if(n==null&&s==null)throw new TypeError("No timeout provided.");return Et(function(y,h){var d,l,u=null,g=0,p=function(m){l=ce(h,f,function(){try{d.unsubscribe(),ne(a({meta:v,lastValue:u,seen:g})).subscribe(h)}catch(_){h.error(_)}},m)};d=y.subscribe(yt(h,function(m){l==null||l.unsubscribe(),g++,h.next(u=m),s>0&&p(s)},void 0,void 0,function(){l!=null&&l.closed||l==null||l.unsubscribe(),u=null})),!g&&p(n!=null?typeof n=="number"?n:+n-f.now():s)})}function mu(t){throw new gu(t)}function Nt(t,i){return Et(function(e,n){var s=0;e.subscribe(yt(n,function(r){n.next(t.call(i,r,s++))}))})}var bu=Array.isArray;function wu(t,i){return bu(i)?t.apply(void 0,Ze([],Ge(i))):t(i)}function jl(t){return Nt(function(i){return wu(t,i)})}var _u=Array.isArray,yu=Object.getPrototypeOf,Eu=Object.prototype,Su=Object.keys;function zl(t){if(t.length===1){var i=t[0];if(_u(i))return{args:i,keys:null};if(Au(i)){var e=Su(i);return{args:e.map(function(n){return i[n]}),keys:e}}}return{args:t,keys:null}}function Au(t){return t&&typeof t=="object"&&yu(t)===Eu}function Hl(t,i){return t.reduce(function(e,n,s){return e[n]=i[s],e},{})}function Ve(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var e=Al(t),n=Sl(t),s=zl(t),r=s.args,a=s.keys;if(r.length===0)return ue([],e);var o=new mt(xu(r,e,a?function(f){return Hl(a,f)}:Ye));return n?o.pipe(jl(n)):o}function xu(t,i,e){return e===void 0&&(e=Ye),function(n){ir(i,function(){for(var s=t.length,r=new Array(s),a=s,o=s,f=function(v){ir(i,function(){var y=ue(t[v],i),h=!1;y.subscribe(yt(n,function(d){r[v]=d,h||(h=!0,o--),o||n.next(e(r.slice()))},function(){--a||n.complete()}))},n)},c=0;c<s;c++)f(c)},n)}}function ir(t,i,e){t?ce(e,t,i):i()}function Du(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var e=Sl(t),n=zl(t),s=n.args,r=n.keys,a=new mt(function(o){var f=s.length;if(!f){o.complete();return}for(var c=new Array(f),v=f,y=f,h=function(l){var u=!1;ne(s[l]).subscribe(yt(o,function(g){u||(u=!0,y--),c[l]=g},function(){return v--},void 0,function(){(!v||!u)&&(y||o.next(r?Hl(r,c):c),o.complete())}))},d=0;d<f;d++)h(d)});return e?a.pipe(jl(e)):a}function Tu(t,i,e){return e===void 0&&(e=tu),new mt(function(n){var s=Bl(t)?5e3-e.now():t;s<0&&(s=0);var r=0;return e.schedule(function(){n.closed||(n.next(r++),n.complete())},s)})}function Rs(t,i){return Et(function(e,n){var s=0;e.subscribe(yt(n,function(r){return t.call(i,r,s++)&&n.next(r)}))})}function Ei(t){return Et(function(i,e){var n=null,s=!1,r;n=i.subscribe(yt(e,void 0,void 0,function(a){r=ne(t(a,Ei(t)(i))),n?(n.unsubscribe(),n=null,r.subscribe(e)):s=!0})),s&&(n.unsubscribe(),n=null,r.subscribe(e))})}function Cu(t){return Et(function(i,e){var n=!1;i.subscribe(yt(e,function(s){n=!0,e.next(s)},function(){n||e.next(t),e.complete()}))})}function Ou(t){return t<=0?function(){return yl}:Et(function(i,e){var n=0;i.subscribe(yt(e,function(s){++n<=t&&(e.next(s),t<=n&&e.complete())}))})}function Ru(t,i){return i===void 0&&(i=Ye),t=t!=null?t:Mu,Et(function(e,n){var s,r=!0;e.subscribe(yt(n,function(a){var o=i(a);(r||!t(s,o))&&(r=!1,s=o,n.next(a))}))})}function Mu(t,i){return t===i}function Pu(t){return t===void 0&&(t=Iu),Et(function(i,e){var n=!1;i.subscribe(yt(e,function(s){n=!0,e.next(s)},function(){return n?e.complete():e.error(t())}))})}function Iu(){return new $l}function Pi(t){return Et(function(i,e){try{i.subscribe(e)}finally{e.add(t)}})}function Xe(t,i){var e=arguments.length>=2;return function(n){return n.pipe(Ye,Ou(1),e?Cu(i):Pu(function(){return new $l}))}}function Ii(t){t===void 0&&(t={});var i=t.connector,e=i===void 0?function(){return new ut}:i,n=t.resetOnError,s=n===void 0?!0:n,r=t.resetOnComplete,a=r===void 0?!0:r,o=t.resetOnRefCountZero,f=o===void 0?!0:o;return function(c){var v,y,h,d=0,l=!1,u=!1,g=function(){y==null||y.unsubscribe(),y=void 0},p=function(){g(),v=h=void 0,l=u=!1},m=function(){var _=v;p(),_==null||_.unsubscribe()};return Et(function(_,w){d++,!u&&!l&&g();var E=h=h!=null?h:e();w.add(function(){d--,d===0&&!u&&!l&&(y=In(m,f))}),E.subscribe(w),!v&&d>0&&(v=new yi({next:function(A){return E.next(A)},error:function(A){u=!0,g(),y=In(p,s,A),E.error(A)},complete:function(){l=!0,g(),y=In(p,a),E.complete()}}),ne(_).subscribe(v))})(c)}}function In(t,i){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];if(i===!0){t();return}if(i!==!1){var s=new yi({next:function(){s.unsubscribe(),t()}});return ne(i.apply(void 0,Ze([],Ge(e)))).subscribe(s)}}function Ms(t,i,e){var n,s=!1;return n=t,Ii({connector:function(){return new te(n,i,e)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function Bt(t,i){return Et(function(e,n){var s=null,r=0,a=!1,o=function(){return a&&!s&&n.complete()};e.subscribe(yt(n,function(f){s==null||s.unsubscribe();var c=0,v=r++;ne(t(f,v)).subscribe(s=yt(n,function(y){return n.next(i?i(f,y,v,c++):y)},function(){s=null,o()}))},function(){a=!0,o()}))})}function tt(t){return Et(function(i,e){ne(t).subscribe(yt(e,function(){return e.complete()},os)),!e.closed&&i.subscribe(e)})}function Gl(t,i,e){var n=ht(t)||i||e?{next:t,error:i,complete:e}:t;return n?Et(function(s,r){var a;(a=n.subscribe)===null||a===void 0||a.call(n);var o=!0;s.subscribe(yt(r,function(f){var c;(c=n.next)===null||c===void 0||c.call(n,f),r.next(f)},function(){var f;o=!1,(f=n.complete)===null||f===void 0||f.call(n),r.complete()},function(f){var c;o=!1,(c=n.error)===null||c===void 0||c.call(n,f),r.error(f)},function(){var f,c;o&&((f=n.unsubscribe)===null||f===void 0||f.call(n)),(c=n.finalize)===null||c===void 0||c.call(n)}))}):Ye}var T=(t=>(t.ERROR="ERROR",t.UNAVAILABLE="UNAVAILABLE",t.DENIED="DENIED",t.PROMPT="PROMPT",t.ALLOWED="ALLOWED",t))(T||{});class re{constructor(i){this.b=new(re.a())({formats:i})}static create(){return re.c().then(i=>new re(i))}static isSupported(){return!!re.a()}static a(){return window.BarcodeDetector}static c(){return re.a().getSupportedFormats()}detect(i){return this.b.detect(i)}supportedFormats(){return re.c()}type(){return"NATIVE"}}function he(t,i,e,n){return new(e||(e=Promise))(function(s,r){function a(c){try{f(n.next(c))}catch(v){r(v)}}function o(c){try{f(n.throw(c))}catch(v){r(v)}}function f(c){var v;c.done?s(c.value):(v=c.value,v instanceof e?v:new e(function(y){y(v)})).then(a,o)}f((n=n.apply(t,[])).next())})}var Ln,Lu=(Ln=import.meta.url,function(){return Ne(this,arguments,function*(t={}){var i,e,n=t;n.ready=new Promise((M,L)=>{i=M,e=L});var s,r,a,o=Object.assign({},n),f=typeof window=="object",c=typeof importScripts=="function",v=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",y="";if(v){const{createRequire:M}=yield Promise.resolve().then(()=>Hu);var h=M(import.meta.url),d=h("fs"),l=h("path");y=c?l.dirname(y)+"/":h("url").fileURLToPath(new URL("/assets/index-BY-99T_0.mjs",import.meta.url)),s=(L,F)=>(L=zt(L)?new URL(L):l.normalize(L),d.readFileSync(L,F?void 0:"utf8")),a=L=>{var F=s(L,!0);return F.buffer||(F=new Uint8Array(F)),F},r=(L,F,U,G=!0)=>{L=zt(L)?new URL(L):l.normalize(L),d.readFile(L,G?void 0:"utf8",(J,q)=>{J?U(J):F(G?q.buffer:q)})},!n.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),n.inspect=()=>"[Emscripten Module object]"}else(f||c)&&(c?y=self.location.href:typeof document!="undefined"&&document.currentScript&&(y=document.currentScript.src),Ln&&(y=Ln),y=y.indexOf("blob:")!==0?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):"",s=M=>{var L=new XMLHttpRequest;return L.open("GET",M,!1),L.send(null),L.responseText},c&&(a=M=>{var L=new XMLHttpRequest;return L.open("GET",M,!1),L.responseType="arraybuffer",L.send(null),new Uint8Array(L.response)}),r=(M,L,F)=>{var U=new XMLHttpRequest;U.open("GET",M,!0),U.responseType="arraybuffer",U.onload=()=>{U.status==200||U.status==0&&U.response?L(U.response):F()},U.onerror=F,U.send(null)});var u,g,p,m=n.print||console.log.bind(console),_=n.printErr||console.error.bind(console);Object.assign(n,o),o=null,n.arguments&&n.arguments,n.thisProgram&&n.thisProgram,n.quit&&n.quit,n.wasmBinary&&(u=n.wasmBinary),n.noExitRuntime,typeof WebAssembly!="object"&&W("no native wasm support detected");var w,E,A=!1;function S(){var M=g.buffer;n.HEAP8=new Int8Array(M),n.HEAP16=new Int16Array(M),n.HEAP32=new Int32Array(M),n.HEAPU8=w=new Uint8Array(M),n.HEAPU16=new Uint16Array(M),n.HEAPU32=E=new Uint32Array(M),n.HEAPF32=new Float32Array(M),n.HEAPF64=new Float64Array(M)}var x=[],D=[],I=[],P=0,z=null;function W(M){n.onAbort&&n.onAbort(M),_(M="Aborted("+M+")"),A=!0,M+=". Build with -sASSERTIONS for more info.";var L=new WebAssembly.RuntimeError(M);throw e(L),L}var Z,nt,jt="data:application/octet-stream;base64,";function Ct(M){return M.startsWith(jt)}function zt(M){return M.startsWith("file://")}function Ae(M){if(M==Z&&u)return new Uint8Array(u);if(a)return a(M);throw"both async and sync fetching of the wasm failed"}function dt(M,L,F){return function(U){if(!u&&(f||c)){if(typeof fetch=="function"&&!zt(U))return fetch(U,{credentials:"same-origin"}).then(G=>{if(!G.ok)throw"failed to load wasm binary file at '"+U+"'";return G.arrayBuffer()}).catch(()=>Ae(U));if(r)return new Promise((G,J)=>{r(U,q=>G(new Uint8Array(q)),J)})}return Promise.resolve().then(()=>Ae(U))}(M).then(U=>WebAssembly.instantiate(U,L)).then(U=>U).then(F,U=>{_("failed to asynchronously prepare wasm: "+U),W(U)})}n.locateFile?Ct(Z="zbar.wasm")||(nt=Z,Z=n.locateFile?n.locateFile(nt,y):y+nt):Z=new URL("/assets/zbar-BSn7mpZR.wasm",import.meta.url).href;var k,N=M=>{for(;M.length>0;)M.shift()(n)},B=M=>{var L=M-g.buffer.byteLength+65535>>>16;try{return g.grow(L),S(),1}catch(F){}},Q=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0,j=[null,[],[]],lt=(M,L)=>{var F=j[M];L===0||L===10?((M===1?m:_)(((U,G,J)=>{for(var q=G+J,ct=G;U[ct]&&!(ct>=q);)++ct;if(ct-G>16&&U.buffer&&Q)return Q.decode(U.subarray(G,ct));for(var rt="";G<ct;){var it=U[G++];if(128&it){var St=63&U[G++];if((224&it)!=192){var Ht=63&U[G++];if((it=(240&it)==224?(15&it)<<12|St<<6|Ht:(7&it)<<18|St<<12|Ht<<6|63&U[G++])<65536)rt+=String.fromCharCode(it);else{var bt=it-65536;rt+=String.fromCharCode(55296|bt>>10,56320|1023&bt)}}else rt+=String.fromCharCode((31&it)<<6|St)}else rt+=String.fromCharCode(it)}return rt})(F,0)),F.length=0):F.push(L)},et={d:()=>!0,e:function(){return Date.now()},c:M=>{var L=w.length,F=2147483648;if((M>>>=0)>F)return!1;for(var U,G,J=1;J<=4;J*=2){var q=L*(1+.2/J);q=Math.min(q,M+100663296);var ct=Math.min(F,(U=Math.max(M,q))+((G=65536)-U%G)%G);if(B(ct))return!0}return!1},f:M=>52,b:function(M,L,F,U,G){return 70},a:(M,L,F,U)=>{for(var G=0,J=0;J<F;J++){var q=E[L>>2],ct=E[L+4>>2];L+=8;for(var rt=0;rt<ct;rt++)lt(M,w[q+rt]);G+=ct}return E[U>>2]=G,0}};function ot(){function M(){k||(k=!0,n.calledRun=!0,A||(N(D),i(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),function(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)L=n.postRun.shift(),I.unshift(L);var L;N(I)}()))}P>0||(function(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)L=n.preRun.shift(),x.unshift(L);var L;N(x)}(),P>0||(n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),M()},1)):M()))}if(function(){var M,L,F,U,G={a:et};function J(q,ct){var rt,it=q.exports;return g=(p=it).g,S(),p.s,rt=p.h,D.unshift(rt),function(St){if(P--,n.monitorRunDependencies&&n.monitorRunDependencies(P),P==0&&z){var Ht=z;z=null,Ht()}}(),it}if(P++,n.monitorRunDependencies&&n.monitorRunDependencies(P),n.instantiateWasm)try{return n.instantiateWasm(G,J)}catch(q){_("Module.instantiateWasm callback failed with error: "+q),e(q)}(M=u,L=Z,F=G,U=function(q){J(q.instance)},M||typeof WebAssembly.instantiateStreaming!="function"||Ct(L)||zt(L)||v||typeof fetch!="function"?dt(L,F,U):fetch(L,{credentials:"same-origin"}).then(q=>WebAssembly.instantiateStreaming(q,F).then(U,function(ct){return _("wasm streaming compile failed: "+ct),_("falling back to ArrayBuffer instantiation"),dt(L,F,U)}))).catch(e)}(),n.at=()=>(n.at=p.i)(),n.ot=M=>(n.ot=p.j)(M),n.lt=(M,L,F,U)=>(n.lt=p.k)(M,L,F,U),n.ct=(M,L)=>(n.ct=p.l)(M,L),n.ht=(M,L)=>(n.ht=p.m)(M,L),n.ut=M=>(n.ut=p.n)(M),n.dt=(M,L)=>(n.dt=p.o)(M,L),n.V=(M,L,F,U,G,J)=>(n.V=p.p)(M,L,F,U,G,J),n.ft=M=>(n.ft=p.q)(M),n.pt=M=>(n.pt=p.r)(M),n.xt=M=>(n.xt=p.t)(M),n.W=M=>(n.W=p.u)(M),z=function M(){k||ot(),k||(z=M)},n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return ot(),t.ready})});let ls;function ku(t={}){ls=function(){return he(this,void 0,void 0,function*(){const i=yield Lu(t);if(i)return i;throw Error("WASM was not loaded")})}()}function cs(){return he(this,void 0,void 0,function*(){return ls||ku(),yield ls})}var on,hs,nr;(function(t){t[t.ZBAR_NONE=0]="ZBAR_NONE",t[t.ZBAR_PARTIAL=1]="ZBAR_PARTIAL",t[t.ZBAR_EAN2=2]="ZBAR_EAN2",t[t.ZBAR_EAN5=5]="ZBAR_EAN5",t[t.ZBAR_EAN8=8]="ZBAR_EAN8",t[t.ZBAR_UPCE=9]="ZBAR_UPCE",t[t.ZBAR_ISBN10=10]="ZBAR_ISBN10",t[t.ZBAR_UPCA=12]="ZBAR_UPCA",t[t.ZBAR_EAN13=13]="ZBAR_EAN13",t[t.ZBAR_ISBN13=14]="ZBAR_ISBN13",t[t.ZBAR_COMPOSITE=15]="ZBAR_COMPOSITE",t[t.ZBAR_I25=25]="ZBAR_I25",t[t.ZBAR_DATABAR=34]="ZBAR_DATABAR",t[t.ZBAR_DATABAR_EXP=35]="ZBAR_DATABAR_EXP",t[t.ZBAR_CODABAR=38]="ZBAR_CODABAR",t[t.ZBAR_CODE39=39]="ZBAR_CODE39",t[t.ZBAR_PDF417=57]="ZBAR_PDF417",t[t.ZBAR_QRCODE=64]="ZBAR_QRCODE",t[t.ZBAR_SQCODE=80]="ZBAR_SQCODE",t[t.ZBAR_CODE93=93]="ZBAR_CODE93",t[t.ZBAR_CODE128=128]="ZBAR_CODE128",t[t.ZBAR_SYMBOL=255]="ZBAR_SYMBOL",t[t.ZBAR_ADDON2=512]="ZBAR_ADDON2",t[t.ZBAR_ADDON5=1280]="ZBAR_ADDON5",t[t.ZBAR_ADDON=1792]="ZBAR_ADDON"})(on||(on={})),function(t){t[t.ZBAR_CFG_ENABLE=0]="ZBAR_CFG_ENABLE",t[t.ZBAR_CFG_ADD_CHECK=1]="ZBAR_CFG_ADD_CHECK",t[t.ZBAR_CFG_EMIT_CHECK=2]="ZBAR_CFG_EMIT_CHECK",t[t.ZBAR_CFG_ASCII=3]="ZBAR_CFG_ASCII",t[t.ZBAR_CFG_BINARY=4]="ZBAR_CFG_BINARY",t[t.ZBAR_CFG_NUM=5]="ZBAR_CFG_NUM",t[t.ZBAR_CFG_MIN_LEN=32]="ZBAR_CFG_MIN_LEN",t[t.ZBAR_CFG_MAX_LEN=33]="ZBAR_CFG_MAX_LEN",t[t.ZBAR_CFG_UNCERTAINTY=64]="ZBAR_CFG_UNCERTAINTY",t[t.ZBAR_CFG_POSITION=128]="ZBAR_CFG_POSITION",t[t.ZBAR_CFG_TEST_INVERTED=129]="ZBAR_CFG_TEST_INVERTED",t[t.ZBAR_CFG_X_DENSITY=256]="ZBAR_CFG_X_DENSITY",t[t.ZBAR_CFG_Y_DENSITY=257]="ZBAR_CFG_Y_DENSITY"}(hs||(hs={})),function(t){t[t.ZBAR_ORIENT_UNKNOWN=-1]="ZBAR_ORIENT_UNKNOWN",t[t.ZBAR_ORIENT_UP=0]="ZBAR_ORIENT_UP",t[t.ZBAR_ORIENT_RIGHT=1]="ZBAR_ORIENT_RIGHT",t[t.ZBAR_ORIENT_DOWN=2]="ZBAR_ORIENT_DOWN",t[t.ZBAR_ORIENT_LEFT=3]="ZBAR_ORIENT_LEFT"}(nr||(nr={}));class Zl{constructor(i,e){this.ptr=i,this.inst=e}checkAlive(){if(!this.ptr)throw Error("Call after destroyed")}getPointer(){return this.checkAlive(),this.ptr}}class Vl{constructor(i,e){this.ptr=i,this.ptr32=i>>2,this.buf=e,this.HEAP8=new Int8Array(e),this.HEAPU32=new Uint32Array(e),this.HEAP32=new Int32Array(e)}}class Ps extends Vl{get type(){return this.HEAPU32[this.ptr32]}get data(){const i=this.HEAPU32[this.ptr32+4],e=this.HEAPU32[this.ptr32+5];return Int8Array.from(this.HEAP8.subarray(e,e+i))}get points(){const i=this.HEAPU32[this.ptr32+7],e=this.HEAPU32[this.ptr32+8]>>2,n=[];for(let s=0;s<i;++s){const r=this.HEAP32[e+2*s],a=this.HEAP32[e+2*s+1];n.push({x:r,y:a})}return n}get orientation(){return this.HEAP32[this.ptr32+9]}get next(){const i=this.HEAPU32[this.ptr32+11];return i?new Ps(i,this.buf):null}get time(){return this.HEAPU32[this.ptr32+13]}get cacheCount(){return this.HEAP32[this.ptr32+14]}get quality(){return this.HEAP32[this.ptr32+15]}}class Uu extends Vl{get head(){const i=this.HEAPU32[this.ptr32+2];return i?new Ps(i,this.buf):null}}class mn{constructor(i){this.type=i.type,this.typeName=on[this.type],this.data=i.data,this.points=i.points,this.orientation=i.orientation,this.time=i.time,this.cacheCount=i.cacheCount,this.quality=i.quality}static createSymbolsFromPtr(i,e){if(i==0)return[];let n=new Uu(i,e).head;const s=[];for(;n!==null;)s.push(new mn(n)),n=n.next;return s}decode(i){return new TextDecoder(i).decode(this.data)}}class Nu extends Zl{static createFromGrayBuffer(i,e,n,s=0){return he(this,void 0,void 0,function*(){const r=yield cs(),a=new Uint8Array(n),o=i*e;if(o!==a.byteLength)throw Error(`data length (${a.byteLength} bytes) does not match width and height (${o} bytes)`);const f=r.W(o);return r.HEAPU8.set(a,f),new this(r.V(i,e,808466521,f,o,s),r)})}static createFromRGBABuffer(i,e,n,s=0){return he(this,void 0,void 0,function*(){const r=yield cs(),a=new Uint8Array(n),o=i*e;if(4*o!==a.byteLength)throw Error(`data length (${a.byteLength} bytes) does not match width and height (${4*o} bytes)`);const f=r.W(o),c=f+o,v=r.HEAPU8;for(let y=f,h=0;y<c;y++,h+=4)v[y]=19595*a[h]+38469*a[h+1]+7472*a[h+2]>>16;return new this(r.V(i,e,808466521,f,o,s),r)})}destroy(){this.checkAlive(),this.inst.ft(this.ptr),this.ptr=0}getSymbols(){this.checkAlive();const i=this.inst.pt(this.ptr);return mn.createSymbolsFromPtr(i,this.inst.HEAPU8.buffer)}}class $u extends Zl{static create(){return he(this,void 0,void 0,function*(){const i=yield cs();return new this(i.at(),i)})}destroy(){this.checkAlive(),this.inst.ot(this.ptr),this.ptr=0}setConfig(i,e,n){return this.checkAlive(),this.inst.lt(this.ptr,i,e,n)}enableCache(i=!0){this.checkAlive(),this.inst.ct(this.ptr,i)}recycleImage(i){this.checkAlive(),this.inst.ht(this.ptr,i.getPointer())}getResults(){this.checkAlive();const i=this.inst.ut(this.ptr);return mn.createSymbolsFromPtr(i,this.inst.HEAPU8.buffer)}scan(i){return this.checkAlive(),this.inst.dt(this.ptr,i.getPointer())}}const Bu=()=>he(void 0,void 0,void 0,function*(){const t=yield $u.create();return t.setConfig(on.ZBAR_NONE,hs.ZBAR_CFG_BINARY,1),t});let sr;const Fu=(t,i)=>he(void 0,void 0,void 0,function*(){i===void 0&&(i=sr||(yield Bu()),sr=i);const e=i.scan(t);if(e<0)throw Error("Scan Failed");return e===0?[]:t.getSymbols()}),ju=(t,i,e,n)=>he(void 0,void 0,void 0,function*(){const s=yield Nu.createFromRGBABuffer(i,e,t),r=yield Fu(s,n);return s.destroy(),r}),zu=(t,i)=>he(void 0,void 0,void 0,function*(){return yield ju(t.data.buffer,t.width,t.height,i)}),Hu=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class Is{static create(){return Promise.resolve(new Is)}static isSupported(){return!0}detect(i,e){const n=e.getImageData(0,0,i.width,i.height);return zu(n).then(s=>s.map(r=>({points:r.points,format:r.typeName,rawValue:r.decode()})))}supportedFormats(){return Promise.resolve(["code_39","code_93","code_128","codabar","databar/expanded","ean_5","ean_8","ean_13","isbn_10","isbn_13","isbn_13+2","isbn_13+5","itf","qr_code","upc_a","upc_e"])}type(){return"Z_BAR"}}var Zt=(t=>(t.ERROR="ERROR",t.DENIED="DENIED",t.PROMPT="PROMPT",t.GRANTED="GRANTED",t))(Zt||{});class Ee{constructor(){this.d=new Map,this.e=new Map}accelerometer(i=!1){return this.c("Accelerometer","accelerometer",i)}camera(i=!1){if(!navigator.mediaDevices||!navigator.permissions)return $("ERROR");const e="camera",n=this.a(e);return i&&navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(()=>n.next("GRANTED"),()=>n.next("DENIED")),this.b(e,n)}combineStates(i){return i.includes("ERROR")?T.ERROR:i.includes("DENIED")?T.DENIED:i.includes("PROMPT")?T.PROMPT:T.ALLOWED}geolocation(i=!1){if(!navigator.geolocation||!navigator.permissions)return $("ERROR");const e="geolocation",n=this.a(e);return i&&navigator.geolocation.getCurrentPosition(()=>{n.next("GRANTED")},()=>{n.next("ERROR")},{timeout:4e3}),this.b(e,n)}gyroscope(i=!1){return this.c("Gyroscope","gyroscope",i)}magnetometer(i=!1){return this.c("AbsoluteOrientationSensor","magnetometer",i)}nfc(i=!1){if(!window.NDEFReader||!navigator.permissions)return $("ERROR");const e="nfc",n=this.a(e);if(i){const s=new AbortController,r=new NDEFReader;r.onreading=()=>n.next("GRANTED"),r.onreadingerror=()=>n.next("ERROR"),r.scan({signal:s.signal}).then(()=>{n.next("GRANTED"),s.abort()},()=>{n.next("ERROR"),s.abort()})}return this.b(e,n)}toAvailability(i,e){return i==="ERROR"?$(T.ERROR):i==="PROMPT"?$(T.PROMPT):i==="DENIED"?$(T.DENIED):e?e():$(T.ALLOWED)}f(i){const e=new te(1);return navigator.permissions.query({name:i}).then(n=>{e.next(n.state),n.onchange=()=>{e.next(n.state)}},()=>e.next("denied")),e.asObservable()}c(i,e,n){if(!(i in window)||!navigator.permissions)return $("ERROR");const s=e,r=this.a(s);if(n){const a=new window[i]({frequency:10});a.onerror=o=>{o.error.name==="NotAllowedError"?r.next("DENIED"):r.next("ERROR")},a.onreading=()=>{r.next("GRANTED"),a.stop()}}return this.b(s,r)}b(i,e){let n=this.d.get(i);return n||(n=e.asObservable().pipe(Bt(s=>s!==null?$(s):this.f(i).pipe(Nt(r=>this.g(r)))),Ru(),Ms(1)),this.d.set(i,n),n)}a(i){let e=this.e.get(i);return e||(e=new te(1),e.next(null),this.e.set(i,e)),e}g(i){let e="DENIED";return i==="granted"?e="GRANTED":i==="prompt"&&(e="PROMPT"),e}}var Lt=(t=>(t.DMS="DMS",t.DDM="DDM",t.DDD="DDD",t.UTMUPS="UTMUPS",t.MGRS="MGRS",t))(Lt||{}),Gt=(t=>(t.IMPERIAL="IMPERIAL",t.METRIC="METRIC",t))(Gt||{});class Gu{constructor(){this.c=new Map}clear(){this.c.clear()}getItem(i){return this.c.get(i)||null}removeItem(i){this.c.delete(i)}setItem(i,e){this.c.set(i,e)}}const xt=typeof localStorage=="undefined"?new Gu:localStorage;class At{static boolean(i,e=1){return{getItem:()=>this.a(i,e,n=>typeof n=="boolean"),reset:()=>xt.removeItem(i),setItem:n=>this.b(i,n,e)}}static enum(i,e,n=1){return this.list(i,[...Object.values(e)],n)}static json(i,e=1,n){return{getItem:()=>this.a(i,e,n),reset:()=>xt.removeItem(i),setItem:s=>this.b(i,s,e)}}static list(i,e,n=1){return{getItem:()=>{const s=this.a(i,n,r=>e.includes(r));return e.includes(s)?s:null},reset:()=>xt.removeItem(i),setItem:s=>e.includes(s)?this.b(i,s,n):xt.removeItem(i)}}static number(i,e=1){return{getItem:()=>this.a(i,e,n=>typeof n=="number"),reset:()=>xt.removeItem(i),setItem:n=>this.b(i,n,e)}}static string(i,e=1){return{getItem:()=>this.a(i,e,n=>typeof n=="string"),reset:()=>xt.removeItem(i),setItem:n=>this.b(i,n,e)}}static a(i,e,n){const s=xt.getItem(i);if(!s)return null;try{const r=JSON.parse(s);if(r[0]===e&&n(r[1]))return r[1]}catch(r){}return null}static b(i,e,n){try{xt.setItem(i,JSON.stringify([n,e]))}catch(s){xt.clear()}}}var Re=(t=>(t.COMPASS="COMPASS",t.DIRECTION_OF_TRAVEL="DIRECTION_OF_TRAVEL",t.NORTH_UP="NORTH_UP",t))(Re||{}),le=(t=>(t["12_HOUR"]="12_HOUR",t["24_HOUR"]="24_HOUR",t))(le||{});class Ft{constructor(){for(const e of["barcodeReader"])At.string(e).reset();const i=At.number("preferenceVersion");i.getItem()!==1&&(this.d(),i.setItem(1)),this.barcodeReader=At.boolean("barcodeReader"),this.coordinateSystem=At.enum("coordinateSystem",Lt),this.distanceSystem=At.enum("distanceSystem",Gt),this.magnifier=At.boolean("magnifier"),this.navigationType=At.enum("navigationType",Re),this.navigationWakeLock=At.boolean("navigationWakeLock"),this.nfc=At.boolean("nfc"),this.points=At.json("points",1,e=>Array.isArray(e)&&e.every(n=>typeof n=="object"&&n&&"lat"in n&&"lon"in n)),this.sunMoonLocation=At.string("sunMoonLocation"),this.timeSystem=At.enum("time",le),this.torch=At.boolean("torch")}field(i,e){return At.list(`field.${i}`,e)}d(){this.a("barcodeReader2","barcodeReader"),this.b("coordinateSystem"),this.b("distanceSystem"),this.a("magnifier"),this.b("navigationType"),this.a("navigationWakeLock"),this.a("nfc"),this.a("points"),this.b("sunMoonLocation"),this.b("time"),this.a("torch")}a(i,e){let n=xt.getItem(i);n&&this.c(e||i,`[1,${n}]`)}b(i){let e=xt.getItem(i);e&&this.c(i,JSON.stringify([1,e]))}c(i,e){try{xt.setItem(i,e)}catch(n){xt.clear()}}}class bn{constructor(){this.e=null,this.a=null,this.c=b(Ee),this.d=b(Ft);let i=Is;re.isSupported()&&(i=re),this.b=i.create()}availabilityState(i){if(!navigator.mediaDevices)return $(T.UNAVAILABLE);const e=()=>ue(this.getStream().then(n=>n.getVideoTracks().length?(this.d.barcodeReader.setItem(!0),T.ALLOWED):(this.d.barcodeReader.setItem(!1),T.UNAVAILABLE)));return this.c.camera().pipe(Bt(n=>{if(!i){const s=this.d.barcodeReader.getItem();if(s===!0)return $(T.ALLOWED);if(s===!1)return $(T.UNAVAILABLE)}return this.c.toAvailability(n,e)}))}detect(i){return this.b.then(e=>{let n=this.e;n||(this.e=n=document.createElement("canvas"),this.a=null),(n.width!==i.videoWidth||n.height!==i.videoHeight)&&(n.width=i.videoWidth,n.height=i.videoHeight,this.a=null);let s=this.a;return s||(this.a=s=n.getContext("2d",{willReadFrequently:!0})),s.drawImage(i,0,0,n.width,n.height),e.detect(n,s)})}getStream(){return navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})}prompt(){return this.c.camera(!0)}supportedFormats(){return this.b.then(i=>i.supportedFormats())}type(){return this.b.then(i=>i.type())}}const Zu=180/Math.PI;class Vu{constructor(){this.a=null,this.b=b(Ee)}availabilityState(){return window.AbsoluteOrientationSensor?this.c().pipe(Nt(i=>this.b.combineStates(i)),Bt(i=>i===T.ALLOWED?this.getCompassBearing().pipe(Nt(()=>T.ALLOWED),Ei(()=>$(T.ERROR))):$(i))):$(T.UNAVAILABLE)}getCompassBearing(){return this.a||this.d(),this.a}prompt(){return this.c(!0)}type(){return"ABSOLUTE_ORIENTATION_SENSOR"}e(i){const e=Math.atan2(2*i[0]*i[1]+2*i[2]*i[3],1-2*i[1]*i[1]-2*i[2]*i[2])*Zu;return 360-(e<0?e+360:e)}d(){try{const i=new AbsoluteOrientationSensor({frequency:20,referenceFrame:"screen"}),e=new ut,n=new Float32Array(4);i.addEventListener("reading",()=>{if(i.quaternion){if(i.quaternion[0]===n[0]&&i.quaternion[1]===n[1]&&i.quaternion[2]===n[2]&&i.quaternion[3]===n[3])return;n.set(i.quaternion),e.next(this.e(i.quaternion))}}),i.addEventListener("error",s=>{e.error(s)}),i.start(),this.a=e.asObservable().pipe(Pi(()=>{i.stop(),this.a=null}),Ii({connector:()=>new te(1),resetOnRefCountZero:!0}))}catch(i){this.a=vu(new Error("Unsupported"))}}c(i=!1){return Ve([this.b.accelerometer(i),this.b.gyroscope(i),this.b.magnetometer(i)])}}const kn=Math.PI/180,Wu=180/Math.PI,Qu=2*Math.PI,Un="ondeviceorientationabsolute"in window;class qu{constructor(){this.a=null,this.d=!1,this.b=null}availabilityState(){return window.DeviceOrientationEvent?this.getCompassBearing().pipe(Xe(),Fl(1e3),Nt(()=>T.ALLOWED),Ei(i=>!this.d&&i.name==="TimeoutError"?$(T.PROMPT):$(T.ERROR))):$(T.UNAVAILABLE)}getCompassBearing(){return this.a||this.e(),this.a}prompt(){return this.d=!0,window.DeviceOrientationEvent.requestPermission?ue(window.DeviceOrientationEvent.requestPermission(!0)).pipe(Ei(()=>$(null)),Gl(()=>this.f())):$(null)}type(){return Un?"DEVICE_ORIENTATION_ABSOLUTE":"DEVICE_ORIENTATION"}g(i,e,n){const s=i*kn,r=e*kn,a=n*kn,o=Math.cos(s),f=Math.sin(s),c=Math.sin(r),v=Math.cos(a),y=Math.sin(a),h=-o*y-f*c*v,d=-f*y+o*c*v;let l=Math.atan(h/d);return d<0?l+=Math.PI:h<0&&(l+=Qu),l*=Wu,l}e(){this.c=Un?"deviceorientationabsolute":"deviceorientation";const i=new ut;let e=null,n=null,s=null,r=null;this.b=a=>{if(typeof a.webkitCompassHeading=="number"){if(e===a.webkitCompassHeading)return;e=a.webkitCompassHeading,i.next(e);return}if(!Un&&!a.absolute){i.error(new Error("Unsupported"));return}if(a.alpha===null||a.beta===null||a.gamma===null){i.error(new Error("Unsupported"));return}n===a.alpha&&s===a.beta&&r===a.gamma||(n=a.alpha,s=a.beta,r=a.gamma,i.next(this.g(n,s,r)))},this.a=i.asObservable().pipe(Pi(()=>{window.removeEventListener(this.c,this.b),this.a=null}),Ii({connector:()=>new te(1),resetOnRefCountZero:!0})),window.addEventListener(this.c,this.b)}f(){const i=this.b,e=this.c;i&&e&&(window.removeEventListener(e,i),window.addEventListener(e,i))}}class wn{constructor(){this.a=b(Vu),this.c=b(qu),this.b=null,this.e=this.a,this.d=new te(1),this.f=new te(1),this.d.next(!1)}availabilityState(){return this.b?this.b:(this.b=this.d.asObservable().pipe(Bt(()=>Ve([this.a.availabilityState(),this.c.availabilityState()])),Nt(([i,e])=>{for(const n of[T.ALLOWED,T.PROMPT,T.DENIED,T.UNAVAILABLE]){if(i===n)return this.g(this.a),i;if(e===n)return this.g(this.c),e}return T.ERROR}),Ms(1)),this.b)}getCompassBearing(){return this.e.getCompassBearing()}prompt(){Ve([this.a.prompt(),this.c.prompt()]).subscribe(()=>{this.d.next(!0)})}typeObservable(){return this.f.asObservable()}g(i){this.e=i,this.f.next(i.type())}}class Wl{constructor(){this.a=b(Ee),this.b=b(Ft)}availabilityState(i){if(!navigator.mediaDevices)return $(T.UNAVAILABLE);const e=()=>ue(this.getStream().then(n=>n.getVideoTracks().length?(this.b.magnifier.setItem(!0),T.ALLOWED):(this.b.magnifier.setItem(!1),T.UNAVAILABLE)));return this.a.camera().pipe(Bt(n=>{if(!i){const s=this.b.magnifier.getItem();if(s===!0)return $(T.ALLOWED);if(s===!1)return $(T.UNAVAILABLE)}return this.a.toAvailability(n,e)}))}getStream(){return navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})}prompt(){return this.a.camera(!0)}}class Ls{constructor(){this.b=b(Ee),this.c=b(Ft),this.a=null}availabilityState(i){return window.NDEFReader?this.b.nfc().pipe(Bt(e=>{if(e===Zt.ERROR||e===Zt.PROMPT||e===Zt.DENIED)return this.b.toAvailability(e);if(!i){const n=this.c.nfc.getItem();if(n)return $(T.ALLOWED);if(n===!1)return $(T.UNAVAILABLE)}return ue(this.d().then(n=>(this.c.nfc.setItem(n),n?T.ALLOWED:T.UNAVAILABLE)))})):$(T.UNAVAILABLE)}scan(){if(this.a)return this.a;const i=new ut,e=new NDEFReader,n=new AbortController;return e.onreading=s=>{i.next({records:s.message.records,serialNumber:s.serialNumber,timestamp:new Date})},e.onreadingerror=()=>{i.next({readError:!0,timestamp:new Date})},e.scan({signal:n.signal}).then(()=>{i.next({ready:!0,timestamp:new Date})},()=>{i.next({initializeError:!0,timestamp:new Date})}),this.a=i.asObservable().pipe(Pi(()=>{n.abort(),this.a=null}),Ii()),this.a}prompt(){return this.b.nfc(!0)}d(){return new Promise(i=>{const e=new NDEFReader;e.onreading=()=>i(!0),e.onreadingerror=()=>i(!0);const n=new AbortController;setTimeout(()=>n.abort(),1),e.scan({signal:n.signal}).then(()=>i(!0),s=>i((s==null?void 0:s.name)==="AbortError"||(s==null?void 0:s.name)==="TimeoutError"))})}}const zi={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},Ku=6378.137,rr=1/298.257223563,ar=rr*(2-rr),ri=Math.PI/180;class ks{static fromTile(i,e,n){const s=Math.PI*(1-2*(i+.5)/Math.pow(2,e)),r=Math.atan(.5*(Math.exp(s)-Math.exp(-s)))/ri;return new ks(r,n)}static get units(){return zi}constructor(i,e){if(i===void 0)throw new Error("No latitude given.");if(e&&!zi[e])throw new Error(`Unknown unit ${e}. Use one of: ${Object.keys(zi).join(", ")}`);const n=ri*Ku*(e?zi[e]:1),s=Math.cos(i*ri),r=1/(1-ar*(1-s*s)),a=Math.sqrt(r);this.kx=n*a*s,this.ky=n*a*r*(1-ar)}distance(i,e){const n=It(i[0]-e[0])*this.kx,s=(i[1]-e[1])*this.ky;return Math.sqrt(n*n+s*s)}bearing(i,e){const n=It(e[0]-i[0])*this.kx,s=(e[1]-i[1])*this.ky;return Math.atan2(n,s)/ri}destination(i,e,n){const s=n*ri;return this.offset(i,Math.sin(s)*e,Math.cos(s)*e)}offset(i,e,n){return[i[0]+e/this.kx,i[1]+n/this.ky]}lineDistance(i){let e=0;for(let n=0;n<i.length-1;n++)e+=this.distance(i[n],i[n+1]);return e}area(i){let e=0;for(let n=0;n<i.length;n++){const s=i[n];for(let r=0,a=s.length,o=a-1;r<a;o=r++)e+=It(s[r][0]-s[o][0])*(s[r][1]+s[o][1])*(n?-1:1)}return Math.abs(e)/2*this.kx*this.ky}along(i,e){let n=0;if(e<=0)return i[0];for(let s=0;s<i.length-1;s++){const r=i[s],a=i[s+1],o=this.distance(r,a);if(n+=o,n>e)return Nn(r,a,(e-(n-o))/o)}return i[i.length-1]}pointToSegmentDistance(i,e,n){let[s,r]=e,a=It(n[0]-s)*this.kx,o=(n[1]-r)*this.ky;if(a!==0||o!==0){const f=(It(i[0]-s)*this.kx*a+(i[1]-r)*this.ky*o)/(a*a+o*o);f>1?(s=n[0],r=n[1]):f>0&&(s+=a/this.kx*f,r+=o/this.ky*f)}return a=It(i[0]-s)*this.kx,o=(i[1]-r)*this.ky,Math.sqrt(a*a+o*o)}pointOnLine(i,e){let n=1/0,s=i[0][0],r=i[0][1],a=0,o=0;for(let f=0;f<i.length-1;f++){let c=i[f][0],v=i[f][1],y=It(i[f+1][0]-c)*this.kx,h=(i[f+1][1]-v)*this.ky,d=0;(y!==0||h!==0)&&(d=(It(e[0]-c)*this.kx*y+(e[1]-v)*this.ky*h)/(y*y+h*h),d>1?(c=i[f+1][0],v=i[f+1][1]):d>0&&(c+=y/this.kx*d,v+=h/this.ky*d)),y=It(e[0]-c)*this.kx,h=(e[1]-v)*this.ky;const l=y*y+h*h;l<n&&(n=l,s=c,r=v,a=f,o=d)}return{point:[s,r],index:a,t:Math.max(0,Math.min(1,o))}}lineSlice(i,e,n){let s=this.pointOnLine(n,i),r=this.pointOnLine(n,e);if(s.index>r.index||s.index===r.index&&s.t>r.t){const c=s;s=r,r=c}const a=[s.point],o=s.index+1,f=r.index;!or(n[o],a[0])&&o<=f&&a.push(n[o]);for(let c=o+1;c<=f;c++)a.push(n[c]);return or(n[f],r.point)||a.push(r.point),a}lineSliceAlong(i,e,n){let s=0;const r=[];for(let a=0;a<n.length-1;a++){const o=n[a],f=n[a+1],c=this.distance(o,f);if(s+=c,s>i&&r.length===0&&r.push(Nn(o,f,(i-(s-c))/c)),s>=e)return r.push(Nn(o,f,(e-(s-c))/c)),r;s>i&&r.push(f)}return r}bufferPoint(i,e){const n=e/this.ky,s=e/this.kx;return[i[0]-s,i[1]-n,i[0]+s,i[1]+n]}bufferBBox(i,e){const n=e/this.ky,s=e/this.kx;return[i[0]-s,i[1]-n,i[2]+s,i[3]+n]}insideBBox(i,e){return It(i[0]-e[0])>=0&&It(i[0]-e[2])<=0&&i[1]>=e[1]&&i[1]<=e[3]}}function or(t,i){return t[0]===i[0]&&t[1]===i[1]}function Nn(t,i,e){const n=It(i[0]-t[0]),s=i[1]-t[1];return[t[0]+n*e,t[1]+s*e]}function It(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}class Yu{getCityByName(i){return this.getNameMapObservable().pipe(Nt(e=>{const n=e.get(i.trim().toLowerCase());return n?Ot({},n):null}))}getCitiesObservable(){if(!this.a){const i=new te(1);this.d(i),this.a=i}return this.a.asObservable().pipe(Xe())}getNameMapObservable(){return this.b||(this.b=this.getCitiesObservable().pipe(Nt(i=>{const e=new Map;for(const n of i)e.set(n.name.toLowerCase(),n),n.ascii&&e.set(n.ascii.toLowerCase(),n);return e}),Ms(1))),this.b}c(i){let e=0,n=1;for(const s of i.split(""))n/=92,e+=(s.charCodeAt(0)-33)*n;return e*360}e(i){return i.split(`
`).filter(n=>n.length>8).map(n=>{const s=n.substr(0,4),r=n.substr(4,4),a=n.substr(8).split("|");return{lat:this.c(s)-90,lon:this.c(r)-180,name:a[0],ascii:a[1]||null}})}d(i){fetch("/cities.txt").then(e=>e.text()).then(e=>{const n=this.e(e);i.next(n)},()=>{i.next([])})}}function _n(t){return t&&t.Dt&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $e={},lr;function Xu(){if(lr)return $e;lr=1;var t=$e&&$e.Pt||function(){return t=Object.assign||function(h){for(var d,l=1,u=arguments.length;l<u;l++){d=arguments[l];for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(h[g]=d[g])}return h},t.apply(this,arguments)};Object.defineProperty($e,"__esModule",{value:!0});var i=Math.atanh||function(h){return Math.log((1+h)/(1-h))/2},e=typeof Number.EPSILON=="undefined"?Math.pow(2,-52):Number.EPSILON,n=Math.hypot||function(h,d){for(var l=0,u=0,g=0;g<arguments.length;g+=1){var p=Math.abs(Number(arguments[g])),m=l/p,_=m*m;p>l?(u*=_,l=p):u+=p<0?_:0}return l===1/0?1/0:l*Math.sqrt(u)},s=function(h,d){return h.indexOf(d)>=0},r=Math.sinh||function(h){var d=Math.exp(h);return(d-1/d)/2},a=.08181918271,o=function(h){return a*i(a*h)},f=function(h){var d=n(1,h),l=r(o(h/d));return n(1,l)*h-l*d},c=function(h){for(var d=1-Math.pow(a,2),l=h/d,u=Math.sqrt(e)/10*Math.max(1,Math.abs(h)),g=0;g<5;++g){var p=f(l),m=(h-p)*(1+d*Math.pow(l,2))/(d*n(1,l)*n(1,p));if(l+=m,!(Math.abs(m)>=u))break}return l},v=function(h,d){var l=[];for(var u in d)l.push(u);for(var g=l.length,p=0;p<g;p++)h[l[p]]=d[l[p]];return h},y=function(h){h||(h={}),this.initialize.apply(this,[h])};return $e.Converter=y,v(y.prototype,{ngFunctionsPresent:!0,UNDEFINED_STR:"undefined",UPS_REGEX:/^\s*([ABYZ])\s+(\d+)mE\s+(\d+)mN\s*$/i,UTM_REGEX:/^(\d+)[A-Z]?\s+(\d+)mE\s+(\d+)mN\s*$/i,FOURTHPI:Math.PI/4,DEG_2_RAD:Math.PI/180,RAD_2_DEG:180/Math.PI,BLOCK_SIZE:1e5,IS_NAD83_DATUM:!0,GRIDSQUARE_SET_COL_SIZE:8,GRIDSQUARE_SET_ROW_SIZE:20,EASTING_OFFSET:5e5,NORTHING_OFFSET:1e7,k0:.9996,a:6378137,es:a,c:1.00336,rhoAdjusterValue:126372751116e-4,falseUPSNorthing:2e6,falseUPSEasting:2e6,EQUATORIAL_RADIUS:void 0,ECC_PRIME_SQUARED:void 0,ECC_SQUARED:void 0,num100kSets:6,originRowLetters:"AFAFAF",UTMGzdLetters:"NPQRSTUVWX",USNGSqEast:"ABCDEFGHJKLMNPQRSTUVWXYZ",USNGSqLetOdd:"ABCDEFGHJKLMNPQRSTUV",USNGSqLetEven:"FGHJKLMNPQRSTUVABCDE",initialize:function(h){h.datum&&h.datum.toUpperCase()==="NAD27"&&(this.IS_NAD83_DATUM=!1),this.IS_NAD83_DATUM?(this.EQUATORIAL_RADIUS=6378137,this.ECC_SQUARED=.006694380023):(this.EQUATORIAL_RADIUS=63782064e-1,this.ECC_SQUARED=.006768658),this.ECC_PRIME_SQUARED=this.ECC_SQUARED/(1-this.ECC_SQUARED),this.E1=(1-Math.sqrt(1-this.ECC_SQUARED))/(1+Math.sqrt(1-this.ECC_SQUARED))},getZoneNumber:function(h,d){if(h=parseFloat(h),d=parseFloat(d),d>360||d<-180||h>84||h<-80)throw new Error("usng.js, getZoneNumber: invalid input. lat: "+h.toFixed(4)+" lon: "+d.toFixed(4));var l=d+180-Math.floor((d+180)/360)*360-180,u=Math.floor((l+180)/6)+1;return h>=56&&h<64&&l>=3&&l<12&&(u=32),h>=72&&h<84&&(l>=0&&l<9?u=31:l>=9&&l<21?u=33:l>=21&&l<33?u=35:l>=33&&l<42&&(u=37)),u},LLtoKM:function(h,d,l,u){var g=6371e3,p=h*this.DEG_2_RAD,m=l*this.DEG_2_RAD,_=(l-h)*this.DEG_2_RAD,w=(u-d)*this.DEG_2_RAD,E=Math.sin(_/2)*Math.sin(_/2)+Math.cos(p)*Math.cos(m)*Math.sin(w/2)*Math.sin(w/2),A=2*Math.atan2(Math.sqrt(E),Math.sqrt(1-E));return g*A},LLBboxtoUSNG:function(h,d,l,u){var g=parseFloat(h),p=parseFloat(d),m=parseFloat(l),_=parseFloat(u),w=(g+p)/2,E=(m+_)/2;E>=180?E=179.9:E<=-180&&(E=-179.9),w>=90?w=89.9:w<=-90&&(w=-89.9);var A=6371e3,S=g*this.DEG_2_RAD,x=p*this.DEG_2_RAD,D=(p-g)*this.DEG_2_RAD,I=(_-m)*this.DEG_2_RAD,P=Math.sin(D/2)*Math.sin(D/2);P=A*2*Math.atan2(Math.sqrt(P),Math.sqrt(1-P));var z=Math.cos(S)*Math.cos(x)*Math.sin(I/2)*Math.sin(I/2);z=A*2*Math.atan2(Math.sqrt(z),Math.sqrt(1-z));var W=Math.max(P,z);E===0&&(m>90||m<-90)&&(_>90||_<-90)&&(E=180);var Z;return W>1e5?Z=this.LLtoUSNG(w,E,0):W>1e4?Z=this.LLtoUSNG(w,E,1):W>1e3?Z=this.LLtoUSNG(w,E,2):W>100?Z=this.LLtoUSNG(w,E,3):W>10?Z=this.LLtoUSNG(w,E,4):W>1?Z=this.LLtoUSNG(w,E,5):W>=0&&(Z=this.LLtoUSNG(w,E,6)),Z},serializeUTMUPS:function(h){var d=typeof h.zoneNumber=="number"&&h.zoneNumber!==0,l=!d&&h.northPole?h.easting<2e6?"Y":"Z":h.northing<2e6?"A":"B",u=h.northPole?"N":"S",g=d?h.zoneNumber+u:l;return g+" "+Math.round(h.easting)+"mE "+Math.round(h.northing)+"mN"},serializeUTM:function(h){return this.serializeUTMUPS(h)},deserializeUTM:function(h){var d,l=function(){throw new Error("Invalid UPS String: "+h)},u,g,p;try{d=this.UTM_REGEX.exec(h),u=d[1],g=d[2],p=d[3]}catch(m){l()}return(u<1||u>60)&&l(),{zoneNumber:Number(u),easting:Number(g),northing:Number(p)}},LLtoUTM:function(h,d,l,u){if(l===void 0&&(l=[]),h=parseFloat(h),d=parseFloat(d),this.isInUPSSpace(h))return this.UNDEFINED_STR;if(d>360||d<-180||h>90||h<-90)throw new Error("usng.js, LLtoUTM, invalid input. lat: "+h.toFixed(4)+" lon: "+d.toFixed(4));var g=d+180-Math.floor((d+180)/360)*360-180,p=h*this.DEG_2_RAD,m=g*this.DEG_2_RAD,_;u?_=u:_=this.getZoneNumber(h,d);var w=(_-1)*6-180+3,E=w*this.DEG_2_RAD;_+""+this.UTMLetterDesignator(h)+"";var A=this.EQUATORIAL_RADIUS/Math.sqrt(1-this.ECC_SQUARED*Math.sin(p)*Math.sin(p)),S=Math.tan(p)*Math.tan(p),x=this.ECC_PRIME_SQUARED*Math.cos(p)*Math.cos(p),D=Math.cos(p)*(m-E),I=this.EQUATORIAL_RADIUS*((1-this.ECC_SQUARED/4-3*(this.ECC_SQUARED*this.ECC_SQUARED)/64-5*(this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED)/256)*p-(3*this.ECC_SQUARED/8+3*this.ECC_SQUARED*this.ECC_SQUARED/32+45*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/1024)*Math.sin(2*p)+(15*this.ECC_SQUARED*this.ECC_SQUARED/256+45*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/1024)*Math.sin(4*p)-35*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/3072*Math.sin(6*p)),P=this.k0*A*(D+(1-S+x)*(D*D*D)/6+(5-18*S+S*S+72*x-58*this.ECC_PRIME_SQUARED)*(D*D*D*D*D)/120)+this.EASTING_OFFSET,z=this.k0*(I+A*Math.tan(p)*(D*D/2+(5-S+9*x+4*x*x)*(D*D*D*D)/24+(61-58*S+S*S+600*x-330*this.ECC_PRIME_SQUARED)*(D*D*D*D*D*D)/720));return l[0]=P,l[1]=z,l[2]=_,{easting:P,northing:z,zoneNumber:_}},LLtoUTMwithNS:function(h,d,l,u){this.LLtoUTM(h,d,l,u),l[1]<0?(l[1]+=this.NORTHING_OFFSET,l[3]="S"):l[3]="N"},UTMtoLLwithNS:function(h,d,l,u,g){var p;return g==="S"?p=this.UTMtoLL(h-this.NORTHING_OFFSET,d,l,u):p=this.UTMtoLL(h,d,l,u),p},deserializeUPS:function(h){try{var d=this.UPS_REGEX.exec(h),l=d[1],u=d[2],g=d[3];return this.UPStoLL({northPole:!0,easting:Number(u),northing:Number(g)}),{northPole:s(["Y","Z"],l.toUpperCase()),easting:Number(u),northing:Number(g)}}catch(p){throw new Error("Invalid UPS String: "+h)}},LLtoUPS:function(h,d){var l=!(typeof h=="number"&&typeof d=="number"&&h>=-90&&h<=90&&d>=-180&&d<=180);if(l)throw new Error("Invalid Lat/Lon coordinates: "+h+", "+d);var u=h>=0,g=Math.tan(Math.abs(h)*this.DEG_2_RAD),p=f.call(this,g),m=n(1,p)+Math.abs(p),_=Math.abs(h)!==90?1/m:0,w=p>=0?_:m,E=w*this.rhoAdjusterValue,A=Math.sin(d*this.DEG_2_RAD)*E,S=Math.cos(d*this.DEG_2_RAD)*(u?-E:E);return{northing:S+this.falseUPSNorthing,easting:A+this.falseUPSEasting,northPole:u}},LLtoUPSString:function(h,d){if(!this.isInUPSSpace(h))throw new Error("usng.js, LLtoUPSString, invalid input. lat: "+h.toFixed(4)+" lon: "+d.toFixed(4));var l=this.LLtoUPS(h,d),u=l.northPole?l.easting<2e6?"Y":"Z":l.northing<2e6?"A":"B";return u+" "+Math.round(l.easting)+"mE "+Math.round(l.northing)+"mN"},UPStoLL:function(h){var d=this,l=function(){var u=function(){throw new Error("Invalid UPS object: "+JSON.stringify(h))},g=function(){var A={northPole:h.northPole,northing:h.northing-d.falseUPSNorthing,easting:h.easting-d.falseUPSEasting},S=n(A.easting,A.northing),x=S!==0?S/d.rhoAdjusterValue:Math.pow(e,2),D=(1/x-x)/2,I=c(D),P=(A.northPole?1:-1)*Math.atan(I)*d.RAD_2_DEG,z=Math.atan2(A.easting,A.northPole?-A.northing:A.northing)*d.RAD_2_DEG;return{lat:P,lon:z}},p=typeof h!="undefined",m=function(A){return p&&typeof h.northPole=="boolean"&&typeof A=="number"&&A>=8e5&&A<=32e5},_=m(h.easting),w=m(h.northing),E=_&&w;return{processConversion:E?g:u}};return l().processConversion()},UTMUPStoLL:function(h){var d=typeof h=="string";try{var l=d&&s(["A","B","Y","Z"],h.charAt(0).toUpperCase()),u=!d&&typeof h.zoneNumber=="number"&&h.zoneNumber===0;if(l||u)return this.UPStoLL(d?this.deserializeUPS(h):h);var g=d?this.deserializeUTM(h):h;return this.UTMtoLL(g.northing,g.easting,g.zoneNumber)}catch(p){throw new Error("Invalid UTM/UPS input: "+h)}},isInUPSSpace:function(h){return h>84||h<-80},LLtoUTMUPSObject:function(h,d){if(d>180||d<-180||h>90||h<-90)throw new Error("usng.js, LLtoUTMUPS, invalid input. lat: "+h.toFixed(4)+" lon: "+d.toFixed(4));if(this.isInUPSSpace(h))return t({},this.LLtoUPS(h,d),{zoneNumber:0});var l=[0,0,0,"N"];return this.LLtoUTMwithNS(h,d,l),{easting:l[0],northing:l[1],zoneNumber:l[2],northPole:h>=0}},LLtoUTMUPS:function(h,d){return this.serializeUTMUPS(this.LLtoUTMUPSObject(h,d))},LLtoUSNG:function(h,d,l){d<-180?d+=360:d>180&&(d-=360),h=parseFloat(h),d=parseFloat(d);var u=[];this.LLtoUTM(h,d,u);var g=u[0],p=u[1];h<0&&(p+=this.NORTHING_OFFSET);var m=this.getZoneNumber(h,d),_=this.findGridLetters(m,p,g),w=Math.round(p)%this.BLOCK_SIZE,E=Math.round(g)%this.BLOCK_SIZE;(typeof l=="undefined"||l<0)&&(l=0);var A=0;l>0&&(A=l-1),A>5&&(A=5),w=Math.floor(w/Math.pow(10,5-A)),E=Math.floor(E/Math.pow(10,5-A));var S=m+this.UTMLetterDesignator(h);if(l>=1&&(S+=" "+_),A>=1){S+=" ";for(var x=String(E).length;x<A;x++)S+="0";S+=E+" "}if(A>=1){for(x=String(w).length;x<A;x++)S+="0";S+=w}return S},UTMLetterDesignator:function(h){if(h=parseFloat(h),h>84||h<-80)return"Z";var d=(h+80)/8;return d>=6&&d++,d>=12&&d++,d>=22&&d--,String.fromCharCode(67+d)},findSet:function(h){switch(h=parseInt(h),h=h%6,h){case 0:return 6;case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return 5;default:return-1}},findGridLetters:function(h,d,l){h=parseInt(h),d=parseFloat(d),l=parseFloat(l);for(var u=1,g=Math.round(d);g>=this.BLOCK_SIZE;)g=g-this.BLOCK_SIZE,u++;u=u%this.GRIDSQUARE_SET_ROW_SIZE;for(var p=0,m=Math.round(l);m>=this.BLOCK_SIZE;)m=m-this.BLOCK_SIZE,p++;return p=p%this.GRIDSQUARE_SET_COL_SIZE,this.lettersHelper(this.findSet(h),u,p)},lettersHelper:function(h,d,l){d==0?d=this.GRIDSQUARE_SET_ROW_SIZE-1:d--,l==0?l=this.GRIDSQUARE_SET_COL_SIZE-1:l--;var u,g;switch(h){case 1:return u="ABCDEFGH",g=this.USNGSqLetOdd,u.charAt(l)+g.charAt(d);case 2:return u="JKLMNPQR",g=this.USNGSqLetEven,u.charAt(l)+g.charAt(d);case 3:return u="STUVWXYZ",g=this.USNGSqLetOdd,u.charAt(l)+g.charAt(d);case 4:return u="ABCDEFGH",g=this.USNGSqLetEven,u.charAt(l)+g.charAt(d);case 5:return u="JKLMNPQR",g=this.USNGSqLetOdd,u.charAt(l)+g.charAt(d);case 6:return u="STUVWXYZ",g=this.USNGSqLetEven,u.charAt(l)+g.charAt(d)}},UTMtoLL:function(h,d,l,u){var g=parseFloat(d)-this.EASTING_OFFSET,p=parseFloat(h),m=parseInt(l),_=(m-1)*6-180+3,w=p/this.k0,E=w/(this.EQUATORIAL_RADIUS*(1-this.ECC_SQUARED/4-3*this.ECC_SQUARED*this.ECC_SQUARED/64-5*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/256)),A=E+(3*this.E1/2-27*this.E1*this.E1*this.E1/32)*Math.sin(2*E)+(21*this.E1*this.E1/16-55*this.E1*this.E1*this.E1*this.E1/32)*Math.sin(4*E)+151*this.E1*this.E1*this.E1/96*Math.sin(6*E);A*this.RAD_2_DEG;var S=this.EQUATORIAL_RADIUS/Math.sqrt(1-this.ECC_SQUARED*Math.sin(A)*Math.sin(A)),x=Math.tan(A)*Math.tan(A),D=this.ECC_PRIME_SQUARED*Math.cos(A)*Math.cos(A),I=this.EQUATORIAL_RADIUS*(1-this.ECC_SQUARED)/Math.pow(1-this.ECC_SQUARED*Math.sin(A)*Math.sin(A),1.5),P=g/(S*this.k0),z=A-S*Math.tan(A)/I*(P*P/2-(5+3*x+10*D-4*D*D-9*this.ECC_PRIME_SQUARED)*P*P*P*P/24+(61+90*x+298*D+45*x*x-252*this.ECC_PRIME_SQUARED-3*D*D)*P*P*P*P*P*P/720);z=z*this.RAD_2_DEG;var W=(P-(1+2*x+D)*P*P*P/6+(5-2*D+28*x-3*D*D+8*this.ECC_PRIME_SQUARED+24*x*x)*P*P*P*P*P/120)/Math.cos(A);if(W=_+W*this.RAD_2_DEG,u)if(u<=1e5){var Z=this.UTMtoLL(h+u,d+u,l);return{north:Z.lat,east:Z.lon,south:z,west:W}}else{var nt=this.UTMLetterDesignator(z),jt=this.zoneLetterLats(nt),Ct=this.zoneNumberLons(l);return jt&&Ct?{north:jt.north,south:jt.south,east:Ct.east,west:Ct.west}:{}}else return{lat:z,lon:W}},zoneNumberLons:function(h){var d=-180+6*h,l=d-6;return{east:d,west:l}},zoneLetterLats:function(h){switch(h){case"C":return{south:-80,north:-72};case"D":return{south:-72,north:-64};case"E":return{south:-64,north:-56};case"F":return{south:-56,north:-48};case"G":return{south:-48,north:-40};case"H":return{south:-40,north:-32};case"J":return{south:-32,north:-24};case"K":return{south:-24,north:-16};case"L":return{south:-16,north:-8};case"M":return{south:-8,north:-.01};case"N":return{south:.01,north:8};case"P":return{south:8,north:16};case"Q":return{south:16,north:24};case"R":return{south:24,north:32};case"S":return{south:32,north:40};case"T":return{south:40,north:48};case"U":return{south:48,north:56};case"V":return{south:56,north:64};case"W":return{south:64,north:72};case"X":return{south:72,north:84}}},USNGtoUTM:function(h,d,l,u,g,p,m){for(var _=["","AJS","BKT","CLU","DMV","ENW","FPX","GQY","HRZ"],w=[1.1,2,2.8,3.7,4.6,5.5,6.4,7.3,8.2,9.1,0,.8,1.7,2.6,3.5,4.4,5.3,6.2,7,7.9],E=0;E<w.length;E++)w[E]=w[E]*1e6;for(var A="ABCDEFGHJKLMNPQRSTUV",S="FGHJKLMNPQRSTUVABCDE",x=-1,E=0;E<_.length;E++)if(_[E].indexOf(l)!=-1){x=E*1e5,g&&(x=x+Number(g)*Math.pow(10,5-g.length));break}var D=0;if(u){for(h%2==0?D=S.indexOf(u)*1e5:h%2==1&&(D=A.indexOf(u)*1e5);D<w["CDEFGHJKLMNPQRSTUVWX".indexOf(d)];)D=D+2e6;p&&(D=D+Number(p)*Math.pow(10,5-p.length))}else D=w["CDEFGHJKLMNPQRSTUVWX".indexOf(d)]+499600;m.N=Math.floor(D),m.E=Math.floor(x),m.zone=h,m.letter=d},get100kSetForZone:function(h){var d=h%this.num100kSets;return d==0&&(d=this.num100kSets),d},getNorthingFromChar:function(h,d){if(h===""||typeof h=="undefined")return 0;if(h>"V")throw"MGRSPoint given invalid Northing "+h;for(var l=this.originRowLetters.charCodeAt(d-1),u=0,g=!1;l!==h.charCodeAt(0);){if(l++,l===73&&l++,l===79&&l++,l>86){if(g)throw"Bad character: "+String.fromCharCode(l);l=65,g=!0}u+=.1}return u},USNGtoLL:function(h,d){var l={};this.parseUSNG_str(h,l);var u={};this.USNGtoUTM(l.zone,l.let,l.sq1,l.sq2,l.east,l.north,u),l.let<"N"&&(u.N-=this.NORTHING_OFFSET);var g;d||(g=1e5/Math.pow(10,l.precision));var p=this.UTMtoLL(u.N,u.E,l.zone,g);return p},parseUSNG_str:function(h,d){var l=0,u,g;if(!h)return 0;g=h.toUpperCase();var p=/%20/g;if(u=g.replace(p,""),p=/ /g,u=u.replace(p,""),u.length<2)return 0;!isNaN(parseFloat(u.charAt(1)))&&isFinite(u.charAt(1))?d.zone=u.charAt(l++)*10+u.charAt(l++)*1:d.zone=u.charAt(l++)*1,d.let=u.charAt(l++),d.sq1=u.charAt(l++),d.sq2=u.charAt(l++),d.precision=(u.length-l)/2,d.east="",d.north="";var m;for(m=0;m<d.precision;m++)d.east+=u.charAt(l++);for(u[l]==" "&&l++,m=0;m<d.precision;m++)d.north+=u.charAt(l++)},isUSNG:function(h){var d,l;d=h.toUpperCase();var u=/%20/g;return d=d.replace(u,""),u=/ /g,d=d.replace(u,""),d.length>15||(l=new RegExp("^([1-9]|[1-5][0-9]|60)[CDEFGHJKLMNPQRSTUVWX]$"),d.match(l))||(l=new RegExp("^([1-9]|[1-5][0-9]|60)[CDEFGHJKLMNPQRSTUVWX][ABCDEFGHJKLMNPQRSTUVWXYZ][ABCDEFGHJKLMNPQRSTUV]([0-9][0-9]){0,5}$"),!d.match(l))||d.length<7?0:d},LLtoMGRS:function(h,d,l){var u,g=this.LLtoUSNG(h,d,l),p=/ /g;return u=g.replace(p,""),u},LLtoMGRSUPS:function(h,d,l){return this.isInUPSSpace(h)?this.LLtoUPSString(h,d):this.LLtoMGRS(h,d,l)},GUsngtoLL:function(h){if(typeof window.GLatLng=="function"){var d=[];return this.USNGtoLL(h,d),new window.GLatLng(d[0],d[1])}else throw new Error("GLatLng not defined.")},LLtoUSNG_nad27:function(h,d,l){var u;return this.EQUATORIAL_RADIUS=63782064e-1,this.ECC_SQUARED=.006768658,u=this.LLtoUSNG(h,d,l),this.EQUATORIAL_RADIUS=6378137,this.ECC_SQUARED=.006694380023,u+" (NAD27)"}}),$e}var Ju=Xu();class de{radiansToDegreesNW(i){return this.standardize360(360-i*180/Math.PI)}radiansToDegreesSW(i){return this.standardize360(180+i*180/Math.PI)}standardize180(i){if(i>=-180&&i<180)return i;if(i>=180&&i<360)return-360+i;const e=this.standardize360(i);return e<180?e:-360+e}standardize360(i){return i>=0&&i<360?i:(i%360+360)%360}standardizeLatitude(i){for(;i<-90;)i=-180-i;for(;i>90;)i=180-i;return i}toHeading(i){return isNaN(i)?"":`${this.standardize360(Math.round(i))}°`}toHeadingDirection(i,e=2){if(isNaN(i))return"";const n=this.standardize360(Math.round(i));return`${this.toHeading(n)} ${this.toCompassPoint(n,e)}`}toCompassPoint(i,e=2){e=Math.max(1,Math.min(3,Math.floor(e))),i=this.standardize360(i);const n=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],s=2*Hs(2,e);return n[Math.round(i*s/360)%s*16/s]}}var Hi={},ai={},cr;function td(){return cr||(cr=1,ai.RADIUS=6378137,ai.FLATTENING=1/298.257223563,ai.POLAR_RADIUS=63567523142e-4),ai}var hr;function ed(){if(hr)return Hi;hr=1;var t=td();function i(l){return l*(180/Math.PI)}function e(l){return l*(Math.PI/180)}var n=t.RADIUS;t.FLATTENING;var s=t.POLAR_RADIUS,r=n*n,a=s*s,o=Math.sqrt((r-a)/r),f=Math.sqrt((r-a)/a);function c(l,u,g){return y(e(l),e(u),g)}function v(l,u,g){var p=h(l,u,g);return p[0]=i(p[0]),p[1]=i(p[1]),p}function y(l,u,g){var p=d(l),m=a/r,_=(p+g)*Math.cos(l)*Math.cos(u),w=(p+g)*Math.cos(l)*Math.sin(u),E=(m*p+g)*Math.sin(l);return[_,w,E]}function h(l,u,g){var p=Math.sqrt(l*l+u*u),m=Math.atan(g*n/(p*s)),_=Math.sin(m),w=Math.cos(m),E=g+f*f*s*_*_*_,A=p-o*o*n*w*w*w,S=Math.atan(E/A),x=Math.atan(u/l),D=d(S),I=p/Math.cos(S)-D;return l<0&&u<0&&(x=x-Math.PI),l<0&&u>0&&(x=x+Math.PI),[S,x,I]}function d(l){var u=Math.sin(l),g=Math.sqrt(1-o*o*u*u),p=n/g;return p}return Hi.project=c,Hi.unproject=v,Hi}var id=ed();const ur=_n(id),Mt=new Ju.Converter;Mt.ECC_SQUARED=.00669437999014;Mt.ECC_PRIME_SQUARED=Mt.ECC_SQUARED/(1-Mt.ECC_SQUARED);Mt.E1=(1-Math.sqrt(1-Mt.ECC_SQUARED))/(1+Math.sqrt(1-Mt.ECC_SQUARED));const ln=Lt.DMS,Us=[Lt.DMS,Lt.DDM,Lt.DDD,Lt.UTMUPS,Lt.MGRS];class Tt{constructor(){this.a=new Map,this.f=b(Yu),this.c=new gn(ln),this.d=b(de),this.e=b(Ft);const i=this.e.coordinateSystem.getItem();i&&this.c.next(i)}bearing(i,e,n=!1){const s=this.g(n?e.lat:i.lat);return this.d.standardize360(s.bearing([i.lon,i.lat],[e.lon,e.lat]))}clearCache(){this.a.clear()}distance(i,e){return this.g(i.lat).distance([i.lon,i.lat],[e.lon,e.lat])}fromString(i){return i=i.trim(),Du([this.h(i),this.i(i),this.j(i),this.k(i)]).pipe(Nt(([e,n,s,r])=>e||n||s||r))}getCurrentSetting(){return this.c.asObservable()}getNearestCityByCoords(i,e){return this.f.getCitiesObservable().pipe(Nt(n=>{let s=null,r=1/0;for(const o of n){const f=this.distance({lat:i,lon:e},o);f<r&&(s=o,r=f)}if(!s)return{name:"",ascii:null,lat:NaN,lon:NaN,distance:r,bearing:NaN};const a=this.bearing({lat:i,lon:e},s);return fe(Ot({},s),{distance:r,bearing:a})}))}latLonToSystem(i,e){const n=this.c.value;return n===Lt.DMS?this.l(i,e):n===Lt.DDM?this.m(i,e):n===Lt.DDD?this.n(i,e):n===Lt.UTMUPS?this.o(i,e):this.p(i,e)}latLonToSystemString(i,e){const n=this.latLonToSystem(i,e);return"lat"in n?`${n.lat} ${n.lon}`:"mgrs"in n?n.mgrs:n.utmups}latLonToXYZ(i){const[e,n,s]=ur.project(i.lat,i.lon,0);return{x:e,y:n,z:s}}reset(){this.e.coordinateSystem.reset(),this.c.next(ln)}setCoordinateSystem(i){Us.includes(i)&&(this.c.next(i),this.e.coordinateSystem.setItem(i))}standardizeCoordinates(i){return{lat:this.d.standardizeLatitude(i.lat),lon:this.d.standardize180(i.lon)}}xyzToLatLon(i){const[e,n]=ur.unproject(i.x,i.y,i.z);return{lat:e,lon:n}}q(i){const e=i.split(/[ENSW]/).map(f=>f.trim()).filter(f=>f!=="");if(e.length>1)return[e[0],e[1]];const n=e.pop();if(!n)return null;const s=n.split(/ /);if(s.length%2)return null;const r=s.length/2,a=s.slice(0,r),o=s.slice(r);return[a.join(" "),o.join(" ")]}g(i){const e=i.toFixed(2),n=this.a.get(e);if(n)return n;if(this.a.size>=500)for(const r of[...this.a.keys()].slice(0,100))this.a.delete(r);const s=new ks(parseFloat(e),"meters");return this.a.set(e,s),s}k(i){return this.f.getCityByName(i)}h(i){const e=i.toUpperCase().replace(/[^-0-9.ENSW]+/g," ").trim();let n=e.indexOf("W")>=0,s=e.indexOf("S")>=0;const r=this.q(e);if(!r)return $(null);const a=r.map(o=>this.r(o));return a[0]===null||a[1]===null||(s&&(a[0]=-Math.abs(a[0])),n&&(a[1]=-Math.abs(a[1])),a[0]<-90||a[0]>90||a[1]<-180||a[1]>180)?$(null):$({lat:a[0],lon:a[1]})}i(i){if(i=i.toUpperCase().trim(),Mt.isUSNG(i)){const e=Mt.USNGtoLL(i);return $({lat:e.south,lon:e.west})}return $(null)}j(i){i=i.toUpperCase().trim();const e=a=>{let o=null;try{o=a()}catch(f){}return o?{lat:o.lat,lon:o.lon}:null};let n=null;const s=i.replace(/[^0-9.]+/g," ").trim().split(" "),r=i.replace(/[^A-Z]+/g,"").charAt(0);if(s.length>=2&&s.length<=3&&r.length){const a=parseFloat(s[s.length-2]);let o=parseFloat(s[s.length-1]);const f=r>"M";r==="A"||r==="B"||r==="Y"||r==="Z"?n=e(()=>Mt.UPStoLL({easting:a,northing:o,northPole:f})):s.length===3&&(f||(o=o-1e7),n=e(()=>Mt.UTMtoLL(o,a,parseInt(s[0],10))))}return $(n)}b(i){return i.length===1||i.charAt(1)==="."?`0${i}`:i}r(i){const e=i.split(/ /).map(a=>parseFloat(a));let n=!1;for(let a=0;a<e.length;a+=1){if(isNaN(e[a]))return null;e[a]<0&&(n=!0,e[a]=-e[a])}let s=1/60,r=e.shift();for(;e.length;)r+=e.shift()*s,s/=60;return n&&(r=-r),r}n(i,e){const n=i>=0?"N":"S",s=e>=0?"E":"W",r=Math.abs(i).toFixed(6),a=Math.abs(e).toFixed(6);return{lat:`${n} ${r}°`,lon:`${s} ${a}°`,latLon:`${n} ${r} ${s} ${a}`}}m(i,e){const n=i>=0?"N":"S",s=e>=0?"E":"W";i=Math.abs(i);const r=Math.floor(i),a=(i-r)*60,o=this.b(a.toFixed(3));e=Math.abs(e);const f=Math.floor(e),c=(e-f)*60,v=this.b(c.toFixed(3));return{lat:`${n} ${r}° ${o}'`,lon:`${s} ${f}° ${v}'`,latLon:`${n} ${r} ${o} ${s} ${f} ${v}`}}l(i,e){const n=i>=0?"N":"S",s=e>=0?"E":"W";i=Math.abs(i);const r=Math.floor(i);i=(i-r)*60;const a=Math.floor(i),o=this.b(a.toFixed(0)),f=(i-a)*60,c=this.b(f.toFixed(1));e=Math.abs(e);const v=Math.floor(e);e=(e-v)*60;const y=Math.floor(e),h=this.b(y.toFixed(0)),d=(e-y)*60,l=this.b(d.toFixed(1));return{lat:`${n} ${r}° ${o}' ${c}"`,lon:`${s} ${v}° ${h}' ${l}"`,latLon:`${n} ${r} ${o} ${c} ${s} ${v} ${h} ${l}`}}p(i,e){const n=Mt.LLtoUSNG(i,e,6),[s,r,a,o]=n.split(" ");return{zone:s,square:r,easting:a,northing:o,mgrs:n}}o(i,e){const n=Mt.LLtoUTMUPS(i,e),[s,r,a]=n.split(" ");return{zone:s,easting:r,northing:a,utmups:n}}}var $n={},dr;function nd(){return dr||(dr=1,function(t){t.Dt=!0;var i=function(){function n(s){var r=s.initialEstimate,a=s.initialErrorInEstimate;this.previousEstimate=r,this.previousErrorInEstimate=a}return n.prototype.update=function(s){var r=s.measurement,a=s.errorInMeasurement,o=this.previousErrorInEstimate/(this.previousErrorInEstimate+a),f=this.previousEstimate+o*(r-this.previousEstimate),c=(1-o)*this.previousErrorInEstimate;return this.previousEstimate=f,this.previousErrorInEstimate=c,[f,c]},n}();t.default=i;var e=function(){function n(s){var r=s.initialEstimate,a=s.initialErrorInEstimate;this.filters=r.map(function(o){return new i({initialEstimate:o,initialErrorInEstimate:a})})}return n.prototype.update=function(s){var r=s.measurement,a=s.errorInMeasurement,o,f=this.filters.map(function(c,v){var y=c.update({measurement:r[v],errorInMeasurement:a}),h=y[0],d=y[1];return o=d,h});return[f,o]},n}();t.KalmanFilterArray=e}($n)),$n}var Ql=nd();const sd=_n(Ql),ql=Math.exp(-1/5),rd=1-ql,fr=.35;class Y{constructor(){this.b=b(Tt),this.a=null,this.c=b(Ee)}availabilityState(){return"geolocation"in navigator?this.c.geolocation().pipe(Bt(i=>this.c.toAvailability(i))):$(T.UNAVAILABLE)}getPosition(){if(this.a)return this.a;const i=new ut,e=[],n=a=>{const o={success:!0,timestamp:a.timestamp,lat:a.coords.latitude,lon:a.coords.longitude,accuracy:a.coords.accuracy,altitude:a.coords.altitude,altitudeAccuracy:a.coords.altitudeAccuracy,speed:a.coords.speed,heading:a.coords.heading,firstPosition:null,isMoving:!1,timeMoving:0,timeStopped:0,timeTotal:0,speedAvg:0,speedMax:0,speedSmoothed:0,speedSmoothedMax:0,isMovingSmoothed:!1,headingSmoothed:NaN,altitudeSum:0,altitudeCount:0,altitudeMinimum:NaN,altitudeMaximum:NaN,distanceTraveled:0};e.push(o),this.d(e),i.next(o),e.length>4&&e.shift()},s=a=>{e.splice(0,e.length),i.next({success:!1,timestamp:Date.now(),error:a})};this.a=i.asObservable().pipe(Pi(()=>{navigator.geolocation.clearWatch(r),this.a=null}),Ii({connector:()=>new te(1),resetOnRefCountZero:()=>Tu(5e3)})),navigator.geolocation.getCurrentPosition(n,s);const r=navigator.geolocation.watchPosition(n,s,{enableHighAccuracy:!0});return this.a}getPositionSuccess(){return this.getPosition().pipe(Rs(i=>i&&i.success))}d(i){const e=f=>!f&&f!==0,n=i[i.length-1],s=i[i.length-2]||n;let r=0,a=NaN,o=0;if(i.length>1){const f=this.e(i);r=f.speed,a=f.heading,o=f.distance}n.speedSmoothed=this.f(s.speedSmoothed,r),n.speedMax=Math.max(n.speed,s.speedMax),n.speedSmoothedMax=Math.max(n.speedSmoothed,s.speedSmoothedMax),n.isMovingSmoothed=n.speedSmoothed>=fr,n.headingSmoothed=a,e(n.speed)&&(n.speed=r),e(n.heading)&&(n.heading=a),n.isMoving=n.speed>=fr,n.timeTotal=n.timestamp-s.timestamp,n.firstPosition=s.firstPosition||s,n.timeMoving=s.timeMoving,n.timeStopped=s.timeStopped,n.distanceTraveled=s.distanceTraveled+o,n.speedAvg=n.distanceTraveled/n.timeTotal,typeof n.altitude=="number"?(n.altitudeSum=s.altitudeSum+(n.altitude||0),n.altitudeCount=s.altitudeCount+1,n.altitudeMinimum=isNaN(s.altitudeMinimum)?n.altitude:Math.min(s.altitudeMinimum,n.altitude),n.altitudeMaximum=isNaN(s.altitudeMaximum)?n.altitude:Math.max(s.altitudeMaximum,n.altitude)):(n.altitudeSum=s.altitudeSum,n.altitudeCount=s.altitudeCount,n.altitudeMinimum=s.altitudeMinimum,n.altitudeMaximum=s.altitudeMaximum),n.isMoving?n.timeMoving+=n.timestamp-s.timestamp:n.timeStopped+=n.timestamp-s.timestamp}e(i){const e=i[0],n=i[i.length-2],s=i[i.length-1],r=new Ql.KalmanFilterArray({initialEstimate:[e.lon,e.lat],initialErrorInEstimate:e.accuracy});let a=[[0,0],0];for(let y=1;y<i.length;y+=1)a=r.update({measurement:[i[y].lon,i[y].lat],errorInMeasurement:i[y].accuracy});const o=this.b.distance(s,n),f=s.timestamp-n.timestamp,c=f?o/f:0;(s.timestamp+e.timestamp)/2-e.timestamp;let v=NaN;return c>0&&(v=this.b.bearing({lat:a[0][1],lon:a[0][0]},s)),{distance:o,heading:v,speed:c}}f(i,e){return i*ql+e*rd}}const tn={"app.title":"Be Prepared","app.currentPermissionStatus":"Current permission status","barcodeReader.explainAsk":"To use the barcode reader, the camera permission is required.","barcodeReader.NATIVE":"Native","barcodeReader.Z_BAR":"ZBar","compass.compassUnavailable.heading":"No Compass","compass.compassUnavailable.message":"This device does not have a compass or the compass direction is not able to be retrieved. The compass will be removed from the starting menu.","fileTransfer.send":"Send","fileTransfer.send.fps":"FPS:","fileTransfer.send.fps.loading":"Loading","fileTransfer.send.selectFile":"Select File","fileTransfer.send.size":"Size:","fileTransfer.receive":"Receive","fileTransfer.receive.download":"Download:","fileTransfer.receive.explainAsk":"To use the barcode reader to receive a file, the camera permission is required.","fileTransfer.receive.fps":"FPS","flashlight.explainAsk":"In order to turn on the flashlight, the camera permission needs to be granted.","flashlight.explainDeny":"The camera permission is required to access the camera's light. The permission was denied or your device does not have a light.","flashlight.unavailable":"Not Available","flashlight.unavailableMessage":"This device does not have a camera with a flashlight that is accessible to the application. Because this feature is not available, the button will be removed from the menu.","info.availability.allowed":"✔ Allowed","info.availability.denied":"✖ Denied","info.availability.error":"Error","info.availability.prompt":"Prompt","info.availability.unavailable":"Unavailable","info.barcodes":"Barcode support:","info.barcodesNotSupported":"Barcodes are not supported on this device.","info.buildInformationHeader":"Build Information","info.camera":"Camera:","info.compass":"Compass:","info.compass.ABSOLUTE_ORIENTATION_SENSOR":"A","info.compass.DEVICE_ORIENTATION":"DO","info.compass.DEVICE_ORIENTATION_ABSOLUTE":"DOA","info.contact.email":"Email Developer","info.contact.feedback":"To provide feedback, suggestions, and bug reports, you can go to the project site or email the developer directly.","info.contact.issues":"Report Bugs, Request Features","info.contact.specificBrowsers":"Important: This app works best in Chrome on Android and Safari on iOS. There are permissions and installation issues with other browsers.","info.coordinates":"Coordinates:","info.coordinates.DDD":"Decimal Degrees","info.coordinates.DDM":"Degrees Decimal Minutes","info.coordinates.DMS":"Degrees Minutes Seconds","info.coordinates.MGRS":"MGRS","info.coordinates.UTM/UPS":"UTM/UPS","info.distances":"Distances:","info.distances.IMPERIAL":"Imperial","info.distances.METRIC":"Metric","info.framework":"the framework driving this app","info.geolocation":"Geolocation:","info.latestChangesHeader":"Latest Changes:","info.nfc":"NFC","info.permission.denied":"✖ Denied","info.permission.error":"Error","info.permission.granted":"✔ Granted","info.permission.prompt":"Prompt","info.permissionsAndFeaturesHeader":"Permissions and Features:","info.preferences":"Preferences:","info.preferences.reset":"Reset Preferences","info.preferences.resetComplete":"Preferences Reset","info.shareApp":"Share This App:","info.share.copied":"Website Copied!","info.share.copy":"Copy URL","info.sourceCode":"source code, bug reports, and feature requests","info.svgCompression":"SVG compression","info.timeSystem":"Time System:","info.timeSystem.12_HOUR":"12 Hour","info.timeSystem.24_HOUR":"24 Hour","info.time12Hour.AM":"AM","info.time12Hour.PM":"PM","info.torch":"Torch:","info.toolingHeader":"Tooling:","info.wakeLock":"Wake Lock:","install.action":"Install","install.message":"Install to Home Screen","location.add.gettingCurrentLocation":"Getting current location...","location.add.waypointName":"Unnamed Waypoint {{id}}","location.average.currentEstimate":"Current estimate:","location.average.calculating":"Calculating...","location.average.heading":"Averaging:","location.average.help":"It is best to collect points for over an hour to improve accuracy. Points will collect at 1 point per second, so 3,600 per hour. The screen must stay on for the app to be able to access the GPS, so it is recommended to use dark mode, dim your screen, and use an external battery if needed.","location.average.help2":"The distance to 95% of the collected points is shown. The value is essentially meaningless with fewer than a few hundred points. After collecting a thousand points, the value here shows how well clustered the points are.","location.average.lat":"Latitude:","location.average.lon":"Longitude:","location.average.ninetyFive":"95% Distance:","location.average.pointsCollected":"Points collected:","location.average.xDelta":"X Delta:","location.average.yDelta":"Y Delta:","location.coordinates.DDD":"Decimal Degrees","location.coordinates.DDM":"Degrees Decimal Minutes","location.coordinates.DMS":"Degrees Minutes Seconds","location.coordinates.empty":"No coordinates available.","location.coordinates.MGRS":"MGRS","location.coordinates.UTMUPS":"UTM/UPS","location.edit.average":"Average","location.edit.badLocation":"Invalid location","location.edit.delete":"Delete","location.edit.helpSave":"Changes are saved automatically.","location.edit.location":"Location:","location.edit.name":"Waypoint Name:","location.explainAsk":"To use the GPS, the geolocation permission is required.","location.field.ACCURACY":"Accuracy","location.field.ALTITUDE_ACCURACY":"Altitude Accuracy","location.field.ALTITUDE_AVERAGE":"Altitude Average","location.field.ALTITUDE_MINIMUM":"Altitude Minimum","location.field.ALTITUDE_MAXIMUM":"Altitude Maximum","location.field.ALTITUDE":"Altitude","location.field.BEARING":"Bearing","location.field.DESTINATION":"Name","location.field.DISTANCE":"Distance","location.field.DISTANCE_TRAVELED":"Distance Traveled","location.field.HEADING":"Heading","location.field.HEADING_SMOOTHED":"Heading (Smoothed)","location.field.SPEED":"Speed","location.field.SPEED_AVERAGE":"Speed (Average)","location.field.SPEED_MAXIMUM":"Speed (Max)","location.field.SPEED_SMOOTHED":"Speed (Smoothed)","location.field.SPEED_SMOOTHED_MAXIMUM":"Speed (Smoothed, Max)","location.field.TIME":"Current Time","location.field.TIME_ARRIVAL":"Arrival Time","location.field.TIME_ELAPSED":"Time Elapsed","location.field.TIME_MOVING":"Time Moving","location.field.TIME_REMAINING":"Time Remaining","location.field.TIME_STOPPED":"Time Stopped","location.field.UNKNOWN":"Unknown","location.field.unknownValue":"Unknown","location.help.html":C`<p>Locations may be entered using a variety of common formats. Capitalization does not matter, most symbols can be ignored, and often spaces can be skipped as well. The examples listed here are not comprehensive, but should be able to illustrate many possibilities.</p><p>City names:</p><ul><li>Paris</li><li>NEW YORK CITY</li><li>los angeles</li></ul><p>Decimal degrees:</p><ul><li>N 40° 26' 118.432" W 79° 58' 18.110"</li><li>40 26 118.432 N 79 58 18.110 W</li><li>40 26 118.432 -79 58 18.110</li></ul><p>Degrees decimal minutes:</p><ul><li>N 40° 26.123' W 79° 58.301'</li><li>40 26.123 N 79 58.301 W</li><li>40 26.123 -79 58.301</li></ul><p>Degrees minutes seconds:</p><ul><li>N 40° 26' 07.443" W 79° 58' 18.671"</li><li>40 26 7.443 N 79 58 18.671 W</li><li>40 26 7.443 -79 58 18.671</li></ul><p>MGRS:</p><ul><li>21K TQ 16525 52329</li><li>18SUJ2337106519</li><li>25X EN 21872 89264</li></ul><p>UTM/UPS:</p><ul><li>17 T 582561mE 4478883mN</li><li>17T 582561 4478883</li><li>17T E 582561 N 4478883</li><li>17T582561 4478883</li><li>B 2226827 2818270</li><li>25x 521873 9289265</li></ul>`,"location.navigation.COMPASS":"Compass","location.navigation.DIRECTION_OF_TRAVEL":"Direction of Travel","location.navigation.NORTH_UP":"North Up","location.navigation.unknownValue":"Unknown","location.positionDenied":"Permission denied. This may have been denied by the operating system even though it was granted by the user.","location.positionError":"There was an error retrieving the location.","location.positionUnavailable":"Position unavailable.","location.retrievingLocation":"Retrieving location...","location.unavailable":"Not Available","location.unavailableMessage":"There is no GPS available on this device. The location tool will be removed from the starting menu.","location.waypoints.location":"Location","location.waypoints.name":"Name","location.waypoints.noWaypoints":"No waypoints have been saved.","location.waypoints.unknownLocation":"Unknown","magnifier.explainAsk":"The magnifier requires the camera permission to function.","nfc.explainAsk":"To use NFC, your permission is required.","nfc.readNumber":"Read number:","nfc.record.encoding":"Encoding:","nfc.record.id":"ID:","nfc.record.lang":"Language:","nfc.record.mediaType":"Media type:","nfc.record.recordType":"Record type:","nfc.scanResult.initializeError":"Error initializing NFC","nfc.scanResult.numberOfRecords":"Number of records:","nfc.scanResult.readError":"Error reading NFC tag","nfc.scanResult.scanning":"Scanning for NFC tags...","nfc.scanResult.serialNumber":"Serial number:","nfc.scanResult.timestamp":"Timestamp:","nfc.unavailable.heading":"NFC Not Supported","nfc.unavailable.message":"There is no NFC support on this device. The NFC tool will be removed from the starting menu.","shared.cameraUnavailable.heading":"No Suitable Camera","shared.cameraUnavailable.message":"There is no camera available that this app can use for the selected tool. This tool will be removed from the starting menu.","shared.permissionDenied.heading":"Denied or Unavailable","shared.permissionDenied.message":"Because the necessary permission was denied or the hardware is unavailable, the button in the menu will be removed.","shared.permissionError.heading":"Error","shared.permissionError.message":"There was an error obtaining the necessary permission or information. Perhaps the device is already in use. This may be temporary.","shared.permissionPrompt.goBack":"Not Right Now","shared.permissionPrompt.grantPermission":"Grant Permission","shared.permissionPrompt.heading":"Permission Required","shared.prettyInput.close":"Close Help","service.torch.deviceIssue":"Flashlight issue - reload required","service.wakeLock.released":"Letting Screen Turn Off","service.wakeLock.obtained":"Keeping Screen On","sunMoon.enterCoordinates":"Enter location:","sunMoon.enterDate":"Enter date and time:","sunMoon.geolocation":"Getting current location...","sunMoon.geolocationError":"Error getting current position","sunMoon.locationUnknown":"Location needed","sunMoon.nearestMajorCity.label":"Nearest major city:","sunMoon.moonIllumination.firstQuarter":"First quarter","sunMoon.moonIllumination.fullMoon":"Full moon","sunMoon.moonIllumination.label":"Moon phase:","sunMoon.moonIllumination.lastQuarter":"Last quarter","sunMoon.moonIllumination.newMoon":"New moon","sunMoon.moonIllumination.waningCrescent":"Waning crescent","sunMoon.moonIllumination.waningGibbous":"Waning gibbous","sunMoon.moonIllumination.waxingCrescent":"Waxing crescent","sunMoon.moonIllumination.waxingGibbous":"Waxing gibbous","sunMoon.moonPosition.label":"Moon position:","sunMoon.moonTimes.alwaysDown":"Moon does not rise today","sunMoon.moonTimes.alwaysUp":"Moon does not set today","sunMoon.moonTimes.neverRise":"Moon does not rise today","sunMoon.moonTimes.neverSet":"Moon does not set today","sunMoon.moonTimes.rise":"Moon rise:","sunMoon.moonTimes.set":"Moon set:","sunMoon.sunPosition.label":"Sun position:","sunMoon.sunTimes.dawn":"Dawn:","sunMoon.sunTimes.dusk":"Dusk:","sunMoon.sunTimes.goldenHourEnd":"Golden hour end:","sunMoon.sunTimes.goldenHour":"Golden hour start:","sunMoon.sunTimes.nadir":"Nadir (sun is lowest):","sunMoon.sunTimes.nauticalDawn":"Nautical dawn:","sunMoon.sunTimes.nauticalDusk":"Nautical dusk:","sunMoon.sunTimes.nightEnd":"Night end:","sunMoon.sunTimes.night":"Night:","sunMoon.sunTimes.solarNoon":"Solar noon:","sunMoon.sunTimes.sunriseEnd":"Sunrise end:","sunMoon.sunTimes.sunrise":"Sunrise:","sunMoon.sunTimes.sunsetStart":"Sunset start:","sunMoon.sunTimes.sunset":"Sunset:","tile.barcodeReader":"Read Barcodes","tile.compass":"Compass","tile.fileTransfer":"File Transfer","tile.flashlight":"Flashlight","tile.frontLight":"Front Light","tile.info":"Info","tile.level":"Level","tile.location":"Location","tile.magnifier":"Magnifier","tile.metalDetector":"Metal Detector","tile.mirror":"Mirror","tile.nfc":"NFC","tile.ruler":"Ruler","tile.speed":"Speed","tile.stopwatch":"Stopwatch","tile.sunMoon":"Sun & Moon","tile.temperature":"Temperature","tile.timer":"Timer","update.message":"Update Available!","update.reload":"Reload Now","update.skip":"Next Launch"},ad={"":tn,en:tn,"en-US":tn};class X{constructor(){this.a=tn}get(i){return this.a[i]||i}set(i){for(const e of[i,i.split("-")[0],""]){const n=ad[e];if(n){this.a=n;const s=document.getElementsByTagName("html")[0];s&&s.setAttribute("lang",i);const r=document.getElementsByTagName("title")[0];r&&(r.textContent=this.get("app.title"));return}}}update(i){for(const e of Object.keys(i))i[e]=this.get(e)}}class Je{constructor(){this.c=b(X),this.a=null}pop(i){this.b().insertAdjacentHTML("beforeend",C`<div class="toast">${i}</div>`);const e=this.b().lastElementChild;e.addEventListener("animationend",()=>{e.remove(),this.a&&!this.a.children.length&&(this.a.remove(),this.a=null)})}popI18n(i){this.pop(this.c.get(i))}b(){return this.a?this.a:(document.body.insertAdjacentHTML("beforeend",C`<div class="toast-container"></div><style>.toast-container{position:fixed;top:1rem;right:1.5rem;display:grid;justify-items:end;gap:1.5rem}.toast{font-size:1.5rem;font-weight:700;line-height:1;padding:.5em 1em;background-color:var(--toast-bg-color);border:var(--toast-border);animation:toastIt 3s cubic-bezier(.785,.135,.15,.86) forwards}@keyframes toastIt{0%,100%{transform:translateY(-150%);opacity:0}10%,90%{transform:translateY(0);opacity:1}}</style>`),this.a=document.querySelector(".toast-container"),this.a)}}class ti{constructor(){this.b=null,this.c=b(Ee),this.d=b(Ft),this.f=b(Je)}availabilityState(i){return window.navigator.mediaDevices?this.c.camera().pipe(Bt(e=>{if(e===Zt.ERROR||e===Zt.PROMPT||e===Zt.DENIED)return this.c.toAvailability(e);if(!i){const n=this.d.torch.getItem();if(n===!0)return $(T.ALLOWED);if(n===!1)return $(T.UNAVAILABLE)}return ue(this.a().then(n=>n.length?(this.d.torch.setItem(!0),T.ALLOWED):(this.d.torch.setItem(!1),T.UNAVAILABLE)))})):$(T.UNAVAILABLE)}currentStatus(){return this.a().then(i=>{let e=!1;for(const n of i)n.getSettings().torch&&(e=!0);return e})}prompt(){this.c.camera(!0).subscribe()}turnOff(){return this.b&&(this.b=null),this.a().then(i=>{const e=[];for(const n of i)n.getSettings().torch&&e.push(n);return e.length?Promise.all(e.map(n=>this.e(n,!1))):Promise.reject()}).then(()=>this.currentStatus()).then(i=>{i&&(this.f.popI18n("service.torch.deviceIssue"),window.location.reload())})}turnOn(){return this.a().then(i=>i.length?(this.b=i[0],this.e(i[0],!0)):Promise.reject())}a(){return window.navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(i=>i.getVideoTracks().filter(e=>{const n=e.getCapabilities();if(n.torch)return!0;const s=n.fillLightMode;return!!(s&&s.length>0&&s!=="none")}))}e(i,e){return i.applyConstraints({advanced:[{fillLightMode:e?"flash":"off",torch:e}]})}}const pr=b(bn),od=b(wn),ld=b(Y),cd=b(Wl),hd=b(Ls),ud=b(ti),xe=Nt(t=>t===T.ALLOWED||t===T.PROMPT),dd=[{id:"flashlight",icon:"/flashlight.svg",label:"tile.flashlight",component:"flashlight-app",show:ud.availabilityState(!1).pipe(xe)},{id:"frontLight",icon:"/front-light.svg",label:"tile.frontLight",component:"front-light-app",show:$(!0)},{id:"magnifier",icon:"/magnifier.svg",label:"tile.magnifier",component:"magnifier-app",show:cd.availabilityState(!1).pipe(xe)},{id:"mirror",icon:"/mirror.svg",label:"tile.mirror",component:"mirror-app",show:$(!1)},{id:"compass",icon:"/compass.svg",label:"tile.compass",component:"compass-app",show:od.availabilityState().pipe(xe)},{id:"location",icon:"/location.svg",label:"tile.location",component:"location-app",show:ld.availabilityState().pipe(xe)},{id:"barcode-reader",icon:"/barcode-reader.svg",label:"tile.barcodeReader",component:"barcode-reader-app",show:pr.availabilityState(!1).pipe(xe)},{id:"nfc",icon:"/nfc.svg",label:"tile.nfc",component:"nfc-app",show:hd.availabilityState(!1).pipe(xe)},{id:"timer",icon:"/timer.svg",label:"tile.timer",component:"timer-app",show:$(!1)},{id:"metal-detector",icon:"/metal-detector.svg",label:"tile.metalDetector",component:"metal-detector-app",show:$(!1)},{id:"speed",icon:"/speed.svg",label:"tile.speed",component:"speed-app",show:$(!1)},{id:"level",icon:"/level.svg",label:"tile.level",component:"level-app",show:$(!1)},{id:"stopwatch",icon:"/stopwatch.svg",label:"tile.stopwatch",component:"stopwatch-app",show:$(!1)},{id:"temperature",icon:"/temperature.svg",label:"tile.temperature",component:"temperature-app",show:$(!1)},{id:"ruler",icon:"/ruler.svg",label:"tile.ruler",component:"ruler-app",show:$(!1)},{id:"sun-moon",icon:"/sun-moon.svg",label:"tile.sunMoon",component:"sun-moon-app",show:$(!0)},{id:"file-transfer",icon:"/file-transfer.svg",label:"tile.fileTransfer",component:"file-transfer-app",show:pr.availabilityState(!1).pipe(xe)},{id:"info",icon:"/info.svg",label:"tile.info",component:"info-app",show:$(!0)}];class Kl{constructor(){this.a=new te(1),this.b()}getAllowedTiles(){return this.a.asObservable()}c(i){return i.show.pipe(Nt(e=>fe(Ot({},i),{show:e})))}b(){return Ve(dd.map(i=>this.c(i))).subscribe(i=>{this.a.next(i.filter(e=>e.show))})}}var fd=Object.getOwnPropertyDescriptor,pd=(t,i,e,n)=>{for(var s=n>1?void 0:n?fd(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let vr=class{constructor(){this.b=b(Kl),this.a=this.b.getAllowedTiles().subscribe(t=>this.tiles=t)}onDestroy(){this.a&&this.a.unsubscribe()}};vr=pd([O("app-index",{style:R`:host{display:flex;justify-content:space-evenly;flex-wrap:wrap}`,template:C`<div *for="tile of tiles"><app-index-tile id="{{tile.id}}" icon="{{tile.icon}}" label="{{tile.label}}"></app-index-tile></div>`})],vr);var vd=Object.getOwnPropertyDescriptor,gd=(t,i,e,n)=>{for(var s=n>1?void 0:n?vd(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let gr=class{onInit(){history.replaceState({},document.title,"/")}setActiveTool(){history.pushState({},document.title,`/${this.id}`)}};gr=gd([O("app-index-tile",{attr:["icon","id","label"],style:R`:host{display:flex;width:100%;padding:1vw}.wrapperOuter{align-items:center;aspect-ratio:1/1;display:flex;justify-content:center;box-sizing:border-box}.wrapperInner{display:flex;flex-direction:column;align-items:center}.label{padding-top:.5em}@media (max-width:960px){:host{font-size:.8em}}@media (max-width:480px){:host{font-size:.8em}}`,template:C`<pretty-button @click.stop.prevent="setActiveTool()"><div class="wrapperOuter"><div class="wrapperInner"><scaling-icon href="{{icon}}"></scaling-icon><div class="label"><i18n-label id="{{label}}"></i18n-label></div></div></div></pretty-button>`})],gr);var md=Object.getOwnPropertyDescriptor,bd=(t,i,e,n)=>{for(var s=n>1?void 0:n?md(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let mr=class{constructor(){this.b=b(Kl),this.a=this.b.getAllowedTiles().subscribe(t=>{this.tiles=t})}onDestroy(){this.a&&this.a.unsubscribe()}};mr=bd([O("app-root",{style:R`:host{display:block;height:100%;width:100%}`,template:C`<app-router *if="tiles"><div *for="tile of tiles" path="/{{tile.id}}" component="{{tile.component}}"></div><div path="/location-add/:geo" component="location-add-app"></div><div path="/location-add" component="location-add-app"></div><div path="/location-average/:id" component="location-average-app"></div><div path="/location-edit/:id" component="location-edit-app"></div><div path="/location-list" component="location-list-app"></div><div path="/location-navigate/:id" component="location-navigate-app"></div><div path="/r" component="file-transfer-receive-app"></div><div path="/file-transfer-send" component="file-transfer-send-app"></div><div path="**" component="app-index"></div></app-router>`})],mr);const wd=["bitcoin","ftp","ftps","geo","im","irc","ircs","magnet","mailto","matrix","mms","news","nntp","openpgp4fpr","sftp","sip","sms","smsto","ssh","tel","urn","webcal","wtai","xmpp"],_d=["http","https"];class yd{isUrl(i){for(const e of[...wd,..._d])if(i.startsWith(`${e}:`))return!0;return!1}}var Ed=Object.getOwnPropertyDescriptor,Sd=(t,i,e,n)=>{for(var s=n>1?void 0:n?Ed(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let br=class{constructor(){this.a=null,this.b=b(bn),this.c=new ut,this.d=b(ti),this.h=b(yd),this.barcodeFound=null,this.explainAsk=!1,this.explainDeny=!1,this.explainUnavailable=!1,this.isUrl=!1,this.showControls=!1,this.torchAvailable=!1,this.torchClass="",this.torchEnabled=!1}onViewInit(){this.b.availabilityState(!0).pipe(tt(this.c)).subscribe(t=>{this.explainAsk=t===T.PROMPT,this.explainDeny=t===T.DENIED,this.explainUnavailable=t===T.UNAVAILABLE;const i=t===T.ALLOWED;this.showControls!==i&&(this.showControls=i,this.showControls&&this.i())}),this.d.availabilityState(!0).pipe(tt(this.c)).subscribe(t=>{this.torchAvailable=t===T.ALLOWED})}onDestroy(){this.c.next(null),this.c.complete(),this.e()}grant(){this.explainAsk=!1,this.b.prompt()}resetFound(){this.barcodeFound=null,this.isUrl=!1,this.f()}toggleTorch(){this.torchEnabled?this.d.turnOff():this.d.turnOn(),this.g()}f(){const t=()=>{this.b.detect(this.video).then(i=>{i.length?(this.e(),this.barcodeFound=i[0],this.isUrl=this.h.isUrl(i[0].rawValue)):this.a=requestAnimationFrame(t)})};this.a=requestAnimationFrame(t)}e(){this.a!==null&&cancelAnimationFrame(this.a)}g(){this.d.currentStatus().then(t=>{this.torchEnabled=t,this.torchClass=t?"enabled":""})}i(){this.b.getStream().then(t=>{const i=t.getVideoTracks()[0];if(!i)return;const e=i.getCapabilities().zoom;if(e){const n=Math.min(Math.max(1,e.min),e.max);i.applyConstraints({advanced:[{zoom:n}]})}this.video&&(this.video.srcObject=t,this.video.addEventListener("loadedmetadata",()=>{this.f()})),this.g()})}};br=Sd([O("barcode-reader-app",{style:R`.wrapper,:host{height:100%;width:100%}video{height:100%;width:100%;object-fit:cover;touch-action:none}.enabled{color:var(--button-fg-color-enabled)}.raw-value{background-color:var(--bg-color);padding:1em;border-radius:.5em;font-size:1.4em;word-wrap:break-word;box-sizing:border-box;max-width:100%}`,template:C`<permission-prompt *if="explainAsk" @grant.stop.prevent="grant()" message-id="barcodeReader.explainAsk"></permission-prompt><permission-denied *if="explainDeny"></permission-denied><camera-unavailable *if="explainUnavailable"></camera-unavailable><div *if="showControls" class="wrapper"><video #ref="video" autoplay muted playsinline></video><default-layout><scaling-icon slot="more-buttons" *if="torchAvailable" @click.stop.prevent="toggleTorch()" class="{{torchClass}}" href="/flashlight.svg"></scaling-icon></default-layout><show-modal *if="barcodeFound" @clickoutside="resetFound()"><div class="raw-value" @click="resetFound()"><styled-link *if="isUrl" href="{{barcodeFound.rawValue}}" target="_blank">{{barcodeFound.rawValue}}</styled-link><span *if="!isUrl">{{barcodeFound.rawValue}}</span></div></show-modal></div>`})],br);var Ad=Object.getOwnPropertyDescriptor,xd=(t,i,e,n)=>{for(var s=n>1?void 0:n?Ad(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let wr=class{constructor(){this.b=b(wn),this.c=b(de),this.a=new ut,this.degrees=0,this.explainAsk=!1,this.explainDeny=!1,this.explainUnavailable=!1,this.headingDirection="",this.showControls=!1}onInit(){this.b.availabilityState().pipe(tt(this.a)).subscribe(t=>{this.explainAsk=t===T.PROMPT,this.explainDeny=t===T.DENIED,this.explainUnavailable=t===T.UNAVAILABLE,this.showControls=t===T.ALLOWED}),this.b.getCompassBearing().pipe(tt(this.a)).subscribe(t=>{const i=this.c.standardize360(Math.round(t));this.headingDirection=this.c.toHeadingDirection(t),this.compassRose&&(this.compassRose.style.transform=`rotate(-${i}deg)`)})}onDestroy(){this.a.next(null),this.a.complete()}grant(){this.explainAsk=!1,this.b.prompt()}};wr=xd([O("compass-app",{style:R`.wrapper{display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;height:100%;width:100%;overflow:hidden}@media (orientation:landscape){.wrapper{flex-direction:row}}.compass-rose{padding:2em;height:95vmin;width:95vmin;aspect-ratio:1/1;box-sizing:border-box}.info{display:flex;align-items:center;justify-content:center;flex-direction:column;width:15em}.info-degrees{flex-grow:1;display:flex;font-size:3em;align-items:center}`,template:C`<permission-prompt *if="explainAsk" @grant.stop.prevent="grant()" message-id="barcodeReader.explainAsk"></permission-prompt><permission-denied *if="explainDeny"></permission-denied><compass-unavailable *if="explainUnavailable"></compass-unavailable><default-layout *if="showControls"><div class="wrapper"><load-svg class="compass-rose" href="/compass-rose.svg" #ref="compassRose"></load-svg><div class="info"><div class="info-degrees">{{headingDirection}}</div></div></div></default-layout>`})],wr);var Dd=Object.getOwnPropertyDescriptor,Td=(t,i,e,n)=>{for(var s=n>1?void 0:n?Dd(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let _r=class{};_r=Td([O("compass-unavailable",{style:R`.wrapper{height:100%;width:100%;display:flex;flex-direction:column;justify-content:space-evenly;align-items:center}.heading{font-size:2em}.message{max-width:90%}`,template:C`<default-layout><div class="wrapper"><div class="heading"><i18n-label id="compass.compassUnavailable.heading"></i18n-label></div><div class="message"><i18n-label id="compass.compassUnavailable.message"></i18n-label></div></div></default-layout>`})],_r);class Li{constructor(){this.a=null,this.b=b(Je)}availabilityState(){return window.navigator.wakeLock?this.a?$(T.ALLOWED):ue(this.c().then(i=>i?(i.release(),T.ALLOWED):T.DENIED)):$(T.UNAVAILABLE)}release(){this.a&&(this.a.release(),this.a=null,this.b.popI18n("service.wakeLock.released"))}request(){if(window.navigator.wakeLock&&!this.a)return this.c().then(i=>{i&&(this.a=i,this.b.popI18n("service.wakeLock.obtained"))})}c(){return window.navigator.wakeLock.request().catch(()=>{})}}var Cd=Object.getOwnPropertyDescriptor,Od=(t,i,e,n)=>{for(var s=n>1?void 0:n?Cd(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let yr=class{constructor(){this.b=new ut,this.a=b(ti),this.c=b(Li),this.enabled=!1,this.explainAsk=!1,this.explainDeny=!1,this.explainUnavailable=!1,this.showControls=!1}onInit(){this.a.availabilityState(!0).pipe(tt(this.b)).subscribe(t=>{this.explainAsk=t===T.PROMPT,this.explainDeny=t===T.DENIED,this.explainUnavailable=t===T.UNAVAILABLE||t===T.ERROR,this.showControls=t===T.ALLOWED,this.showControls&&this.d()})}onDestroy(){this.b.next(null),this.b.complete(),this.c.release()}grant(){this.explainAsk=!1,this.a.prompt()}toggle(){this.enabled?(this.c.release(),this.a.turnOff()):(this.a.turnOn(),this.c.request()),this.enabled=!this.enabled}d(){this.a.currentStatus().then(t=>{this.enabled=t})}};yr=Od([O("flashlight-app",{style:R`:host{height:100%;width:100%}.wrapper{height:100%;width:100%;display:flex;justify-content:center;align-items:center}`,template:C`<permission-prompt *if="explainAsk" @grant.stop.prevent="grant()" message-id="flashlight.explainAsk"></permission-prompt><permission-denied *if="explainDeny"></permission-denied><flashlight-unavailable *if="explainUnavailable"></flashlight-unavailable><default-layout *if="showControls"><div class="wrapper"><pretty-button .enabled="enabled" @click.stop.prevent="toggle()"><scaling-icon href="/flashlight.svg"></scaling-icon></pretty-button></div></default-layout>`})],yr);var Rd=Object.getOwnPropertyDescriptor,Md=(t,i,e,n)=>{for(var s=n>1?void 0:n?Rd(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Er=class{};Er=Md([O("flashlight-unavailable",{style:R`:host{height:100%;width:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center}.heading{font-size:2em}.message{max-width:90%}`,template:C`<div></div><div class="heading"><i18n-label id="flashlight.unavailable"></i18n-label></div><div class="message"><i18n-label id="flashlight.unavailableMessage"></i18n-label></div><back-button></back-button><div></div>`})],Er);var Pd=Object.getOwnPropertyDescriptor,Id=(t,i,e,n)=>{for(var s=n>1?void 0:n?Pd(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Sr=class{constructor(){this.a=b(Li)}onInit(){this.a.request()}onDestroy(){this.a.release()}};Sr=Id([O("front-light-app",{style:R`.bright{background-color:#fff;color:#000}`,template:C`<default-layout class="bright"></default-layout>`})],Sr);var Ld=Object.getOwnPropertyDescriptor,kd=(t,i,e,n)=>{for(var s=n>1?void 0:n?Ld(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Ar=class{constructor(){this.a=b(X),this.id=""}onViewInit(){const t=al(this);t&&(t.innerHTML=this.a.get(this.id))}};Ar=kd([O("i18n-html",{attr:["id"],template:""})],Ar);var Ud=Object.getOwnPropertyDescriptor,Nd=(t,i,e,n)=>{for(var s=n>1?void 0:n?Ud(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let xr=class{constructor(){this.a=b(X),this.id="",this.ws=" ",this.value=""}onInit(){typeof this.ws!="string"&&(this.ws=" ")}onChange(){this.value=this.a.get(this.id)}};xr=Nd([O("i18n-label",{attr:["id","ws"],style:R`:host{user-select:none}`,template:C`{{ws}}{{value}}{{ws}}`})],xr);var $d=Object.getOwnPropertyDescriptor,Bd=(t,i,e,n)=>{for(var s=n>1?void 0:n?$d(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Dr=class{constructor(){this.showQr=!1,this.website="https://be-prepared.github.io/"}closeQrCode(){this.showQr=!1}openQrCode(){this.showQr=!0}};Dr=Bd([O("info-app",{style:R`:host{display:flex;flex-direction:column;font-size:1.2em;height:100%;width:100%;box-sizing:border-box}.buttons{display:flex}@media (orientation:landscape){:host{flex-direction:row-reverse}.buttons{flex-direction:column-reverse}}`,template:C`<default-layout frame><info-share @qr="openQrCode()"></info-share><info-contact></info-contact><info-permissions></info-permissions><info-preferences></info-preferences><info-tooling></info-tooling><info-barcodes></info-barcodes><info-build></info-build></default-layout><show-modal *if="showQr" @clickoutside="closeQrCode()"><big-qr @click="closeQrCode()" content="{{website}}"></big-qr></show-modal>`})],Dr);var Fd=Object.getOwnPropertyDescriptor,jd=(t,i,e,n)=>{for(var s=n>1?void 0:n?Fd(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Tr=class{constructor(){this.availabilityState=T.ERROR,this.stateStr="error"}onChange(){this.availabilityState===T.UNAVAILABLE?this.stateStr="unavailable":this.availabilityState===T.DENIED?this.stateStr="denied":this.availabilityState===T.PROMPT?this.stateStr="prompt":this.availabilityState===T.ALLOWED?this.stateStr="allowed":this.stateStr="error"}};Tr=jd([O("info-app-availability",{prop:["availabilityState"],style:R`.state_allowed{color:green}.state_error{color:purple}.state_prompt{color:gray}.state_denied{color:orange}.state_unavailable{color:gray}`,template:C`<span class="state_{{stateStr}}"><i18n-label id="info.availability.{{stateStr}}"></i18n-label></span>`})],Tr);var zd=Object.getOwnPropertyDescriptor,Hd=(t,i,e,n)=>{for(var s=n>1?void 0:n?zd(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Cr=class{constructor(){this.b=b(Ee),this.stateStr="error"}onChange(t){t==="permission"&&(this.c(),this.permission&&this.b[this.permission]?this.a=this.b[this.permission]().subscribe(i=>this.d(i)):this.d(Zt.ERROR))}onDestroy(){this.c()}d(t){t===Zt.DENIED?this.stateStr="denied":t===Zt.GRANTED?this.stateStr="granted":t===Zt.PROMPT?this.stateStr="prompt":this.stateStr="error"}c(){this.a&&(this.a.unsubscribe(),this.a=void 0)}};Cr=Hd([O("info-app-permission",{attr:["permission"],style:R`.state_granted{color:green}.state_error{color:purple}.state_prompt{color:gray}.state_denied{color:orange}`,template:C`<span class="state_{{stateStr}}"><i18n-label id="info.permission.{{stateStr}}"></i18n-label></span>`})],Cr);var Gd=Object.getOwnPropertyDescriptor,Zd=(t,i,e,n)=>{for(var s=n>1?void 0:n?Gd(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Or=class{constructor(){this.a=b(bn),this.b=b(X),this.barcodes="",this.type="Unknown"}onInit(){this.a.type().then(t=>{this.type=this.b.get(`barcodeReader.${t}`)}),this.a.supportedFormats().then(t=>{t.length>0?this.barcodes=t.join(", "):this.barcodes=null})}};Or=Zd([O("info-barcodes",{style:R``,template:C`<info-header id="info.barcodes"></info-header><span *if="barcodes">{{type}}: {{barcodes}}</span><i18n-label *if="!barcodes" id="info.barcodesNotSupported"></i18n-label>`})],Or);var Vd=Object.getOwnPropertyDescriptor,Wd=(t,i,e,n)=>{for(var s=n>1?void 0:n?Vd(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Rr=class{constructor(){this.buildDate="2025-05-07T01:09:18.361Z",this.hostPlatform="linux",this.hostArch="x64",this.nodeVersion="v20.19.1",this.shortVersion="e7f7dc1dc31900085c948bd62f9319f90ef63db4".substr(0,7),this.tapCount=0,this.version="e7f7dc1dc31900085c948bd62f9319f90ef63db4",this.website="https://be-prepared.github.io/"}tap(){this.tapCount++;const t="eruda";if(this.tapCount>9){if(sessionStorage.getItem(t))sessionStorage.removeItem(t);else try{sessionStorage.setItem(t,"1")}catch(e){sessionStorage.clear()}window.location.reload()}}};Rr=Wd([O("info-build",{style:R``,template:C`<info-header id="info.buildInformationHeader" @click="tap()"></info-header><ul><li>{{buildDate}}, commit<styled-link href="https://github.com/Be-Prepared/Be-Prepared/commit/{{version}}" target="_blank">{{shortVersion}}</styled-link></li><li>Node.js {{nodeVersion}} ({{hostPlatform}} {{hostArch}})</li></ul>`})],Rr);var Qd=Object.getOwnPropertyDescriptor,qd=(t,i,e,n)=>{for(var s=n>1?void 0:n?Qd(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Mr=class{};Mr=qd([O("info-contact",{style:R``,template:C`<p><i18n-label id="info.contact.specificBrowsers"></i18n-label></p><p><i18n-label id="info.contact.feedback"></i18n-label></p><ul><li><styled-link href="https://github.com/Be-Prepared/Be-Prepared.github.io/issues" target="_blank"><i18n-label id="info.contact.issues"></i18n-label></styled-link></li><li><styled-link href="mailto:fidian@rumkin.com"><i18n-label id="info.contact.email"></i18n-label></styled-link></li></ul>`})],Mr);var Kd=Object.getOwnPropertyDescriptor,Yd=(t,i,e,n)=>{for(var s=n>1?void 0:n?Kd(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Pr=class{};Pr=Yd([O("info-header",{attr:["id"],style:R``,template:C`<p><i18n-label id="{{id}}"></i18n-label></p>`})],Pr);var Xd=Object.getOwnPropertyDescriptor,Jd=(t,i,e,n)=>{for(var s=n>1?void 0:n?Xd(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Ir=class{constructor(){this.b=b(wn),this.c=b(Y),this.d=b(Ls),this.a=new ut,this.e=b(ti),this.f=b(Li),this.compass=T.ERROR,this.compassType="ABSOLUTE_ORIENTATION_SENSOR",this.geolocation=T.ERROR,this.nfc=T.ERROR,this.torch=T.ERROR,this.wakeLock=T.ERROR,this.c.availabilityState().pipe(tt(this.a)).subscribe(t=>{this.geolocation=t}),this.b.availabilityState().pipe(tt(this.a)).subscribe(t=>{this.compass=t}),this.b.typeObservable().pipe(tt(this.a)).subscribe(t=>{this.compassType=t}),this.d.availabilityState(!1).pipe(tt(this.a)).subscribe(t=>{this.nfc=t}),this.e.availabilityState(!1).pipe(tt(this.a)).subscribe(t=>{this.torch=t}),this.f.availabilityState().pipe(tt(this.a)).subscribe(t=>{this.wakeLock=t})}onDestroy(){this.a.next(null),this.a.complete()}};Ir=Jd([O("info-permissions",{style:R``,template:C`<info-header id="info.permissionsAndFeaturesHeader"></info-header><ul><li><i18n-label id="info.camera"></i18n-label><info-app-permission permission="camera"></info-app-permission></li><li><i18n-label id="info.compass"></i18n-label>(<i18n-label id="info.compass.{{ compassType }}" ws=""></i18n-label>)<info-app-availability .availability-state="compass"></info-app-availability></li><li><i18n-label id="info.geolocation"></i18n-label><info-app-availability .availability-state="geolocation"></info-app-availability></li><li><i18n-label id="info.nfc"></i18n-label><info-app-availability .availability-state="nfc"></info-app-availability></li><li><i18n-label id="info.torch"></i18n-label><info-app-availability .availability-state="torch"></info-app-availability></li><li><i18n-label id="info.wakeLock"></i18n-label><info-app-availability .availability-state="wakeLock"></info-app-availability></li></ul>`})],Ir);const Yl=[Gt.METRIC,Gt.IMPERIAL],us=Gt.IMPERIAL;class gt{constructor(){this.a=new gn(us),this.c=b(Ft),this.c.distanceSystem.getItem()===Gt.METRIC&&this.a.next(Gt.METRIC)}getCurrentSetting(){return this.a.asObservable()}metersToString(i,e={}){return this.a.value===Gt.METRIC?this.d(i,e):this.e(i,e)}reset(){this.c.distanceSystem.reset(),this.a.next(us)}setDistanceSystem(i){Yl.includes(i)&&(this.a.next(i),this.c.distanceSystem.setItem(i))}toggleSystem(){const i=this.a.value===Gt.METRIC?Gt.IMPERIAL:Gt.METRIC;this.setDistanceSystem(i)}b(i){const e=Math.abs(i);let n=0;e<1?n=3:e<10?n=2:e<100&&(n=1);const s=Math.pow(10,n);return(Math.round(i*s)/s).toLocaleString()}e(i,e){const n=i*3.2808398950131;if(e.isSpeed){const r=n*3600/5280;return`${this.b(r)} mph`}if(n<528||e.useSmallUnits)return`${Math.round(n)} ft`;const s=n/5280;return`${this.b(s)} mi`}d(i,e){if(e.isSpeed)return`${this.b(3.6*i)} km/h`;if(i<1e3||e.useSmallUnits)return`${this.b(i)} m`;const n=i/1e3;return`${this.b(n)} km`}}const Xl=[le["12_HOUR"],le["24_HOUR"]],Jl=le["24_HOUR"];class Se{constructor(){this.b=new gn(Jl),this.c=b(X),this.d=b(Ft)}formatTime(i){const e=Math.floor(i/1e3)%60,n=Math.floor(e/6e4)%60;return`${Math.floor(n/36e5)%24}:${this.a(n)}:${this.a(e)}`}formatTimeOfDay(i){const e=new Date(i);if(this.b.value===le["12_HOUR"]){const n=e.getHours(),s=n>=12?"PM":"AM",r=this.c.get(`info.time12Hour.${s}`);return`${n%12||12}:${this.a(e.getMinutes())}:${this.a(e.getSeconds())} ${r}`}return`${this.a(e.getHours())}:${this.a(e.getMinutes())}:${this.a(e.getSeconds())}`}getCurrentSetting(){return this.b.asObservable()}setTimeSystem(i){Xl.includes(i)&&(this.b.next(i),this.d.timeSystem.setItem(i))}toggleSystem(){const i=this.b.value===le["24_HOUR"]?le["12_HOUR"]:le["24_HOUR"];this.setTimeSystem(i)}a(i){return`0${i}`.slice(-2)}}var tf=Object.getOwnPropertyDescriptor,ef=(t,i,e,n)=>{for(var s=n>1?void 0:n?tf(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Lr=class{constructor(){this.b=b(Tt),this.c=b(gt),this.a=new ut,this.d=b(Se),this.e=b(Je),this.coordinateSystem=ln,this.coordinateSystems=Us,this.distanceSystem=us,this.distanceSystems=Yl,this.timeSystem=Jl,this.timeSystems=Xl}onInit(){this.b.getCurrentSetting().pipe(tt(this.a)).subscribe(t=>{this.coordinateSystem=t}),this.c.getCurrentSetting().pipe(tt(this.a)).subscribe(t=>{this.distanceSystem=t}),this.d.getCurrentSetting().pipe(tt(this.a)).subscribe(t=>{this.timeSystem=t})}onDestroy(){this.a.next(null),this.a.complete()}changeCoordinateSystem(t){this.b.setCoordinateSystem(t)}changeDistanceSystem(t){this.c.setDistanceSystem(t)}changeTimeSystem(t){this.d.setTimeSystem(t)}reset(){this.b.reset(),this.c.reset(),this.e.popI18n("info.preferences.resetComplete")}};Lr=ef([O("info-preferences",{style:R``,template:C`<info-header id="info.preferences"></info-header><ul><li><i18n-label id="info.coordinates"></i18n-label><pretty-select i18n-base="location.coordinates" value="{{coordinateSystem}}" .options="coordinateSystems" @change="changeCoordinateSystem($event.detail)"></pretty-select></li><li><i18n-label id="info.distances"></i18n-label><pretty-select i18n-base="info.distances" value="{{distanceSystem}}" .options="distanceSystems" @change="changeDistanceSystem($event.detail)"></pretty-select></li><li><i18n-label id="info.timeSystem"></i18n-label><pretty-select i18n-base="info.timeSystem" value="{{timeSystem}}" .options="timeSystems" @change="changeTimeSystem($event.detail)"></pretty-select></li><li><changeable-setting @click="reset()"><i18n-label id="info.preferences.reset"></i18n-label></changeable-setting></li></ul>`})],Lr);var Bn={exports:{}},kr;function nf(){return kr||(kr=1,function(t){function i(l){this.mode=n.MODE_8BIT_BYTE,this.data=l,this.parsedData=[];for(var u=0,g=this.data.length;u<g;u++){var p=[],m=this.data.charCodeAt(u);m>65536?(p[0]=240|(m&1835008)>>>18,p[1]=128|(m&258048)>>>12,p[2]=128|(m&4032)>>>6,p[3]=128|m&63):m>2048?(p[0]=224|(m&61440)>>>12,p[1]=128|(m&4032)>>>6,p[2]=128|m&63):m>128?(p[0]=192|(m&1984)>>>6,p[1]=128|m&63):p[0]=m,this.parsedData.push(p)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}i.prototype={getLength:function(l){return this.parsedData.length},write:function(l){for(var u=0,g=this.parsedData.length;u<g;u++)l.put(this.parsedData[u],8)}};function e(l,u){this.typeNumber=l,this.errorCorrectLevel=u,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}e.prototype={addData:function(l){var u=new i(l);this.dataList.push(u),this.dataCache=null},isDark:function(l,u){if(l<0||this.moduleCount<=l||u<0||this.moduleCount<=u)throw new Error(l+","+u);return this.modules[l][u]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1){var l=1;for(l=1;l<40;l++){for(var u=v.getRSBlocks(l,this.errorCorrectLevel),g=new y,p=0,m=0;m<u.length;m++)p+=u[m].dataCount;for(var m=0;m<this.dataList.length;m++){var _=this.dataList[m];g.put(_.mode,4),g.put(_.getLength(),a.getLengthInBits(_.mode,l)),_.write(g)}if(g.getLengthInBits()<=p*8)break}this.typeNumber=l}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(l,u){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var g=0;g<this.moduleCount;g++){this.modules[g]=new Array(this.moduleCount);for(var p=0;p<this.moduleCount;p++)this.modules[g][p]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(l,u),this.typeNumber>=7&&this.setupTypeNumber(l),this.dataCache==null&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,u)},setupPositionProbePattern:function(l,u){for(var g=-1;g<=7;g++)if(!(l+g<=-1||this.moduleCount<=l+g))for(var p=-1;p<=7;p++)u+p<=-1||this.moduleCount<=u+p||(0<=g&&g<=6&&(p==0||p==6)||0<=p&&p<=6&&(g==0||g==6)||2<=g&&g<=4&&2<=p&&p<=4?this.modules[l+g][u+p]=!0:this.modules[l+g][u+p]=!1)},getBestMaskPattern:function(){for(var l=0,u=0,g=0;g<8;g++){this.makeImpl(!0,g);var p=a.getLostPoint(this);(g==0||l>p)&&(l=p,u=g)}return u},setupTimingPattern:function(){for(var l=8;l<this.moduleCount-8;l++)this.modules[l][6]==null&&(this.modules[l][6]=l%2==0);for(var u=8;u<this.moduleCount-8;u++)this.modules[6][u]==null&&(this.modules[6][u]=u%2==0)},setupPositionAdjustPattern:function(){for(var l=a.getPatternPosition(this.typeNumber),u=0;u<l.length;u++)for(var g=0;g<l.length;g++){var p=l[u],m=l[g];if(this.modules[p][m]==null)for(var _=-2;_<=2;_++)for(var w=-2;w<=2;w++)_==-2||_==2||w==-2||w==2||_==0&&w==0?this.modules[p+_][m+w]=!0:this.modules[p+_][m+w]=!1}},setupTypeNumber:function(l){for(var u=a.getBCHTypeNumber(this.typeNumber),g=0;g<18;g++){var p=!l&&(u>>g&1)==1;this.modules[Math.floor(g/3)][g%3+this.moduleCount-8-3]=p}for(var g=0;g<18;g++){var p=!l&&(u>>g&1)==1;this.modules[g%3+this.moduleCount-8-3][Math.floor(g/3)]=p}},setupTypeInfo:function(l,u){for(var g=this.errorCorrectLevel<<3|u,p=a.getBCHTypeInfo(g),m=0;m<15;m++){var _=!l&&(p>>m&1)==1;m<6?this.modules[m][8]=_:m<8?this.modules[m+1][8]=_:this.modules[this.moduleCount-15+m][8]=_}for(var m=0;m<15;m++){var _=!l&&(p>>m&1)==1;m<8?this.modules[8][this.moduleCount-m-1]=_:m<9?this.modules[8][15-m-1+1]=_:this.modules[8][15-m-1]=_}this.modules[this.moduleCount-8][8]=!l},mapData:function(l,u){for(var g=-1,p=this.moduleCount-1,m=7,_=0,w=this.moduleCount-1;w>0;w-=2)for(w==6&&w--;;){for(var E=0;E<2;E++)if(this.modules[p][w-E]==null){var A=!1;_<l.length&&(A=(l[_]>>>m&1)==1);var S=a.getMask(u,p,w-E);S&&(A=!A),this.modules[p][w-E]=A,m--,m==-1&&(_++,m=7)}if(p+=g,p<0||this.moduleCount<=p){p-=g,g=-g;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(l,u,g){for(var p=v.getRSBlocks(l,u),m=new y,_=0;_<g.length;_++){var w=g[_];m.put(w.mode,4),m.put(w.getLength(),a.getLengthInBits(w.mode,l)),w.write(m)}for(var E=0,_=0;_<p.length;_++)E+=p[_].dataCount;if(m.getLengthInBits()>E*8)throw new Error("code length overflow. ("+m.getLengthInBits()+">"+E*8+")");for(m.getLengthInBits()+4<=E*8&&m.put(0,4);m.getLengthInBits()%8!=0;)m.putBit(!1);for(;!(m.getLengthInBits()>=E*8||(m.put(e.PAD0,8),m.getLengthInBits()>=E*8));)m.put(e.PAD1,8);return e.createBytes(m,p)},e.createBytes=function(l,u){for(var g=0,p=0,m=0,_=new Array(u.length),w=new Array(u.length),E=0;E<u.length;E++){var A=u[E].dataCount,S=u[E].totalCount-A;p=Math.max(p,A),m=Math.max(m,S),_[E]=new Array(A);for(var x=0;x<_[E].length;x++)_[E][x]=255&l.buffer[x+g];g+=A;var D=a.getErrorCorrectPolynomial(S),I=new c(_[E],D.getLength()-1),P=I.mod(D);w[E]=new Array(D.getLength()-1);for(var x=0;x<w[E].length;x++){var z=x+P.getLength()-w[E].length;w[E][x]=z>=0?P.get(z):0}}for(var W=0,x=0;x<u.length;x++)W+=u[x].totalCount;for(var Z=new Array(W),nt=0,x=0;x<p;x++)for(var E=0;E<u.length;E++)x<_[E].length&&(Z[nt++]=_[E][x]);for(var x=0;x<m;x++)for(var E=0;E<u.length;E++)x<w[E].length&&(Z[nt++]=w[E][x]);return Z};for(var n={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},s={L:1,M:0,Q:3,H:2},r={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},a={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(l){for(var u=l<<10;a.getBCHDigit(u)-a.getBCHDigit(a.G15)>=0;)u^=a.G15<<a.getBCHDigit(u)-a.getBCHDigit(a.G15);return(l<<10|u)^a.G15_MASK},getBCHTypeNumber:function(l){for(var u=l<<12;a.getBCHDigit(u)-a.getBCHDigit(a.G18)>=0;)u^=a.G18<<a.getBCHDigit(u)-a.getBCHDigit(a.G18);return l<<12|u},getBCHDigit:function(l){for(var u=0;l!=0;)u++,l>>>=1;return u},getPatternPosition:function(l){return a.PATTERN_POSITION_TABLE[l-1]},getMask:function(l,u,g){switch(l){case r.PATTERN000:return(u+g)%2==0;case r.PATTERN001:return u%2==0;case r.PATTERN010:return g%3==0;case r.PATTERN011:return(u+g)%3==0;case r.PATTERN100:return(Math.floor(u/2)+Math.floor(g/3))%2==0;case r.PATTERN101:return u*g%2+u*g%3==0;case r.PATTERN110:return(u*g%2+u*g%3)%2==0;case r.PATTERN111:return(u*g%3+(u+g)%2)%2==0;default:throw new Error("bad maskPattern:"+l)}},getErrorCorrectPolynomial:function(l){for(var u=new c([1],0),g=0;g<l;g++)u=u.multiply(new c([1,o.gexp(g)],0));return u},getLengthInBits:function(l,u){if(1<=u&&u<10)switch(l){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:return 8;case n.MODE_KANJI:return 8;default:throw new Error("mode:"+l)}else if(u<27)switch(l){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+l)}else if(u<41)switch(l){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+l)}else throw new Error("type:"+u)},getLostPoint:function(l){for(var u=l.getModuleCount(),g=0,p=0;p<u;p++)for(var m=0;m<u;m++){for(var _=0,w=l.isDark(p,m),E=-1;E<=1;E++)if(!(p+E<0||u<=p+E))for(var A=-1;A<=1;A++)m+A<0||u<=m+A||E==0&&A==0||w==l.isDark(p+E,m+A)&&_++;_>5&&(g+=3+_-5)}for(var p=0;p<u-1;p++)for(var m=0;m<u-1;m++){var S=0;l.isDark(p,m)&&S++,l.isDark(p+1,m)&&S++,l.isDark(p,m+1)&&S++,l.isDark(p+1,m+1)&&S++,(S==0||S==4)&&(g+=3)}for(var p=0;p<u;p++)for(var m=0;m<u-6;m++)l.isDark(p,m)&&!l.isDark(p,m+1)&&l.isDark(p,m+2)&&l.isDark(p,m+3)&&l.isDark(p,m+4)&&!l.isDark(p,m+5)&&l.isDark(p,m+6)&&(g+=40);for(var m=0;m<u;m++)for(var p=0;p<u-6;p++)l.isDark(p,m)&&!l.isDark(p+1,m)&&l.isDark(p+2,m)&&l.isDark(p+3,m)&&l.isDark(p+4,m)&&!l.isDark(p+5,m)&&l.isDark(p+6,m)&&(g+=40);for(var x=0,m=0;m<u;m++)for(var p=0;p<u;p++)l.isDark(p,m)&&x++;var D=Math.abs(100*x/u/u-50)/5;return g+=D*10,g}},o={glog:function(l){if(l<1)throw new Error("glog("+l+")");return o.LOG_TABLE[l]},gexp:function(l){return l=l%255,o.EXP_TABLE[l<0?l+255:l]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},f=0;f<8;f++)o.EXP_TABLE[f]=1<<f;for(var f=8;f<256;f++)o.EXP_TABLE[f]=o.EXP_TABLE[f-4]^o.EXP_TABLE[f-5]^o.EXP_TABLE[f-6]^o.EXP_TABLE[f-8];for(var f=0;f<255;f++)o.LOG_TABLE[o.EXP_TABLE[f]]=f;function c(l,u){if(l.length==null)throw new Error(l.length+"/"+u);for(var g=0;g<l.length&&l[g]==0;)g++;this.num=new Array(l.length-g+u);for(var p=0;p<l.length-g;p++)this.num[p]=l[p+g]}c.prototype={get:function(l){return this.num[l]},getLength:function(){return this.num.length},multiply:function(l){for(var u=new Array(this.getLength()+l.getLength()-1),g=0;g<this.getLength();g++)for(var p=0;p<l.getLength();p++)u[g+p]^=o.gexp(o.glog(this.get(g))+o.glog(l.get(p)));return new c(u,0)},mod:function(l){if(this.getLength()-l.getLength()<0)return this;for(var u=o.glog(this.get(0))-o.glog(l.get(0)),g=new Array(this.getLength()),p=0;p<this.getLength();p++)g[p]=this.get(p);for(var p=0;p<l.getLength();p++)g[p]^=o.gexp(o.glog(l.get(p))+u);return new c(g,0).mod(l)}};function v(l,u){this.totalCount=l,this.dataCount=u}v.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],v.getRSBlocks=function(l,u){var g=v.getRsBlockTable(l,u);if(g==null)throw new Error("bad rs block @ typeNumber:"+l+"/errorCorrectLevel:"+u);for(var p=g.length/3,m=[],_=0;_<p;_++)for(var w=g[_*3+0],E=g[_*3+1],A=g[_*3+2],S=0;S<w;S++)m.push(new v(E,A));return m},v.getRsBlockTable=function(l,u){switch(u){case s.L:return v.RS_BLOCK_TABLE[(l-1)*4+0];case s.M:return v.RS_BLOCK_TABLE[(l-1)*4+1];case s.Q:return v.RS_BLOCK_TABLE[(l-1)*4+2];case s.H:return v.RS_BLOCK_TABLE[(l-1)*4+3];default:return}};function y(){this.buffer=[],this.length=0}y.prototype={get:function(l){var u=Math.floor(l/8);return(this.buffer[u]>>>7-l%8&1)==1},put:function(l,u){for(var g=0;g<u;g++)this.putBit((l>>>u-g-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(l){var u=Math.floor(this.length/8);this.buffer.length<=u&&this.buffer.push(0),l&&(this.buffer[u]|=128>>>this.length%8),this.length++}};var h=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function d(l){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M"},typeof l=="string"&&(l={content:l}),l)for(var u in l)this.options[u]=l[u];if(typeof this.options.content!="string")throw new Error("Expected 'content' as string!");if(this.options.content.length===0)throw new Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw new Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0)||!(this.options.height>0))throw new Error("Expected 'width' or 'height' value to be higher than zero!");function g(A){switch(A){case"L":return s.L;case"M":return s.M;case"Q":return s.Q;case"H":return s.H;default:throw new Error("Unknwon error correction level: "+A)}}function p(A,S){for(var x=m(A),D=1,I=0,P=0,z=h.length;P<=z;P++){var W=h[P];if(!W)throw new Error("Content too long: expected "+I+" but got "+x);switch(S){case"L":I=W[0];break;case"M":I=W[1];break;case"Q":I=W[2];break;case"H":I=W[3];break;default:throw new Error("Unknwon error correction level: "+S)}if(x<=I)break;D++}if(D>h.length)throw new Error("Content too long");return D}function m(A){var S=encodeURI(A).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return S.length+(S.length!=A?3:0)}var _=this.options.content,w=p(_,this.options.ecl),E=g(this.options.ecl);this.qrcode=new e(w,E),this.qrcode.addData(_),this.qrcode.make()}d.prototype.svg=function(l){var u=this.options||{},g=this.qrcode.modules;typeof l=="undefined"&&(l={container:u.container||"svg"});for(var p=typeof u.pretty!="undefined"?!!u.pretty:!0,m=p?"  ":"",_=p?`\r
`:"",w=u.width,E=u.height,A=g.length,S=w/(A+2*u.padding),x=E/(A+2*u.padding),D=l.container=="path-data"||(typeof u.join!="undefined"?!!u.join:!1),I=typeof u.swap!="undefined"?!!u.swap:!1,P=typeof u.xmlDeclaration!="undefined"?!!u.xmlDeclaration:!0,z=typeof u.predefined!="undefined"?!!u.predefined:!1,W=z?m+'<defs><path id="qrmodule" d="M0 0 h'+x+" v"+S+' H0 z" style="fill:'+u.color+';shape-rendering:crispEdges;" /></defs>'+_:"",Z=m+'<rect x="0" y="0" width="'+w+'" height="'+E+'" style="fill:'+u.background+';shape-rendering:crispEdges;"/>'+_,nt="",jt="",Ct=0;Ct<A;Ct++)for(var zt=0;zt<A;zt++){var Ae=g[zt][Ct];if(Ae){var dt=zt*S+u.padding*S,k=Ct*x+u.padding*x;if(I){var N=dt;dt=k,k=N}if(D){var B=S+dt,Q=x+k;dt=Number.isInteger(dt)?Number(dt):dt.toFixed(2),k=Number.isInteger(k)?Number(k):k.toFixed(2),B=Number.isInteger(B)?Number(B):B.toFixed(2),Q=Number.isInteger(Q)?Number(Q):Q.toFixed(2),jt+="M"+dt+","+k+" V"+Q+" H"+B+" V"+k+" H"+dt+" Z "}else z?nt+=m+'<use x="'+dt.toString()+'" y="'+k.toString()+'" href="#qrmodule" />'+_:nt+=m+'<rect x="'+dt.toString()+'" y="'+k.toString()+'" width="'+S+'" height="'+x+'" style="fill:'+u.color+';shape-rendering:crispEdges;"/>'+_}}D&&(nt=m+'<path x="0" y="0" style="fill:'+u.color+';shape-rendering:crispEdges;" d="'+jt+'" />');var j="";switch(l.container){case"svg":P&&(j+='<?xml version="1.0" standalone="yes"?>'+_),j+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+w+'" height="'+E+'">'+_,j+=W+Z+nt,j+="</svg>";break;case"svg-viewbox":P&&(j+='<?xml version="1.0" standalone="yes"?>'+_),j+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+w+" "+E+'">'+_,j+=W+Z+nt,j+="</svg>";break;case"g":j+='<g width="'+w+'" height="'+E+'">'+_,j+=W+Z+nt,j+="</g>";break;case"path-data":j=jt;break;default:j+=(W+Z+nt).replace(/^\s+/,"");break}return j},t.exports=d}(Bn)),Bn.exports}var sf=nf();const rf=_n(sf);class tc{svg(i,e="L"){return new rf({container:"svg-viewbox",content:i,ecl:e,join:!0}).svg()}}var af=Object.getOwnPropertyDescriptor,of=(t,i,e,n)=>{for(var s=n>1?void 0:n?af(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Ur=class{constructor(){this.b=b(tc),this.a=b(Je),this.allowCopy=!1,this.website="https://be-prepared.github.io/"}onInit(){this.allowCopy=!!navigator.clipboard}copyToClipboard(){navigator.clipboard.writeText("https://be-prepared.github.io/"),this.a.popI18n("info.share.copied")}openQrCode(){ye(this,"qr")}};Ur=of([O("info-share",{style:R`:host{position:relative}.website{text-align:center;margin-bottom:1em}.buttons{display:flex;justify-content:space-evenly;align-items:center}.copyButton{padding:0 1em}button{background-color:var(--button-bg-color);border:2px solid var(--fg-color);border-radius:15px;padding:7.5px;color:inherit;font-size:inherit;overflow:hidden}`,template:C`<info-header id="info.shareApp"></info-header><div class="website">{{website}}</div><div class="buttons"><pretty-button @click="openQrCode()" padding="0px"><mini-qr content="{{website}}"></mini-qr></pretty-button><pretty-labeled-button *if="allowCopy" @click="copyToClipboard()" id="info.share.copy" class="copyButton"></pretty-labeled-button></div>`})],Ur);var lf=Object.getOwnPropertyDescriptor,cf=(t,i,e,n)=>{for(var s=n>1?void 0:n?lf(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Nr=class{};Nr=cf([O("info-tooling",{style:R``,template:C`<info-header id="info.toolingHeader"></info-header><ul><li><styled-link href="https://github.com/Be-Prepared/Be-Prepared.github.io/" target="_blank">GitHub</styled-link>-<i18n-label id="info.sourceCode"></i18n-label></li><li><styled-link href="https://fudgel.js.org" target="_blank">Fudgel</styled-link>-<i18n-label id="info.framework"></i18n-label></li></ul>`})],Nr);class ec{constructor(){this.a=null}listenForEvents(){window.addEventListener("beforeinstallprompt",i=>{i.preventDefault(),this.a=i,this.b()})}triggerSavedEvent(){this.a&&(this.a.prompt(),this.a=null)}b(){document.body.appendChild(document.createElement("install-pwa"))}}var hf=Object.getOwnPropertyDescriptor,uf=(t,i,e,n)=>{for(var s=n>1?void 0:n?hf(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let $r=class{constructor(){this.b=b(ec)}logoLoaded(){setTimeout(()=>this.a("show"),400)}install(){this.b.triggerSavedEvent(),this.a("hide")}a(t){this.drawer&&this.drawer[t]()}};$r=uf([O("install-pwa",{style:R`.load-svg-wrapper{padding:0 3%;width:5em;background-color:var(--bg-color)}.install-text{padding:0 .3em}.space{flex-grow:1}@media (max-width:60em){.load-svg-wrapper{width:4em}}@media (max-width:30em){.load-svg-wrapper{width:16%}}@media (max-width:20em){.load-svg-wrapper{width:25%}}@media (max-width:10em){.load-svg-wrapper{width:50%}}`,template:C`<bottom-drawer #ref="drawer"><div class="load-svg-wrapper"><load-svg href="/toolbox.svg" @loadsvg.stop.prevent="logoLoaded()"></load-svg></div><div class="install-text"><i18n-label id="install.message"></i18n-label></div><div class="space"></div><div class="install-button"><styled-link @click.stop.prevent="install()"><i18n-label id="install.action"></i18n-label></styled-link></div></bottom-drawer>`})],$r);class df{parse(i,e){return i.replace(/{{\s*([^}\s]+)\s*}}/g,(n,s)=>e[s]||"")}}class ki{constructor(){this.b=0,this.a=[],this.d=b(Ft),this.e()}deletePoint(i){const e=this.a.findIndex(n=>n.id===i);e!==-1&&(this.a.splice(e,1),this.c())}getPoint(i){const e=this.a.find(n=>n.id===i);return e?Ot({},e):null}getPoints(){return this.a}newPoint(){this.b+=1;const i={id:this.b,name:"",lat:0,lon:0,created:Date.now()};return this.a.push(i),this.c(),i}updatePoint(i){const e=this.a.findIndex(n=>n.id===i.id);e>=0&&this.a.splice(e,1),this.a.push(Ot({},i)),this.c()}f(i){return typeof i!="object"||!i?!1:!!(i.lat&&i.lon&&i.created&&typeof i.name=="string")}e(){const i=this.d.points.getItem();let e=0;if(Array.isArray(i)&&i.every(n=>this.f(n))){for(const n of i)e=Math.max(e,n.id);this.a=i}this.b=e}c(){this.d.points.setItem(this.a)}}var ff=Object.getOwnPropertyDescriptor,pf=(t,i,e,n)=>{for(var s=n>1?void 0:n?ff(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Br=class{constructor(){this.e=b(Tt),this.f=b(Y),this.g=b(X),this.h=b(df),this.b=b(ki)}onInit(){this.geo?this.i():this.j()}onDestroy(){this.a&&this.a.unsubscribe()}c(t){const i=this.g.get("location.add.waypointName");return this.h.parse(i,{id:t.id.toLocaleString()})}d(t){this.b.updatePoint(t),setTimeout(()=>{history.replaceState({},document.title,`/location-edit/${t.id}`)})}i(){const t=this.b.newPoint();t.name=this.c(t),this.e.fromString(this.geo||"").subscribe(i=>{if(i){t.lat=i.lat,t.lon=i.lon;const n=new URLSearchParams(`?${window.location.search.slice(1).replace(/\?/g,"&")}`).get("q");n&&(t.name=n)}this.d(t)})}j(){const t=this.b.newPoint();t.name=this.c(t),this.a=this.f.getPosition().pipe(Fl(2e3),Xe(),Gl(i=>{i&&i.success&&(t.lat=i.lat,t.lon=i.lon)}),Ei(()=>$(null))).subscribe(()=>{this.d(t)})}};Br=pf([O("location-add-app",{attr:["geo"],style:R`.full{display:flex;justify-content:center;align-items:center;height:100%}`,template:C`<location-wrapper><div class="full"><i18n-label id="location.add.gettingCurrentLocation"></i18n-label></div></location-wrapper>`})],Br);var vf=Object.getOwnPropertyDescriptor,gf=(t,i,e,n)=>{for(var s=n>1?void 0:n?vf(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Fr=class{constructor(){this.b=b(Y),this.a=new ut,this.latLon=null,this.position=null}onInit(){this.b.availabilityState().pipe(tt(this.a),Rs(t=>t===T.ALLOWED),Bt(()=>this.b.getPosition())).subscribe(t=>{this.position=t,this.c()})}onDestroy(){this.a.next(null),this.a.complete()}goToList(){history.pushState({},document.title,"/location-list")}c(){this.position&&this.position.success?this.latLon={lat:this.position.lat,lon:this.position.lon}:this.latLon=null}};Fr=gf([O("location-app",{style:R`.content{height:100%;width:100%;padding:1em;display:flex;flex-direction:column;justify-content:center;align-items:center;box-sizing:border-box;overflow:hidden}.gap-above{padding-top:.4em}.multi-line{display:flex;flex-direction:column;text-align:center}.full-width{width:100%}`,template:C`<location-wrapper><default-layout><div *if="latLon" class="content"><location-coordinates .coords="latLon"></location-coordinates><div class="gap-above full-width"><location-field id="current.1" default="ACCURACY"></location-field></div><div class="full-width"><location-field id="current.2" default="SPEED"></location-field></div><div class="full-width"><location-field id="current.3" default="HEADING"></location-field></div><div class="full-width"><location-field id="current.4" default="ALTITUDE"></location-field></div><div class="full-width"><location-field id="current.5" default="ALTITUDE_ACCURACY"></location-field></div></div><div *if="position && position.error" class="content"><p><i18n-label id="location.positionError"></i18n-label></p><p *if="position.error.code === position.error.PERMISSION_DENIED"><i18n-label id="location.positionDenied"></i18n-label></p><p *if="position.error.code === position.error.POSITION_UNAVAILABLE"><i18n-label id="location.positionUnavailable"></i18n-label></p></div><div *if="!position" class="content"><p><i18n-label id="location.retrievingLocation"></i18n-label></p></div><scaling-icon slot="more-buttons" @click="goToList()" href="/list.svg"></scaling-icon></default-layout></location-wrapper>`})],Fr);var mf=Object.getOwnPropertyDescriptor,bf=(t,i,e,n)=>{for(var s=n>1?void 0:n?mf(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let jr=class{constructor(){this.b=b(Tt),this.c=b(gt),this.d=b(Y),this.a=new ut,this.e=b(Li),this.f=b(ki),this.averagedDataPoint=null,this.dataPoints=[],this.debug="",this.ninetyFive="",this.point=null,this.pointCount=0,this.xDelta="",this.yDelta=""}onInit(){const t=this.id;let i;if(t&&(i=this.f.getPoint(+t)),!i){history.go(-1);return}this.point=i,this.e.request(),this.d.availabilityState().pipe(tt(this.a),Rs(e=>e===T.ALLOWED),Bt(()=>this.d.getPosition())).subscribe(e=>{this.h(e)})}onDestroy(){this.a.next(null),this.a.complete(),this.e.release()}save(){this.averagedDataPoint&&(this.a.next(null),this.a.complete(),this.point.lat=this.averagedDataPoint.lat,this.point.lon=this.averagedDataPoint.lon,this.f.updatePoint(this.point),history.go(-1))}toggleDistanceSystem(){this.c.toggleSystem(),this.g()}h(t){if(!t.success)return;let i=fe(Ot({},this.b.latLonToXYZ(t)),{lat:t.lat,lon:t.lon,accuracy:t.accuracy||20});this.dataPoints.push(i),this.pointCount=this.dataPoints.length;let e=0,n=0,s=0,r=0;for(const v of this.dataPoints){const y=1/v.accuracy;e+=v.x*y,n+=v.y*y,s+=v.z*y,r+=y}const a={x:e/r,y:n/r,z:s/r},o=this.b.xyzToLatLon(a);let f=0;for(const v of this.dataPoints)f+=Math.pow(this.b.distance(o,v),2);const c=Math.sqrt(f/this.dataPoints.length);this.averagedDataPoint=fe(Ot(Ot({},a),o),{accuracy:c*20}),this.g()}g(){this.averagedDataPoint&&(this.ninetyFive=this.c.metersToString(this.averagedDataPoint.accuracy))}};jr=bf([O("location-average-app",{attr:["id"],style:R`.content{height:100%;width:100%;display:flex;flex-direction:column;box-sizing:border-box}.wrapper{padding-top:1em;height:100%;width:100%;overflow:hidden;display:flex;box-sizing:border-box}.wrapper-inner{flex-grow:1;padding:.3em;border-style:solid;box-sizing:border-box;border-width:1px;overflow-x:auto;height:100%;width:100%}`,template:C`<location-wrapper><default-layout *if="point"><div class="content"><div><i18n-label id="location.average.heading"></i18n-label><div>{{point.name}}</div></div><div class="wrapper"><div class="wrapper-inner"><div><i18n-label id="location.average.pointsCollected"></i18n-label>{{pointCount}}</div><div><i18n-label id="location.average.ninetyFive"></i18n-label><changeable-setting @click="toggleDistanceSystem()">{{ninetyFive}}</changeable-setting></div><location-coordinates .coords="averagedDataPoint"></location-coordinates><p><i18n-label id="location.average.help"></i18n-label></p><p><i18n-label id="location.average.help2"></i18n-label></p></div></div></div><scaling-icon slot="more-buttons" @click.stop.prevent="save()" href="/save.svg"></scaling-icon></default-layout></location-wrapper>`})],jr);var wf=Object.getOwnPropertyDescriptor,_f=(t,i,e,n)=>{for(var s=n>1?void 0:n?wf(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let zr=class{constructor(){this.a=b(Tt),this.b=null,this.coordinateSystem=ln,this.coordinateSystems=Us,this.dataToDisplay={empty:!0},this.b=this.a.getCurrentSetting().subscribe(t=>{this.coordinateSystem=t,this.c()})}onChange(t){t==="coords"&&this.c()}onDestroy(){this.b&&this.b.unsubscribe()}changeCoordinateSystem(t){this.a.setCoordinateSystem(t)}c(){if(!this.coords){this.dataToDisplay={empty:!0};return}this.dataToDisplay=this.a.latLonToSystem(this.coords.lat,this.coords.lon)}};zr=_f([O("location-coordinates",{prop:["coords"],style:R`:host{display:flex;flex-direction:column;align-items:center}.multi-line{display:flex;flex-direction:column;align-items:center;text-align:center}`,template:C`<pretty-select i18n-base="location.coordinates" value="{{coordinateSystem}}" .options="coordinateSystems" @change="changeCoordinateSystem($event.detail)"></pretty-select><div *if="dataToDisplay.lat" class="multi-line"><div>{{ dataToDisplay.lat }}</div><div>{{ dataToDisplay.lon }}</div></div><div *if="dataToDisplay.mgrs" class="multi-line"><div>{{ dataToDisplay.mgrs }}</div></div><div *if="dataToDisplay.utmups" class="multi-line"><div>{{ dataToDisplay.utmups }}</div></div><div *if="dataToDisplay.empty"><i18n-label id="location.coordinates.empty"></i18n-label></div>`})],zr);var yf=Object.getOwnPropertyDescriptor,Ef=(t,i,e,n)=>{for(var s=n>1?void 0:n?yf(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Hr=class{constructor(){this.c=b(Tt),this.f=b(Je),this.a=b(ki),this.location="",this.nameUrlEncode="",this.point=null,this.showQr=!1,this.validPoint=!1}onInit(){const t=this.id;let i;if(t&&(i=this.a.getPoint(+t)),!i){history.go(-1);return}this.point=i,this.b(),this.e(),this.validPoint=!0}onDestroy(){this.d&&this.d.unsubscribe()}averagePoint(){history.pushState({},document.title,`/location-average/${this.point.id}`)}closeQrCode(){this.showQr=!1}deletePoint(){this.a.deletePoint(this.point.id),history.go(-1)}locationChange(t){this.c.fromString(t).subscribe(i=>{i?(this.point.lat=i.lat,this.point.lon=i.lon,this.b(),this.a.updatePoint(this.point),this.e(),this.validPoint=!0):(this.f.popI18n("location.edit.badLocation"),this.validPoint=!1)})}nameChange(t){this.point.name=t,this.b(),this.a.updatePoint(this.point)}navigate(){history.pushState({},document.title,`/location-navigate/${this.point.id}`)}openQrCode(){this.showQr=!0}b(){this.lat=this.point.lat,this.lon=this.point.lon,this.nameUrlEncode=encodeURIComponent(this.point.name)}e(){const t=this.c.latLonToSystem(this.point.lat,this.point.lon);"mgrs"in t?this.location=t.mgrs:"utmups"in t?this.location=t.utmups:this.location=t.latLon,this.locationInput&&(this.locationInput.value=this.location)}};Hr=Ef([O("location-edit-app",{attr:["id"],style:R`.gapAbove{padding-top:.7em}.centered-text{width:100%;text-align:center}.content{height:100%;width:100%;display:flex;flex-direction:column;box-sizing:border-box}.detail{height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;box-sizing:border-box;overflow:hidden}.actions{box-sizing:border-box;width:100%;display:flex;justify-content:space-between}.landscape-buttons{display:flex;justify-content:space-around;width:100%;padding-top:.4em}@media (orientation:portrait){.landscape{display:none}}@media (orientation:landscape){.portrait{display:none}}.no-shrink{flex-shrink:0}.space-between-bottom{display:flex;justify-content:space-between;align-items:flex-end}.full-width{width:100%}`,template:C`<location-wrapper><default-layout *if="point"><div class="content"><div class="actions"><pretty-button @click="openQrCode()" padding="0px"><mini-qr content="geo:{{lat}},{{lon}}?q={{nameUrlEncode}}"></mini-qr></pretty-button><div class="centered-text landscape"><i18n-label id="location.edit.helpSave"></i18n-label></div><pretty-labeled-button @click="averagePoint()" class="portrait" id="location.edit.average"></pretty-labeled-button><pretty-labeled-button @click="deletePoint()" class="portrait" id="location.edit.delete"></pretty-labeled-button></div><div class="detail"><div class="full-width"><div class="no-shrink"><i18n-label id="location.edit.name"></i18n-label></div><pretty-input class="full-width" value="{{point.name}}" @change="nameChange($event.detail)"></pretty-input></div><div class="full-width gapAbove"><div class="no-shrink space-between-bottom"><i18n-label id="location.edit.location"></i18n-label></div><pretty-input class="full-width" value="{{location}}" @change="locationChange($event.detail)" #ref="locationInput" help-html="location.help.html"></pretty-input></div><div class="gapAbove centered-text portrait"><i18n-label id="location.edit.helpSave"></i18n-label></div><div class="landscape landscape-buttons"><pretty-labeled-button @click="deletePoint()" id="location.edit.delete"></pretty-labeled-button><pretty-labeled-button @click="averagePoint()" id="location.edit.average"></pretty-labeled-button></div></div></div><scaling-icon slot="more-buttons" *if="validPoint" @click.stop.prevent="navigate()" href="/navigate.svg"></scaling-icon></default-layout><show-modal *if="showQr" @clickoutside="closeQrCode()"><big-qr @click="closeQrCode()" content="geo:{{lat}},{{lon}}?q={{nameUrlEncode}}"></big-qr></show-modal></location-wrapper>`})],Hr);var Sf=Object.getOwnPropertyDescriptor,Af=(t,i,e,n)=>{for(var s=n>1?void 0:n?Sf(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Gr=class{constructor(){this.b=b(Ft),this.allowedFields=[],this.startPosition=null,this.selectedValue=""}onInit(){const t=["ACCURACY","ALTITUDE","ALTITUDE_ACCURACY","ALTITUDE_AVERAGE","ALTITUDE_MAXIMUM","ALTITUDE_MINIMUM","DISTANCE_TRAVELED","HEADING","HEADING_SMOOTHED","SPEED","SPEED_AVERAGE","SPEED_MAXIMUM","SPEED_SMOOTHED","SPEED_SMOOTHED_MAXIMUM","TIME","TIME_MOVING","TIME_STOPPED"];typeof this.lat=="string"&&typeof this.lon=="string"&&t.push("BEARING","DESTINATION","DISTANCE","TIME_ARRIVAL","TIME_ELAPSED","TIME_REMAINING"),this.a=this.b.field(this.id||"",t),this.allowedFields=t,this.selectedValue=this.a.getItem()||this.default||"UNKNOWN"}selectValue(t){this.selectedValue=t,this.a.setItem(t)}};Gr=Af([O("location-field",{attr:["default","id","lat","lon","name","startTime"],prop:["startPosition"],style:R`:host{max-width:100%}.field-line{display:flex;overflow:hidden;width:100%;justify-content:center;align-items:center}.field-label-wrapper{display:inline-block;padding-right:.4em}.field-value-wrapper{flex-shrink:1;overflow:hidden}.field-label{position:relative;display:inline-block}.hidden-select{position:absolute;inset:0;opacity:0;font-size:inherit;cursor:pointer}`,template:C`<div class="field-line"><div class="field-label-wrapper"><pretty-select i18n-base="location.field" value="{{selectedValue}}" .options="allowedFields" @change="selectValue($event.detail)"></pretty-select></div><div class="field-value-wrapper"><location-field-accuracy *if="selectedValue === 'ACCURACY'"></location-field-accuracy><location-field-altitude *if="selectedValue === 'ALTITUDE'"></location-field-altitude><location-field-altitude-accuracy *if="selectedValue === 'ALTITUDE_ACCURACY'"></location-field-altitude-accuracy><location-field-altitude-average *if="selectedValue === 'ALTITUDE_AVERAGE'"></location-field-altitude-average><location-field-altitude-maximum *if="selectedValue === 'ALTITUDE_MAXIMUM'"></location-field-altitude-maximum><location-field-altitude-minimum *if="selectedValue === 'ALTITUDE_MINIMUM'"></location-field-altitude-minimum><location-field-bearing *if="selectedValue === 'BEARING'" lat="{{lat}}" lon="{{lon}}"></location-field-bearing><location-field-destination *if="selectedValue === 'DESTINATION'" name="{{name}}"></location-field-destination><location-field-distance *if="selectedValue === 'DISTANCE'" lat="{{lat}}" lon="{{lon}}"></location-field-distance><location-field-distance-traveled *if="selectedValue === 'DISTANCE_TRAVELED'"></location-field-distance-traveled><location-field-heading *if="selectedValue === 'HEADING'"></location-field-heading><location-field-heading-smoothed *if="selectedValue === 'HEADING_SMOOTHED'"></location-field-heading-smoothed><location-field-speed *if="selectedValue === 'SPEED'"></location-field-speed><location-field-speed-avg *if="selectedValue === 'SPEED_AVERAGE'"></location-field-speed-avg><location-field-speed-max *if="selectedValue === 'SPEED_MAXIMUM'"></location-field-speed-max><location-field-speed-smoothed *if="selectedValue === 'SPEED_SMOOTHED'"></location-field-speed-smoothed><location-field-speed-smoothed-max *if="selectedValue === 'SPEED_SMOOTHED_MAXIMUM'"></location-field-speed-smoothed-max><location-field-time *if="selectedValue === 'TIME'"></location-field-time><location-field-time-arrival *if="selectedValue === 'TIME_ARRIVAL'" lat="{{lat}}" lon="{{lon}}" .start-position="{{startPosition}}" start-time="{{startTime}}"></location-field-time-arrival><location-field-time-elapsed *if="selectedValue === 'TIME_ELAPSED'" start-time="{{startTime}}"></location-field-time-elapsed><location-field-time-moving *if="selectedValue === 'TIME_MOVING'"></location-field-time-moving><location-field-time-remaining *if="selectedValue === 'TIME_REMAINING'" lat="{{lat}}" lon="{{lon}}" start-time="{{startTime}}"></location-field-time-remaining><location-field-time-stopped *if="selectedValue === 'TIME_STOPPED'"></location-field-time-stopped></div></div>`})],Gr);var xf=Object.getOwnPropertyDescriptor,Df=(t,i,e,n)=>{for(var s=n>1?void 0:n?xf(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Zr=class{constructor(){this.b=b(Tt),this.f=b(de),this.g=b(gt),this.h=b(Y),this.i=b(X),this.j=b(ki),this.points=[],this.position=null}onInit(){this.a=this.h.getPosition().pipe(Xe()).subscribe(t=>{this.position=t,this.c(this.points)}),this.c(this.j.getPoints())}onDestroy(){this.a&&this.a.unsubscribe()}goToAdd(){history.pushState({},document.title,"/location-add")}goToEdit(t){history.pushState({},document.title,`/location-edit/${t.id}`)}sortByDistance(){this.points=this.d(this.points)}sortByName(){this.points=this.e(this.points)}d(t){return t.sort((i,e)=>i.meters-e.meters)}e(t){return t.sort((i,e)=>i.name.localeCompare(e.name))}c(t){const i=this.position;if(!i||!i.success){this.k(t);return}const e=i,n=t.map(s=>{const r=this.b.distance(s,e),a=this.g.metersToString(r),o=this.b.bearing(e,s,!0),f=this.f.toCompassPoint(o);return fe(Ot({},s),{meters:r,location:`${a} ${f}`})});this.points=this.d(n)}k(t){const i=t.map(e=>fe(Ot({},e),{meters:0,location:this.i.get("location.waypoints.unknownLocation")}));this.points=this.e(i)}};Zr=Df([O("location-list-app",{style:R`.full-flex{display:flex;height:100%;width:100%;justify-content:center;align-items:center}.content{height:100%;width:100%;padding:1em;display:flex;flex-direction:column;justify-content:center;align-items:center;box-sizing:border-box;overflow:hidden}.point-list-wrapper{width:100%;max-height:100%;border:var(--table-border);display:flex;flex-direction:column;box-sizing:border-box}.point-list-weader{flex-shrink:0;width:100%;padding:.5em;box-sizing:border-box;display:flex;justify-content:space-between;border:var(--table-border);font-weight:700;overflow:hidden}.point-list{overflow:auto}.point-list-line{width:100%;justify-content:space-between;display:flex;border:var(--table-border);box-sizing:border-box}.name{text-align:left;flex-shrink:1;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;padding:0 .2em}.location{box-sizing:border-box;white-space:nowrap;padding:0 .2em 0 .8em}`,template:C`<location-wrapper><default-layout><div class="full-flex"><div *if="points.length" class="point-list-wrapper"><div class="point-list-weader"><div class="name" @click="sortByName()"><i18n-label id="location.waypoints.name"></i18n-label></div><div class="location" @click="sortByDistance()"><i18n-label id="location.waypoints.location"></i18n-label></div></div><div class="point-list"><div *for="waypoint of points" class="point-list-line" @click.stop.prevent="goToEdit(waypoint)"><div class="name">{{ waypoint.name }}</div><div class="location">{{ waypoint.location }}</div></div></div></div><div *if="!points.length"><i18n-label id="location.waypoints.noWaypoints"></i18n-label></div></div><scaling-icon slot="more-buttons" @click.stop.prevent="goToAdd()" href="/add.svg"></scaling-icon></default-layout></location-wrapper>`})],Zr);var Tf=Object.getOwnPropertyDescriptor,Cf=(t,i,e,n)=>{for(var s=n>1?void 0:n?Tf(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Vr=class{constructor(){this.a=!1,this.e=b(Y),this.d=b(Ft),this.c=null,this.b=b(Li),this.f=b(ki),this.allowWakeLock=!1,this.startPosition=null,this.startTime=Date.now(),this.point=null,this.wakeLockClass=""}onInit(){const t=this.id;if(t&&(this.point=this.f.getPoint(+t)),!this.point){ye(this,"edit",this.id);return}this.b.availabilityState().subscribe(i=>{i===T.ALLOWED&&(this.allowWakeLock=!0,this.d.navigationWakeLock.getItem()&&!this.a&&this.toggleWakeLock())}),this.c=this.e.getPositionSuccess().pipe(Xe()).subscribe(i=>this.startPosition=i)}onDestroy(){this.a&&this.b.release(),this.c&&this.c.unsubscribe()}toggleWakeLock(){this.a=!this.a,this.d.navigationWakeLock.setItem(this.a),this.a?(this.wakeLockClass="enabled",this.b.request()):(this.wakeLockClass="",this.b.release())}};Vr=Cf([O("location-navigate-app",{attr:["id"],style:R`.navigate{padding:5px}.content{height:100%;width:100%;padding:1em;display:flex;flex-direction:column;justify-content:center;align-items:center;box-sizing:border-box;overflow:hidden;gap:10px}.type-and-arrow{display:flex;flex-direction:column;justify-content:center;align-items:center;flex-grow:1;text-align:center}@media (orientation:portrait){.type-and-arrow{width:100%}}@media (orientation:landscape){.wrapper{flex-direction:row-reverse}.buttons{flex-direction:column-reverse}.content{flex-direction:row}.type-and-arrow{height:100%}}.field{display:flex;max-width:100%}.fields{overflow:hidden;display:flex;flex-direction:column;justify-content:center;align-items:center;max-width:100%}.navigation-arrow{flex-grow:1;width:100%}.gap-above{padding-top:.4em}.enabled{color:var(--button-fg-color-enabled)}`,template:C`<location-wrapper><default-layout><div class="content"><div class="type-and-arrow"><navigation-type></navigation-type><navigation-arrow class="navigation-arrow" lat="{{point.lat}}" lon="{{point.lon}}"></navigation-arrow></div><div class="gap-above fields"><div class="field"><location-field id="navigate.1" default="DISTANCE" lat="{{point.lat}}" lon="{{point.lon}}" start-time="{{startTime}}" name="{{point.name}}"></location-field></div><div class="field"><location-field id="navigate.2" default="DESTINATION" lat="{{point.lat}}" lon="{{point.lon}}" start-time="{{startTime}}" name="{{point.name}}"></location-field></div><div class="field"><location-field id="navigate.3" default="SPEED" lat="{{point.lat}}" lon="{{point.lon}}" start-time="{{startTime}}" name="{{point.name}}"></location-field></div><div class="field"><location-field id="navigate.4" default="HEADING" lat="{{point.lat}}" lon="{{point.lon}}" start-time="{{startTime}}" name="{{point.name}}"></location-field></div><div class="field"><location-field id="navigate.5" default="ACCURACY" lat="{{point.lat}}" lon="{{point.lon}}" start-time="{{startTime}}" name="{{point.name}}"></location-field></div></div></div><div slot="more-buttons"><scaling-icon *if="allowWakeLock" class="{{wakeLockClass}}" @click.stop.prevent="toggleWakeLock()" href="/wake-lock.svg"></scaling-icon></div></default-layout></location-wrapper>`})],Vr);var Of=Object.getOwnPropertyDescriptor,Rf=(t,i,e,n)=>{for(var s=n>1?void 0:n?Of(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Wr=class{};Wr=Rf([O("location-unavailable",{style:R`:host{height:100%;width:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center}.heading{font-size:2em}.message{max-width:90%}`,template:C`<div></div><div class="heading"><i18n-label id="location.unavailable"></i18n-label></div><div class="message"><i18n-label id="location.unavailableMessage"></i18n-label></div><back-button></back-button><div></div>`})],Wr);var Mf=Object.getOwnPropertyDescriptor,Pf=(t,i,e,n)=>{for(var s=n>1?void 0:n?Mf(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Qr=class{constructor(){this.b=b(Y),this.c=b(Ee),this.a=new ut,this.control="current",this.explainAsk=!1,this.explainDeny=!1,this.explainError=!1,this.explainUnavailable=!1,this.showControls=!1}onInit(){this.b.availabilityState().pipe(tt(this.a),Bt(t=>(this.explainAsk=t===T.PROMPT,this.explainDeny=t===T.DENIED,this.explainUnavailable=t===T.UNAVAILABLE,this.explainError=t===T.ERROR,this.showControls=t===T.ALLOWED,this.showControls?this.b.getPosition():$(null)))).subscribe()}onDestroy(){this.a.next(null),this.a.complete()}grant(){this.explainAsk=!1,this.c.geolocation(!0)}setControl(t,i){this.waypointId=i,this.control=t}};Qr=Pf([O("location-wrapper",{style:R`.full{height:100%;width:100%;font-size:3em}@media (max-width:960px){.full{font-size:2.5em}}@media (max-width:720px){.full{font-size:1.8em}}@media (max-width:480px){.full{font-size:1.3em}}@media (max-width:360px){.full{font-size:1em}}@media (orientation:landscape){@media (max-height:720px){.full{font-size:2em}}.wrapper{flex-direction:row-reverse}.buttons{flex-direction:column-reverse}@media (max-width:960px){.full{font-size:1.3em}}@media (max-width:720px){.full{font-size:1.2em}}@media (max-width:480px){.full{font-size:1.1em}}@media (max-width:360px){.full{font-size:1em}}}`,template:C`<permission-prompt *if="explainAsk" @grant.stop.prevent="grant()" message-id="location.explainAsk"></permission-prompt><permission-denied *if="explainDeny"></permission-denied><location-unavailable *if="explainUnavailable"></location-unavailable><permission-error *if="explainError"></permission-error><div *if="showControls" class="full"><slot></slot></div>`,useShadow:!0})],Qr);const Gi=[Re.COMPASS,Re.DIRECTION_OF_TRAVEL,Re.NORTH_UP];class ic{constructor(){this.b=b(Ft),this.a=new gn(Gi[0]);const i=this.b.navigationType.getItem();i&&this.a.next(i)}getObservable(){return this.a.asObservable()}toggleSetting(){const i=(Gi.indexOf(this.a.value)+1)%Gi.length,e=Gi[i];this.a.next(e),this.b.navigationType.setItem(e)}}var If=Object.getOwnPropertyDescriptor,Lf=(t,i,e,n)=>{for(var s=n>1?void 0:n?If(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let qr=class{constructor(){this.g=b(wn),this.j=b(Tt),this.b=null,this.c=0,this.d=0,this.e=null,this.k=b(Y),this.h=0,this.i=0,this.l=b(ic),this.a=new ut,this.compassRose=null,this.directionArrow=null}onInit(){this.h=parseFloat(this.lat||"0"),this.i=parseFloat(this.lon||"0"),this.k.getPosition().pipe(tt(this.a)).subscribe(t=>{t&&t.success&&(this.b=t,isNaN(t.heading)||(this.d=t.heading),this.f())}),this.l.getObservable().pipe(tt(this.a)).subscribe(t=>{this.e=t,this.f()}),this.g.availabilityState().pipe(Bt(t=>t===T.ALLOWED?this.g.getCompassBearing():yl),tt(this.a)).subscribe(t=>{this.c=t,this.f()})}ngOnDestroy(){this.a.next(null),this.a.complete()}f(){if(!this.e||!this.b)return;let t=0,i=0;const e=this.j.bearing(this.b,{lat:this.h,lon:this.i},!0);switch(this.e){case Re.COMPASS:t=Math.round(-this.c),i=Math.round(-this.c+e);break;case Re.DIRECTION_OF_TRAVEL:t=-Math.round(this.d),i=Math.round(e-this.d);break;default:i=Math.round(e);break}this.compassRose&&(this.compassRose.style.transform=`rotate(${t}deg)`),this.directionArrow&&(this.directionArrow.style.transform=`rotate(${i}deg)`)}};qr=Lf([O("navigation-arrow",{attr:["lat","lon"],style:R`:host{display:flex;overflow:hidden;justify-content:center;align-items:center;position:relative}.container{position:absolute;aspect-ratio:1/1;margin:auto;inset:0;max-width:100%;max-height:100%}.compassRose{position:absolute;width:100%;height:100%}.directionArrow{position:absolute;width:100%;height:100%;padding:30%;box-sizing:border-box;color:var(--navigate-color)}`,template:C`<div class="container"><load-svg #ref="compassRose" class="compassRose" href="/compass-rose.svg" #ref="compassRose"></load-svg><div class="directionArrow"><load-svg #ref="directionArrow" href="/navigation.svg" #ref="directionArrow"></load-svg></div></div>`})],qr);var kf=Object.getOwnPropertyDescriptor,Uf=(t,i,e,n)=>{for(var s=n>1?void 0:n?kf(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Kr=class{constructor(){this.b=b(ic),this.value="unknownValue"}onInit(){this.a=this.b.getObservable().subscribe(t=>{this.value=t})}onDestroy(){this.a&&this.a.unsubscribe()}toggleSetting(){this.b.toggleSetting()}};Kr=Uf([O("navigation-type",{style:R``,template:C`<changeable-setting @click="toggleSetting()"><i18n-label id="location.navigation.{{value}}"></i18n-label></changeable-setting>`})],Kr);var Nf=Object.getOwnPropertyDescriptor,$f=(t,i,e,n)=>{for(var s=n>1?void 0:n?Nf(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Yr=class{constructor(){this.a=b(gt),this.c=b(Y),this.d=b(X),this.b=null;const t=this.d.get("location.field.unknownValue");this.value=t,this.b=Ve([this.c.getPosition(),this.a.getCurrentSetting()]).subscribe(([i])=>{i&&i.success?this.value=this.a.metersToString(i.accuracy):this.value=t})}onDestroy(){this.b&&this.b.unsubscribe()}toggleDistanceSystem(){this.a.toggleSystem()}};Yr=$f([O("location-field-accuracy",{style:R``,template:C`<changeable-setting @click="toggleDistanceSystem()">{{value}}</changeable-setting>`})],Yr);var Bf=Object.getOwnPropertyDescriptor,Ff=(t,i,e,n)=>{for(var s=n>1?void 0:n?Bf(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Xr=class{constructor(){this.a=b(gt),this.c=b(Y),this.d=b(X),this.b=null;const t=this.d.get("location.field.unknownValue");this.value=t,this.b=Ve([this.c.getPosition(),this.a.getCurrentSetting()]).subscribe(([i])=>{i&&i.success?i.altitudeAccuracy===null?this.value=t:this.value=this.a.metersToString(i.altitudeAccuracy):this.value=t})}onDestroy(){this.b&&this.b.unsubscribe()}toggleDistanceSystem(){this.a.toggleSystem()}};Xr=Ff([O("location-field-altitude-accuracy",{style:R``,template:C`<changeable-setting @click="toggleDistanceSystem()">{{value}}</changeable-setting>`})],Xr);var jf=Object.getOwnPropertyDescriptor,zf=(t,i,e,n)=>{for(var s=n>1?void 0:n?jf(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Jr=class{constructor(){this.b=b(gt),this.c=b(Y),this.d=b(X),this.a=null;const t=this.d.get("location.field.unknownValue");this.value=t,this.a=this.c.getPosition().subscribe(i=>{i&&i.success&&i.altitude!==null?this.value=this.b.metersToString(i.altitude,{useSmallUnits:!0}):this.value=t})}onDestroy(){this.a&&this.a.unsubscribe()}toggleDistanceSystem(){this.b.toggleSystem()}};Jr=zf([O("location-field-altitude",{style:R``,template:C`<changeable-setting @click="toggleDistanceSystem()">{{value}}</changeable-setting>`})],Jr);var Hf=Object.getOwnPropertyDescriptor,Gf=(t,i,e,n)=>{for(var s=n>1?void 0:n?Hf(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let ta=class{constructor(){this.b=b(gt),this.c=b(Y),this.d=b(X),this.a=null;const t=this.d.get("location.field.unknownValue");this.value=t,this.a=this.c.getPosition().subscribe(i=>{i&&i.success&&i.altitudeCount?this.value=this.b.metersToString(i.altitudeSum/i.altitudeCount,{useSmallUnits:!0}):this.value=t})}onDestroy(){this.a&&this.a.unsubscribe()}toggleDistanceSystem(){this.b.toggleSystem()}};ta=Gf([O("location-field-altitude-average",{style:R``,template:C`<changeable-setting @click="toggleDistanceSystem()">{{value}}</changeable-setting>`})],ta);var Zf=Object.getOwnPropertyDescriptor,Vf=(t,i,e,n)=>{for(var s=n>1?void 0:n?Zf(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let ea=class{constructor(){this.b=b(gt),this.c=b(Y),this.d=b(X),this.a=null;const t=this.d.get("location.field.unknownValue");this.value=t,this.a=this.c.getPosition().subscribe(i=>{i&&i.success&&!isNaN(i.altitudeMaximum)?this.value=this.b.metersToString(i.altitudeMaximum,{useSmallUnits:!0}):this.value=t})}onDestroy(){this.a&&this.a.unsubscribe()}toggleDistanceSystem(){this.b.toggleSystem()}};ea=Vf([O("location-field-altitude-maximum",{style:R``,template:C`<changeable-setting @click="toggleDistanceSystem()">{{value}}</changeable-setting>`})],ea);var Wf=Object.getOwnPropertyDescriptor,Qf=(t,i,e,n)=>{for(var s=n>1?void 0:n?Wf(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let ia=class{constructor(){this.b=b(gt),this.c=b(Y),this.d=b(X),this.a=null;const t=this.d.get("location.field.unknownValue");this.value=t,this.a=this.c.getPosition().subscribe(i=>{i&&i.success&&!isNaN(i.altitudeMinimum)?this.value=this.b.metersToString(i.altitudeMinimum,{useSmallUnits:!0}):this.value=t})}onDestroy(){this.a&&this.a.unsubscribe()}toggleDistanceSystem(){this.b.toggleSystem()}};ia=Qf([O("location-field-altitude-minimum",{style:R``,template:C`<changeable-setting @click="toggleDistanceSystem()">{{value}}</changeable-setting>`})],ia);var qf=Object.getOwnPropertyDescriptor,Kf=(t,i,e,n)=>{for(var s=n>1?void 0:n?qf(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let na=class{constructor(){this.b=b(Tt),this.c=b(de),this.d=b(Y),this.e=b(X),this.a=null;const t=this.e.get("location.field.unknownValue");this.value=t}onInit(){const t=parseFloat(this.lat||""),i=parseFloat(this.lon||""),e=this.value;this.a=this.d.getPosition().subscribe(n=>{if(n&&n.success){const s=this.b.bearing(n,{lat:t,lon:i});this.value=this.c.toHeadingDirection(s)}else this.value=e})}onDestroy(){this.a&&this.a.unsubscribe()}};na=Kf([O("location-field-bearing",{attr:["lat","lon"],style:R``,template:C`{{value}}`})],na);var Yf=Object.getOwnPropertyDescriptor,Xf=(t,i,e,n)=>{for(var s=n>1?void 0:n?Yf(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let sa=class{};sa=Xf([O("location-field-destination",{attr:["name"],style:R`.no-overflow{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}`,template:C`<div class="no-overflow">{{name}}</div>`})],sa);var Jf=Object.getOwnPropertyDescriptor,tp=(t,i,e,n)=>{for(var s=n>1?void 0:n?Jf(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let ra=class{constructor(){this.c=b(Tt),this.b=b(gt),this.d=b(Y),this.e=b(X),this.a=null;const t=this.e.get("location.field.unknownValue");this.value=t}onInit(){const t=parseFloat(this.lat||""),i=parseFloat(this.lon||""),e=this.value;this.a=this.d.getPosition().subscribe(n=>{if(n&&n.success){const s=this.c.distance({lon:i,lat:t},n);this.value=this.b.metersToString(s)}else this.value=e})}onDestroy(){this.a&&this.a.unsubscribe()}toggleDistanceSystem(){this.b.toggleSystem()}};ra=tp([O("location-field-distance",{attr:["lat","lon"],style:R``,template:C`<changeable-setting @click="toggleDistanceSystem()">{{value}}</changeable-setting>`})],ra);var ep=Object.getOwnPropertyDescriptor,ip=(t,i,e,n)=>{for(var s=n>1?void 0:n?ep(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let aa=class{constructor(){this.b=b(gt),this.c=b(Y),this.d=b(X),this.a=null;const t=this.d.get("location.field.unknownValue");this.value=t}onInit(){const t=this.value;this.a=this.c.getPosition().subscribe(i=>{i&&i.success?this.value=this.b.metersToString(i.distanceTraveled):this.value=t})}onDestroy(){this.a&&this.a.unsubscribe()}toggleDistanceSystem(){this.b.toggleSystem()}};aa=ip([O("location-field-distance-traveled",{style:R``,template:C`<changeable-setting @click="toggleDistanceSystem()">{{value}}</changeable-setting>`})],aa);var np=Object.getOwnPropertyDescriptor,sp=(t,i,e,n)=>{for(var s=n>1?void 0:n?np(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let oa=class{constructor(){this.b=b(de),this.c=b(Y),this.d=b(X),this.a=null;const t=this.d.get("location.field.unknownValue");this.value=t,this.a=this.c.getPosition().subscribe(i=>{i&&i.success?isNaN(i.heading)?this.value=t:this.value=this.b.toHeadingDirection(i.heading):this.value=t})}onDestroy(){this.a&&this.a.unsubscribe()}};oa=sp([O("location-field-heading",{style:R``,template:C`{{value}}`})],oa);var rp=Object.getOwnPropertyDescriptor,ap=(t,i,e,n)=>{for(var s=n>1?void 0:n?rp(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let la=class{constructor(){this.b=b(de),this.c=b(Y),this.d=b(X),this.a=null;const t=this.d.get("location.field.unknownValue");this.value=t,this.a=this.c.getPosition().subscribe(i=>{i&&i.success?isNaN(i.headingSmoothed)?this.value=t:this.value=this.b.toHeadingDirection(i.headingSmoothed):this.value=t})}onDestroy(){this.a&&this.a.unsubscribe()}};la=ap([O("location-field-heading-smoothed",{style:R``,template:C`{{value}}`})],la);var op=Object.getOwnPropertyDescriptor,lp=(t,i,e,n)=>{for(var s=n>1?void 0:n?op(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let ca=class{constructor(){this.a=b(gt),this.c=b(Y),this.d=b(X),this.b=null;const t=this.d.get("location.field.unknownValue");this.value=t,this.c.getPosition().subscribe(i=>{i&&i.success?this.value=this.a.metersToString(i.speed,{isSpeed:!0}):this.value=t})}onDestroy(){this.b&&this.b.unsubscribe()}toggleDistanceSystem(){this.a.toggleSystem()}};ca=lp([O("location-field-speed",{style:R``,template:C`<changeable-setting @click="toggleDistanceSystem()">{{value}}</changeable-setting>`})],ca);var cp=Object.getOwnPropertyDescriptor,hp=(t,i,e,n)=>{for(var s=n>1?void 0:n?cp(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let ha=class{constructor(){this.a=b(gt),this.c=b(Y),this.d=b(X),this.b=null;const t=this.d.get("location.field.unknownValue");this.value=t,this.c.getPosition().subscribe(i=>{i&&i.success?this.value=this.a.metersToString(i.speedAvg,{isSpeed:!0}):this.value=t})}onDestroy(){this.b&&this.b.unsubscribe()}toggleDistanceSystem(){this.a.toggleSystem()}};ha=hp([O("location-field-speed-avg",{style:R``,template:C`<changeable-setting @click="toggleDistanceSystem()">{{value}}</changeable-setting>`})],ha);var up=Object.getOwnPropertyDescriptor,dp=(t,i,e,n)=>{for(var s=n>1?void 0:n?up(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let ua=class{constructor(){this.a=b(gt),this.c=b(Y),this.d=b(X),this.b=null;const t=this.d.get("location.field.unknownValue");this.value=t,this.c.getPosition().subscribe(i=>{i&&i.success?this.value=this.a.metersToString(i.speedMax,{isSpeed:!0}):this.value=t})}onDestroy(){this.b&&this.b.unsubscribe()}toggleDistanceSystem(){this.a.toggleSystem()}};ua=dp([O("location-field-speed-max",{style:R``,template:C`<changeable-setting @click="toggleDistanceSystem()">{{value}}</changeable-setting>`})],ua);var fp=Object.getOwnPropertyDescriptor,pp=(t,i,e,n)=>{for(var s=n>1?void 0:n?fp(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let da=class{constructor(){this.a=b(gt),this.c=b(Y),this.d=b(X),this.b=null;const t=this.d.get("location.field.unknownValue");this.value=t,this.c.getPosition().subscribe(i=>{i&&i.success?this.value=this.a.metersToString(i.speedSmoothed,{isSpeed:!0}):this.value=t})}onDestroy(){this.b&&this.b.unsubscribe()}toggleDistanceSystem(){this.a.toggleSystem()}};da=pp([O("location-field-speed-smoothed",{style:R``,template:C`<changeable-setting @click="toggleDistanceSystem()">{{value}}</changeable-setting>`})],da);var vp=Object.getOwnPropertyDescriptor,gp=(t,i,e,n)=>{for(var s=n>1?void 0:n?vp(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let fa=class{constructor(){this.a=b(gt),this.c=b(Y),this.d=b(X),this.b=null;const t=this.d.get("location.field.unknownValue");this.value=t,this.c.getPosition().subscribe(i=>{i&&i.success?this.value=this.a.metersToString(i.speedSmoothedMax,{isSpeed:!0}):this.value=t})}onDestroy(){this.b&&this.b.unsubscribe()}toggleDistanceSystem(){this.a.toggleSystem()}};fa=gp([O("location-field-speed-smoothed-max",{style:R``,template:C`<changeable-setting @click="toggleDistanceSystem()">{{value}}</changeable-setting>`})],fa);class nc{callEverySecond(i){let e;const n=()=>{i(),e=setTimeout(n,1e3-Date.now()%1e3)};return n(),()=>clearTimeout(e)}}var mp=Object.getOwnPropertyDescriptor,bp=(t,i,e,n)=>{for(var s=n>1?void 0:n?mp(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let pa=class{constructor(){this.c=b(nc),this.b=b(Se),this.a=this.c.callEverySecond(()=>{this.value=this.b.formatTimeOfDay(Date.now())})}onDestroy(){this.a()}toggleTimeSystem(){this.b.toggleSystem()}};pa=bp([O("location-field-time",{style:R``,template:C`<changeable-setting @click="toggleTimeSystem()">{{value}}</changeable-setting>`})],pa);var wp=Object.getOwnPropertyDescriptor,_p=(t,i,e,n)=>{for(var s=n>1?void 0:n?wp(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let va=class{constructor(){this.b=b(Tt),this.d=b(Y),this.e=b(X),this.a=null,this.c=b(Se),this.value=""}onInit(){const t=this.e.get("location.field.unknownValue"),i=parseFloat(this.lat||""),e=parseFloat(this.lon||""),n=parseInt(this.startTime||"",10);this.value=t,this.a=this.d.getPosition().subscribe(s=>{if(s&&s.success&&this.startPosition&&s!==this.startPosition){const r=this.b.distance(this.startPosition,s),a=this.b.distance({lat:i,lon:e},s),o=s.timestamp-n,f=r/o;if(f>0){const c=a/f;this.value=this.c.formatTimeOfDay(Date.now()+c)}}else this.value=t})}onDestroy(){this.a&&this.a.unsubscribe()}toggleTimeSystem(){this.c.toggleSystem()}};va=_p([O("location-field-time-arrival",{attr:["lat","lon","startPosition","startTime"],style:R``,template:C`<changeable-setting @click="toggleTimeSystem()">{{value}}</changeable-setting>`})],va);var yp=Object.getOwnPropertyDescriptor,Ep=(t,i,e,n)=>{for(var s=n>1?void 0:n?yp(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let ga=class{constructor(){this.c=b(nc),this.b=b(Se)}onInit(){const t=parseInt(this.startTime||"",10);this.a=this.c.callEverySecond(()=>{this.value=this.b.formatTime(Date.now()-t)})}onDestroy(){this.a&&this.a()}toggleTimeSystem(){this.b.toggleSystem()}};ga=Ep([O("location-field-time-elapsed",{attr:["startTime"],style:R``,template:C`{{value}}`})],ga);var Sp=Object.getOwnPropertyDescriptor,Ap=(t,i,e,n)=>{for(var s=n>1?void 0:n?Sp(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let ma=class{constructor(){this.b=b(Y),this.c=b(X),this.a=null,this.d=b(Se);const t=this.c.get("location.field.unknownValue");this.value=t,this.a=this.b.getPosition().subscribe(i=>{i&&i.success?this.value=this.d.formatTime(i.timeMoving):this.value=t})}onDestroy(){this.a&&this.a.unsubscribe()}};ma=Ap([O("location-field-time-moving",{style:R``,template:C`{{value}}`})],ma);var xp=Object.getOwnPropertyDescriptor,Dp=(t,i,e,n)=>{for(var s=n>1?void 0:n?xp(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let ba=class{constructor(){this.b=b(Y),this.c=b(X),this.a=null,this.d=b(Se);const t=this.c.get("location.field.unknownValue");this.value=t,this.a=this.b.getPosition().subscribe(i=>{i&&i.success?this.value=this.d.formatTime(i.timeStopped):this.value=t})}onDestroy(){this.a&&this.a.unsubscribe()}};ba=Dp([O("location-field-time-stopped",{style:R``,template:C`{{value}}`})],ba);var Tp=Object.getOwnPropertyDescriptor,Cp=(t,i,e,n)=>{for(var s=n>1?void 0:n?Tp(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let wa=class{constructor(){this.b=b(Tt),this.c=b(Y),this.d=b(X),this.a=null,this.e=b(Se),this.value=""}onInit(){const t=this.d.get("location.field.unknownValue"),i=parseFloat(this.lat||""),e=parseFloat(this.lon||""),n=parseInt(this.startTime||"",10);this.value=t,this.a=this.c.getPositionSuccess().subscribe(s=>{if(s&&s.success&&this.startPosition&&s!==this.startPosition){const r=this.b.distance(this.startPosition,s),a=this.b.distance({lat:i,lon:e},s),o=s.timestamp-n,f=r/o;if(f>0){const c=a/f;this.value=this.e.formatTime(c)}}else this.value=t})}onDestroy(){this.a&&this.a.unsubscribe()}};wa=Cp([O("location-field-time-remaining",{attr:["lat","lon","startTime"],prop:["startPosition"],style:R``,template:C`{{value}}`})],wa);var Op=Object.getOwnPropertyDescriptor,Rp=(t,i,e,n)=>{for(var s=n>1?void 0:n?Op(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let _a=class{constructor(){this.g=b(Wl),this.h=null,this.i=null,this.a=[],this.e=new ut,this.f=b(ti),this.k=null,this.b=null,this.c=null,this.l=null,this.d=null,this.explainAsk=!1,this.explainDeny=!1,this.explainUnavailable=!1,this.showControls=!1,this.torchAvailable=!1,this.torchClass="",this.torchEnabled=!1}onInit(){this.g.availabilityState(!0).pipe(tt(this.e)).subscribe(t=>{this.explainAsk=t===T.PROMPT,this.explainDeny=t===T.DENIED,this.explainUnavailable=t===T.UNAVAILABLE;const i=t===T.ALLOWED;this.showControls!==i&&(this.showControls=i,this.showControls?this.p():this.q())}),this.f.availabilityState(!0).pipe(tt(this.e)).subscribe(t=>{this.torchAvailable=t===T.ALLOWED})}onDestroy(){this.m(1),this.e.next(null),this.e.complete()}grant(){this.explainAsk=!1,this.g.prompt()}pointerDown(t){this.a.push(t),this.h=this.n(),this.i=this.k}pointerMove(t){for(let o=0;o<this.a.length;o+=1)this.a[o].pointerId===t.pointerId&&(this.a[o]=t);const i=this.n();if(!i||!this.h||!this.i||!this.l||!this.b||!this.c||!this.d)return;const n=(i-this.h)/this.l,s=(this.b-this.c)/this.d,r=n*s,a=this.i+Math.floor(r)*this.d;this.m(a)}pointerUp(t){this.a=this.a.filter(i=>i.pointerId!==t.pointerId)}toggleTorch(){this.torchEnabled?this.f.turnOff():this.f.turnOn(),this.o()}q(){this.k=null,this.c=null,this.b=null,this.d=null}n(){if(this.a.length===2){const t=this.a[0],i=this.a[1];return Math.sqrt(Math.pow(i.clientX-t.clientX,2)+Math.pow(i.clientY-t.clientY,2))}return null}o(){this.f.currentStatus().then(t=>{this.torchEnabled=t,this.torchClass=t?"enabled":""})}p(){this.g.getStream().then(t=>{const i=t.getVideoTracks()[0];if(!i)return;const e=i.getCapabilities().zoom;e&&(this.c=e.min,this.b=e.max,this.d=e.step,this.j=i,this.m(this.b)),this.video&&(this.video.srcObject=t),this.l=Math.min(window.screen.width+window.screen.height)/2,this.o()})}m(t){!this.b||!this.c||!this.j||(t=Math.min(this.b,t),t=Math.max(this.c,t),this.k=t,this.j.applyConstraints({advanced:[{zoom:t}]}))}};_a=Rp([O("magnifier-app",{style:R`video{height:100%;width:100%;object-fit:cover}default-layout{touch-action:none}.enabled{color:var(--button-fg-color-enabled)}`,template:C`<permission-prompt *if="explainAsk" @grant.stop.prevent="grant()" message-id="magnifier.explainAsk"></permission-prompt><permission-denied *if="explainDeny"></permission-denied><camera-unavailable *if="explainUnavailable"></camera-unavailable><video *if="showControls" #ref="video" autoplay muted playsinline></video><default-layout *if="showControls" @pointerdown.stop.prevent="pointerDown($event)" @pointermove.stop.prevent="pointerMove($event)" @pointerup.stop.prevent="pointerUp($event)" @pointercancel.stop.prevent="pointerUp($event)" @pointerout.stop.prevent="pointerUp($event)" @pointerleave.stop.prevent="pointerUp($event)"><scaling-icon slot="more-buttons" *if="torchAvailable" @click.stop.prevent="toggleTorch()" class="{{torchClass}}" href="/flashlight.svg"></scaling-icon></default-layout>`})],_a);var Mp=Object.getOwnPropertyDescriptor,Pp=(t,i,e,n)=>{for(var s=n>1?void 0:n?Mp(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let ya=class{constructor(){this.b=b(Ls),this.a=new ut,this.explainAsk=!1,this.explainDeny=!1,this.explainUnavailable=!1,this.scanning=!1,this.showControls=!1}onInit(){this.b.availabilityState(!0).pipe(tt(this.a)).subscribe(t=>{this.explainAsk=t===T.PROMPT,this.explainDeny=t===T.DENIED,this.explainUnavailable=t===T.UNAVAILABLE||t===T.ERROR,this.showControls=t===T.ALLOWED,this.showControls?this.d():this.e()})}onDestroy(){this.a.next(null),this.a.complete()}grant(){this.explainAsk=!1,this.b.prompt()}d(){this.scanning||(this.scanning=!0,this.c=this.b.scan().pipe(tt(this.a)).subscribe(t=>{this.lastRead=t}))}e(){this.scanning&&(this.scanning=!1,this.c.unsubscribe())}};ya=Pp([O("nfc-app",{style:R`.enabled{color:var(--button-fg-color-enabled)}.scanning{flex-grow:1;display:flex;justify-content:center;align-items:center;font-size:2em}`,template:C`<permission-prompt *if="explainAsk" @grant.stop.prevent="grant()" message-id="nfc.explainAsk"></permission-prompt><permission-denied *if="explainDeny"></permission-denied><nfc-unavailable *if="explainUnavailable"></nfc-unavailable><default-layout *if="showControls" frame><nfc-scan-result .scan-result="lastRead"></nfc-scan-result></default-layout>`})],ya);var Ip=Object.getOwnPropertyDescriptor,Lp=(t,i,e,n)=>{for(var s=n>1?void 0:n?Ip(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Ea=class{decode(){var i,e;return new TextDecoder(((i=this.record)==null?void 0:i.encoding)||"utf-8").decode((e=this.record)==null?void 0:e.data)}};Ea=Lp([O("nfc-record",{prop:["record"],style:R`:host{display:block}.breakWord{word-wrap:break-word}.data{padding:0 1em}`,template:C`<div *if="record" class="breakWord"><i18n-label id="nfc.record.recordType"></i18n-label>{{ record.recordType }}</div><div *if="record && record.mediaType" class="breakWord"><i18n-label id="nfc.record.mediaType"></i18n-label>{{ record.mediaType }}</div><div *if="record && record.id" class="breakWord"><i18n-label id="nfc.record.id"></i18n-label>{{ record.id }}</div><div *if="record && record.encoding" class="breakWord"><i18n-label id="nfc.record.encoding"></i18n-label>{{ record.encoding }}</div><div *if="record && record.lang" class="breakWord"><i18n-label id="nfc.record.lang"></i18n-label>{{ record.lang }}</div><div *if="record && record.recordType === 'text'" class="data breakWord">{{ decode() }}</div><div *if="record && record.recordType === 'url'" class="data breakWord"><styled-link href="{{ decode() }}" target="_blank">{{ decode() }}</styled-link></div><div *if="record && record.recordType === 'absolute-url'" class="data breakWord"><styled-link href="{{ decode() }}" target="_blank">{{ decode() }}</styled-link></div>`})],Ea);var kp=Object.getOwnPropertyDescriptor,Up=(t,i,e,n)=>{for(var s=n>1?void 0:n?kp(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Sa=class{};Sa=Up([O("nfc-scan-result",{prop:["scanResult"],style:R`.breakWord{word-wrap:break-word}.gapAbove{padding-top:.3em}`,template:C`<div *if="scanResult && scanResult.ready"><i18n-label id="nfc.scanResult.scanning"></i18n-label></div><div *if="scanResult && !scanResult.ready"><i18n-label id="nfc.scanResult.timestamp"></i18n-label>{{ scanResult.timestamp.toLocaleString() }}</div><div *if="scanResult && scanResult.readError"><i18n-label id="nfc.scanResult.readError"></i18n-label></div><div *if="scanResult && scanResult.initializeError"><i18n-label id="nfc.scanResult.initializeError"></i18n-label></div><div *if="scanResult && scanResult.serialNumber" class="breakWord"><i18n-label id="nfc.scanResult.serialNumber"></i18n-label>{{ scanResult.serialNumber }}</div><div *if="scanResult && scanResult.records"><i18n-label id="nfc.scanResult.numberOfRecords"></i18n-label>{{ scanResult.records.length }}</div><div *if="scanResult && scanResult.records"><nfc-record *for="record of scanResult.records" .record="record" class="gapAbove"></nfc-record></div>`})],Sa);var Np=Object.getOwnPropertyDescriptor,$p=(t,i,e,n)=>{for(var s=n>1?void 0:n?Np(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Aa=class{};Aa=$p([O("nfc-unavailable",{style:R`.wrapper{height:100%;width:100%;display:flex;flex-direction:column;justify-content:space-evenly;align-items:center}.heading{font-size:2em}.message{max-width:90%}`,template:C`<default-layout><div class="wrapper"><div class="heading"><i18n-label id="nfc.unavailable.heading"></i18n-label></div><div class="message"><i18n-label id="nfc.unavailable.message"></i18n-label></div></div></default-layout>`})],Aa);var Bp=Object.getOwnPropertyDescriptor,Fp=(t,i,e,n)=>{for(var s=n>1?void 0:n?Bp(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let xa=class{receive(){history.pushState({},document.title,"/r")}send(){history.pushState({},document.title,"/file-transfer-send")}};xa=Fp([O("file-transfer-app",{style:R`.wrapper{height:100%;width:100%;display:flex;justify-content:space-evenly;align-items:center;flex-direction:column;font-size:2em}`,template:C`<default-layout><div class="wrapper"><div></div><pretty-labeled-button @click.stop.prevent="send()" id="fileTransfer.send"></pretty-labeled-button><pretty-labeled-button @click.stop.prevent="receive()" id="fileTransfer.receive"></pretty-labeled-button><div></div></div></default-layout>`})],xa);/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const jp=4,Da=0,Ta=1,zp=2;function ei(t){let i=t.length;for(;--i>=0;)t[i]=0}const Hp=0,sc=1,Gp=2,Zp=3,Vp=258,Ns=29,Ui=256,Si=Ui+1+Ns,ze=30,$s=19,rc=2*Si+1,Te=15,Fn=16,Wp=7,Bs=256,ac=16,oc=17,lc=18,ds=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),en=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Qp=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),cc=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qp=512,ae=new Array((Si+2)*2);ei(ae);const gi=new Array(ze*2);ei(gi);const Ai=new Array(qp);ei(Ai);const xi=new Array(Vp-Zp+1);ei(xi);const Fs=new Array(Ns);ei(Fs);const cn=new Array(ze);ei(cn);function jn(t,i,e,n,s){this.static_tree=t,this.extra_bits=i,this.extra_base=e,this.elems=n,this.max_length=s,this.has_stree=t&&t.length}let hc,uc,dc;function zn(t,i){this.dyn_tree=t,this.max_code=0,this.stat_desc=i}const fc=t=>t<256?Ai[t]:Ai[256+(t>>>7)],Di=(t,i)=>{t.pending_buf[t.pending++]=i&255,t.pending_buf[t.pending++]=i>>>8&255},Dt=(t,i,e)=>{t.bi_valid>Fn-e?(t.bi_buf|=i<<t.bi_valid&65535,Di(t,t.bi_buf),t.bi_buf=i>>Fn-t.bi_valid,t.bi_valid+=e-Fn):(t.bi_buf|=i<<t.bi_valid&65535,t.bi_valid+=e)},qt=(t,i,e)=>{Dt(t,e[i*2],e[i*2+1])},pc=(t,i)=>{let e=0;do e|=t&1,t>>>=1,e<<=1;while(--i>0);return e>>>1},Kp=t=>{t.bi_valid===16?(Di(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},Yp=(t,i)=>{const e=i.dyn_tree,n=i.max_code,s=i.stat_desc.static_tree,r=i.stat_desc.has_stree,a=i.stat_desc.extra_bits,o=i.stat_desc.extra_base,f=i.stat_desc.max_length;let c,v,y,h,d,l,u=0;for(h=0;h<=Te;h++)t.bl_count[h]=0;for(e[t.heap[t.heap_max]*2+1]=0,c=t.heap_max+1;c<rc;c++)v=t.heap[c],h=e[e[v*2+1]*2+1]+1,h>f&&(h=f,u++),e[v*2+1]=h,!(v>n)&&(t.bl_count[h]++,d=0,v>=o&&(d=a[v-o]),l=e[v*2],t.opt_len+=l*(h+d),r&&(t.static_len+=l*(s[v*2+1]+d)));if(u!==0){do{for(h=f-1;t.bl_count[h]===0;)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[f]--,u-=2}while(u>0);for(h=f;h!==0;h--)for(v=t.bl_count[h];v!==0;)y=t.heap[--c],!(y>n)&&(e[y*2+1]!==h&&(t.opt_len+=(h-e[y*2+1])*e[y*2],e[y*2+1]=h),v--)}},vc=(t,i,e)=>{const n=new Array(Te+1);let s=0,r,a;for(r=1;r<=Te;r++)s=s+e[r-1]<<1,n[r]=s;for(a=0;a<=i;a++){let o=t[a*2+1];o!==0&&(t[a*2]=pc(n[o]++,o))}},Xp=()=>{let t,i,e,n,s;const r=new Array(Te+1);for(e=0,n=0;n<Ns-1;n++)for(Fs[n]=e,t=0;t<1<<ds[n];t++)xi[e++]=n;for(xi[e-1]=n,s=0,n=0;n<16;n++)for(cn[n]=s,t=0;t<1<<en[n];t++)Ai[s++]=n;for(s>>=7;n<ze;n++)for(cn[n]=s<<7,t=0;t<1<<en[n]-7;t++)Ai[256+s++]=n;for(i=0;i<=Te;i++)r[i]=0;for(t=0;t<=143;)ae[t*2+1]=8,t++,r[8]++;for(;t<=255;)ae[t*2+1]=9,t++,r[9]++;for(;t<=279;)ae[t*2+1]=7,t++,r[7]++;for(;t<=287;)ae[t*2+1]=8,t++,r[8]++;for(vc(ae,Si+1,r),t=0;t<ze;t++)gi[t*2+1]=5,gi[t*2]=pc(t,5);hc=new jn(ae,ds,Ui+1,Si,Te),uc=new jn(gi,en,0,ze,Te),dc=new jn(new Array(0),Qp,0,$s,Wp)},gc=t=>{let i;for(i=0;i<Si;i++)t.dyn_ltree[i*2]=0;for(i=0;i<ze;i++)t.dyn_dtree[i*2]=0;for(i=0;i<$s;i++)t.bl_tree[i*2]=0;t.dyn_ltree[Bs*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},mc=t=>{t.bi_valid>8?Di(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},Ca=(t,i,e,n)=>{const s=i*2,r=e*2;return t[s]<t[r]||t[s]===t[r]&&n[i]<=n[e]},Hn=(t,i,e)=>{const n=t.heap[e];let s=e<<1;for(;s<=t.heap_len&&(s<t.heap_len&&Ca(i,t.heap[s+1],t.heap[s],t.depth)&&s++,!Ca(i,n,t.heap[s],t.depth));)t.heap[e]=t.heap[s],e=s,s<<=1;t.heap[e]=n},Oa=(t,i,e)=>{let n,s,r=0,a,o;if(t.sym_next!==0)do n=t.pending_buf[t.sym_buf+r++]&255,n+=(t.pending_buf[t.sym_buf+r++]&255)<<8,s=t.pending_buf[t.sym_buf+r++],n===0?qt(t,s,i):(a=xi[s],qt(t,a+Ui+1,i),o=ds[a],o!==0&&(s-=Fs[a],Dt(t,s,o)),n--,a=fc(n),qt(t,a,e),o=en[a],o!==0&&(n-=cn[a],Dt(t,n,o)));while(r<t.sym_next);qt(t,Bs,i)},fs=(t,i)=>{const e=i.dyn_tree,n=i.stat_desc.static_tree,s=i.stat_desc.has_stree,r=i.stat_desc.elems;let a,o,f=-1,c;for(t.heap_len=0,t.heap_max=rc,a=0;a<r;a++)e[a*2]!==0?(t.heap[++t.heap_len]=f=a,t.depth[a]=0):e[a*2+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=f<2?++f:0,e[c*2]=1,t.depth[c]=0,t.opt_len--,s&&(t.static_len-=n[c*2+1]);for(i.max_code=f,a=t.heap_len>>1;a>=1;a--)Hn(t,e,a);c=r;do a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Hn(t,e,1),o=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=o,e[c*2]=e[a*2]+e[o*2],t.depth[c]=(t.depth[a]>=t.depth[o]?t.depth[a]:t.depth[o])+1,e[a*2+1]=e[o*2+1]=c,t.heap[1]=c++,Hn(t,e,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],Yp(t,i),vc(e,f,t.bl_count)},Ra=(t,i,e)=>{let n,s=-1,r,a=i[0*2+1],o=0,f=7,c=4;for(a===0&&(f=138,c=3),i[(e+1)*2+1]=65535,n=0;n<=e;n++)r=a,a=i[(n+1)*2+1],!(++o<f&&r===a)&&(o<c?t.bl_tree[r*2]+=o:r!==0?(r!==s&&t.bl_tree[r*2]++,t.bl_tree[ac*2]++):o<=10?t.bl_tree[oc*2]++:t.bl_tree[lc*2]++,o=0,s=r,a===0?(f=138,c=3):r===a?(f=6,c=3):(f=7,c=4))},Ma=(t,i,e)=>{let n,s=-1,r,a=i[0*2+1],o=0,f=7,c=4;for(a===0&&(f=138,c=3),n=0;n<=e;n++)if(r=a,a=i[(n+1)*2+1],!(++o<f&&r===a)){if(o<c)do qt(t,r,t.bl_tree);while(--o!==0);else r!==0?(r!==s&&(qt(t,r,t.bl_tree),o--),qt(t,ac,t.bl_tree),Dt(t,o-3,2)):o<=10?(qt(t,oc,t.bl_tree),Dt(t,o-3,3)):(qt(t,lc,t.bl_tree),Dt(t,o-11,7));o=0,s=r,a===0?(f=138,c=3):r===a?(f=6,c=3):(f=7,c=4)}},Jp=t=>{let i;for(Ra(t,t.dyn_ltree,t.l_desc.max_code),Ra(t,t.dyn_dtree,t.d_desc.max_code),fs(t,t.bl_desc),i=$s-1;i>=3&&t.bl_tree[cc[i]*2+1]===0;i--);return t.opt_len+=3*(i+1)+5+5+4,i},tv=(t,i,e,n)=>{let s;for(Dt(t,i-257,5),Dt(t,e-1,5),Dt(t,n-4,4),s=0;s<n;s++)Dt(t,t.bl_tree[cc[s]*2+1],3);Ma(t,t.dyn_ltree,i-1),Ma(t,t.dyn_dtree,e-1)},ev=t=>{let i=4093624447,e;for(e=0;e<=31;e++,i>>>=1)if(i&1&&t.dyn_ltree[e*2]!==0)return Da;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return Ta;for(e=32;e<Ui;e++)if(t.dyn_ltree[e*2]!==0)return Ta;return Da};let Pa=!1;const iv=t=>{Pa||(Xp(),Pa=!0),t.l_desc=new zn(t.dyn_ltree,hc),t.d_desc=new zn(t.dyn_dtree,uc),t.bl_desc=new zn(t.bl_tree,dc),t.bi_buf=0,t.bi_valid=0,gc(t)},bc=(t,i,e,n)=>{Dt(t,(Hp<<1)+(n?1:0),3),mc(t),Di(t,e),Di(t,~e),e&&t.pending_buf.set(t.window.subarray(i,i+e),t.pending),t.pending+=e},nv=t=>{Dt(t,sc<<1,3),qt(t,Bs,ae),Kp(t)},sv=(t,i,e,n)=>{let s,r,a=0;t.level>0?(t.strm.data_type===zp&&(t.strm.data_type=ev(t)),fs(t,t.l_desc),fs(t,t.d_desc),a=Jp(t),s=t.opt_len+3+7>>>3,r=t.static_len+3+7>>>3,r<=s&&(s=r)):s=r=e+5,e+4<=s&&i!==-1?bc(t,i,e,n):t.strategy===jp||r===s?(Dt(t,(sc<<1)+(n?1:0),3),Oa(t,ae,gi)):(Dt(t,(Gp<<1)+(n?1:0),3),tv(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),Oa(t,t.dyn_ltree,t.dyn_dtree)),gc(t),n&&mc(t)},rv=(t,i,e)=>(t.pending_buf[t.sym_buf+t.sym_next++]=i,t.pending_buf[t.sym_buf+t.sym_next++]=i>>8,t.pending_buf[t.sym_buf+t.sym_next++]=e,i===0?t.dyn_ltree[e*2]++:(t.matches++,i--,t.dyn_ltree[(xi[e]+Ui+1)*2]++,t.dyn_dtree[fc(i)*2]++),t.sym_next===t.sym_end);var av=iv,ov=bc,lv=sv,cv=rv,hv=nv,uv={Tt:av,Ct:ov,Ot:lv,Rt:cv,Mt:hv};const dv=(t,i,e,n)=>{let s=t&65535|0,r=t>>>16&65535|0,a=0;for(;e!==0;){a=e>2e3?2e3:e,e-=a;do s=s+i[n++]|0,r=r+s|0;while(--a);s%=65521,r%=65521}return s|r<<16|0};var Ti=dv;const fv=()=>{let t,i=[];for(var e=0;e<256;e++){t=e;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;i[e]=t}return i},pv=new Uint32Array(fv()),vv=(t,i,e,n)=>{const s=pv,r=n+e;t^=-1;for(let a=n;a<r;a++)t=t>>>8^s[(t^i[a])&255];return t^-1};var ft=vv,Me={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},yn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{Tt:gv,Ct:ps,Ot:mv,Rt:me,Mt:bv}=uv,{Z_NO_FLUSH:be,Z_PARTIAL_FLUSH:wv,Z_FULL_FLUSH:_v,Z_FINISH:kt,Z_BLOCK:Ia,Z_OK:pt,Z_STREAM_END:La,Z_STREAM_ERROR:Yt,Z_DATA_ERROR:yv,Z_BUF_ERROR:Gn,Z_DEFAULT_COMPRESSION:Ev,Z_FILTERED:Sv,Z_HUFFMAN_ONLY:Zi,Z_RLE:Av,Z_FIXED:xv,Z_DEFAULT_STRATEGY:Dv,Z_UNKNOWN:Tv,Z_DEFLATED:En}=yn,Cv=9,Ov=15,Rv=8,Mv=29,Pv=256,vs=Pv+1+Mv,Iv=30,Lv=19,kv=2*vs+1,Uv=15,V=3,ge=258,Xt=ge+V+1,Nv=32,We=42,js=57,gs=69,ms=73,bs=91,ws=103,Ce=113,hi=666,_t=1,ii=2,Pe=3,ni=4,$v=3,Oe=(t,i)=>(t.msg=Me[i],i),ka=t=>t*2-(t>4?9:0),ve=t=>{let i=t.length;for(;--i>=0;)t[i]=0},Bv=t=>{let i,e,n,s=t.w_size;i=t.hash_size,n=i;do e=t.head[--n],t.head[n]=e>=s?e-s:0;while(--i);i=s,n=i;do e=t.prev[--n],t.prev[n]=e>=s?e-s:0;while(--i)};let Fv=(t,i,e)=>(i<<t.hash_shift^e)&t.hash_mask,we=Fv;const Rt=t=>{const i=t.state;let e=i.pending;e>t.avail_out&&(e=t.avail_out),e!==0&&(t.output.set(i.pending_buf.subarray(i.pending_out,i.pending_out+e),t.next_out),t.next_out+=e,i.pending_out+=e,t.total_out+=e,t.avail_out-=e,i.pending-=e,i.pending===0&&(i.pending_out=0))},Pt=(t,i)=>{mv(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,i),t.block_start=t.strstart,Rt(t.strm)},K=(t,i)=>{t.pending_buf[t.pending++]=i},oi=(t,i)=>{t.pending_buf[t.pending++]=i>>>8&255,t.pending_buf[t.pending++]=i&255},_s=(t,i,e,n)=>{let s=t.avail_in;return s>n&&(s=n),s===0?0:(t.avail_in-=s,i.set(t.input.subarray(t.next_in,t.next_in+s),e),t.state.wrap===1?t.adler=Ti(t.adler,i,s,e):t.state.wrap===2&&(t.adler=ft(t.adler,i,s,e)),t.next_in+=s,t.total_in+=s,s)},wc=(t,i)=>{let e=t.max_chain_length,n=t.strstart,s,r,a=t.prev_length,o=t.nice_match;const f=t.strstart>t.w_size-Xt?t.strstart-(t.w_size-Xt):0,c=t.window,v=t.w_mask,y=t.prev,h=t.strstart+ge;let d=c[n+a-1],l=c[n+a];t.prev_length>=t.good_match&&(e>>=2),o>t.lookahead&&(o=t.lookahead);do if(s=i,!(c[s+a]!==l||c[s+a-1]!==d||c[s]!==c[n]||c[++s]!==c[n+1])){n+=2,s++;do;while(c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&n<h);if(r=ge-(h-n),n=h-ge,r>a){if(t.match_start=i,a=r,r>=o)break;d=c[n+a-1],l=c[n+a]}}while((i=y[i&v])>f&&--e!==0);return a<=t.lookahead?a:t.lookahead},Qe=t=>{const i=t.w_size;let e,n,s;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=i+(i-Xt)&&(t.window.set(t.window.subarray(i,i+i-n),0),t.match_start-=i,t.strstart-=i,t.block_start-=i,t.insert>t.strstart&&(t.insert=t.strstart),Bv(t),n+=i),t.strm.avail_in===0)break;if(e=_s(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=e,t.lookahead+t.insert>=V)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=we(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=we(t,t.ins_h,t.window[s+V-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<V)););}while(t.lookahead<Xt&&t.strm.avail_in!==0)},_c=(t,i)=>{let e=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,n,s,r,a=0,o=t.strm.avail_in;do{if(n=65535,r=t.bi_valid+42>>3,t.strm.avail_out<r||(r=t.strm.avail_out-r,s=t.strstart-t.block_start,n>s+t.strm.avail_in&&(n=s+t.strm.avail_in),n>r&&(n=r),n<e&&(n===0&&i!==kt||i===be||n!==s+t.strm.avail_in)))break;a=i===kt&&n===s+t.strm.avail_in?1:0,ps(t,0,0,a),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,Rt(t.strm),s&&(s>n&&(s=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+s),t.strm.next_out),t.strm.next_out+=s,t.strm.avail_out-=s,t.strm.total_out+=s,t.block_start+=s,n-=s),n&&(_s(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(a===0);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),a?ni:i!==be&&i!==kt&&t.strm.avail_in===0&&t.strstart===t.block_start?ii:(r=t.window_size-t.strstart,t.strm.avail_in>r&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,r+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),r>t.strm.avail_in&&(r=t.strm.avail_in),r&&(_s(t.strm,t.window,t.strstart,r),t.strstart+=r,t.insert+=r>t.w_size-t.insert?t.w_size-t.insert:r),t.high_water<t.strstart&&(t.high_water=t.strstart),r=t.bi_valid+42>>3,r=t.pending_buf_size-r>65535?65535:t.pending_buf_size-r,e=r>t.w_size?t.w_size:r,s=t.strstart-t.block_start,(s>=e||(s||i===kt)&&i!==be&&t.strm.avail_in===0&&s<=r)&&(n=s>r?r:s,a=i===kt&&t.strm.avail_in===0&&n===s?1:0,ps(t,t.block_start,n,a),t.block_start+=n,Rt(t.strm)),a?Pe:_t)},Zn=(t,i)=>{let e,n;for(;;){if(t.lookahead<Xt){if(Qe(t),t.lookahead<Xt&&i===be)return _t;if(t.lookahead===0)break}if(e=0,t.lookahead>=V&&(t.ins_h=we(t,t.ins_h,t.window[t.strstart+V-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),e!==0&&t.strstart-e<=t.w_size-Xt&&(t.match_length=wc(t,e)),t.match_length>=V)if(n=me(t,t.strstart-t.match_start,t.match_length-V),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=V){t.match_length--;do t.strstart++,t.ins_h=we(t,t.ins_h,t.window[t.strstart+V-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=we(t,t.ins_h,t.window[t.strstart+1]);else n=me(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Pt(t,!1),t.strm.avail_out===0))return _t}return t.insert=t.strstart<V-1?t.strstart:V-1,i===kt?(Pt(t,!0),t.strm.avail_out===0?Pe:ni):t.sym_next&&(Pt(t,!1),t.strm.avail_out===0)?_t:ii},Be=(t,i)=>{let e,n,s;for(;;){if(t.lookahead<Xt){if(Qe(t),t.lookahead<Xt&&i===be)return _t;if(t.lookahead===0)break}if(e=0,t.lookahead>=V&&(t.ins_h=we(t,t.ins_h,t.window[t.strstart+V-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=V-1,e!==0&&t.prev_length<t.max_lazy_match&&t.strstart-e<=t.w_size-Xt&&(t.match_length=wc(t,e),t.match_length<=5&&(t.strategy===Sv||t.match_length===V&&t.strstart-t.match_start>4096)&&(t.match_length=V-1)),t.prev_length>=V&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-V,n=me(t,t.strstart-1-t.prev_match,t.prev_length-V),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=s&&(t.ins_h=we(t,t.ins_h,t.window[t.strstart+V-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=V-1,t.strstart++,n&&(Pt(t,!1),t.strm.avail_out===0))return _t}else if(t.match_available){if(n=me(t,0,t.window[t.strstart-1]),n&&Pt(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return _t}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=me(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<V-1?t.strstart:V-1,i===kt?(Pt(t,!0),t.strm.avail_out===0?Pe:ni):t.sym_next&&(Pt(t,!1),t.strm.avail_out===0)?_t:ii},jv=(t,i)=>{let e,n,s,r;const a=t.window;for(;;){if(t.lookahead<=ge){if(Qe(t),t.lookahead<=ge&&i===be)return _t;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=V&&t.strstart>0&&(s=t.strstart-1,n=a[s],n===a[++s]&&n===a[++s]&&n===a[++s])){r=t.strstart+ge;do;while(n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&s<r);t.match_length=ge-(r-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=V?(e=me(t,1,t.match_length-V),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(e=me(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),e&&(Pt(t,!1),t.strm.avail_out===0))return _t}return t.insert=0,i===kt?(Pt(t,!0),t.strm.avail_out===0?Pe:ni):t.sym_next&&(Pt(t,!1),t.strm.avail_out===0)?_t:ii},zv=(t,i)=>{let e;for(;;){if(t.lookahead===0&&(Qe(t),t.lookahead===0)){if(i===be)return _t;break}if(t.match_length=0,e=me(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,e&&(Pt(t,!1),t.strm.avail_out===0))return _t}return t.insert=0,i===kt?(Pt(t,!0),t.strm.avail_out===0?Pe:ni):t.sym_next&&(Pt(t,!1),t.strm.avail_out===0)?_t:ii};function Wt(t,i,e,n,s){this.good_length=t,this.max_lazy=i,this.nice_length=e,this.max_chain=n,this.func=s}const ui=[new Wt(0,0,0,0,_c),new Wt(4,4,8,4,Zn),new Wt(4,5,16,8,Zn),new Wt(4,6,32,32,Zn),new Wt(4,4,16,16,Be),new Wt(8,16,32,32,Be),new Wt(8,16,128,128,Be),new Wt(8,32,128,256,Be),new Wt(32,128,258,1024,Be),new Wt(32,258,258,4096,Be)],Hv=t=>{t.window_size=2*t.w_size,ve(t.head),t.max_lazy_match=ui[t.level].max_lazy,t.good_match=ui[t.level].good_length,t.nice_match=ui[t.level].nice_length,t.max_chain_length=ui[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=V-1,t.match_available=0,t.ins_h=0};function Gv(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=En,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(kv*2),this.dyn_dtree=new Uint16Array((2*Iv+1)*2),this.bl_tree=new Uint16Array((2*Lv+1)*2),ve(this.dyn_ltree),ve(this.dyn_dtree),ve(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Uv+1),this.heap=new Uint16Array(2*vs+1),ve(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*vs+1),ve(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ni=t=>{if(!t)return 1;const i=t.state;return!i||i.strm!==t||i.status!==We&&i.status!==js&&i.status!==gs&&i.status!==ms&&i.status!==bs&&i.status!==ws&&i.status!==Ce&&i.status!==hi?1:0},yc=t=>{if(Ni(t))return Oe(t,Yt);t.total_in=t.total_out=0,t.data_type=Tv;const i=t.state;return i.pending=0,i.pending_out=0,i.wrap<0&&(i.wrap=-i.wrap),i.status=i.wrap===2?js:i.wrap?We:Ce,t.adler=i.wrap===2?0:1,i.last_flush=-2,gv(i),pt},Ec=t=>{const i=yc(t);return i===pt&&Hv(t.state),i},Zv=(t,i)=>Ni(t)||t.state.wrap!==2?Yt:(t.state.gzhead=i,pt),Sc=(t,i,e,n,s,r)=>{if(!t)return Yt;let a=1;if(i===Ev&&(i=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),s<1||s>Cv||e!==En||n<8||n>15||i<0||i>9||r<0||r>xv||n===8&&a!==1)return Oe(t,Yt);n===8&&(n=9);const o=new Gv;return t.state=o,o.strm=t,o.status=We,o.wrap=a,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+V-1)/V),o.window=new Uint8Array(o.w_size*2),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=i,o.strategy=r,o.method=e,Ec(t)},Vv=(t,i)=>Sc(t,i,En,Ov,Rv,Dv),Wv=(t,i)=>{if(Ni(t)||i>Ia||i<0)return t?Oe(t,Yt):Yt;const e=t.state;if(!t.output||t.avail_in!==0&&!t.input||e.status===hi&&i!==kt)return Oe(t,t.avail_out===0?Gn:Yt);const n=e.last_flush;if(e.last_flush=i,e.pending!==0){if(Rt(t),t.avail_out===0)return e.last_flush=-1,pt}else if(t.avail_in===0&&ka(i)<=ka(n)&&i!==kt)return Oe(t,Gn);if(e.status===hi&&t.avail_in!==0)return Oe(t,Gn);if(e.status===We&&e.wrap===0&&(e.status=Ce),e.status===We){let s=En+(e.w_bits-8<<4)<<8,r=-1;if(e.strategy>=Zi||e.level<2?r=0:e.level<6?r=1:e.level===6?r=2:r=3,s|=r<<6,e.strstart!==0&&(s|=Nv),s+=31-s%31,oi(e,s),e.strstart!==0&&(oi(e,t.adler>>>16),oi(e,t.adler&65535)),t.adler=1,e.status=Ce,Rt(t),e.pending!==0)return e.last_flush=-1,pt}if(e.status===js){if(t.adler=0,K(e,31),K(e,139),K(e,8),e.gzhead)K(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),K(e,e.gzhead.time&255),K(e,e.gzhead.time>>8&255),K(e,e.gzhead.time>>16&255),K(e,e.gzhead.time>>24&255),K(e,e.level===9?2:e.strategy>=Zi||e.level<2?4:0),K(e,e.gzhead.os&255),e.gzhead.extra&&e.gzhead.extra.length&&(K(e,e.gzhead.extra.length&255),K(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(t.adler=ft(t.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=gs;else if(K(e,0),K(e,0),K(e,0),K(e,0),K(e,0),K(e,e.level===9?2:e.strategy>=Zi||e.level<2?4:0),K(e,$v),e.status=Ce,Rt(t),e.pending!==0)return e.last_flush=-1,pt}if(e.status===gs){if(e.gzhead.extra){let s=e.pending,r=(e.gzhead.extra.length&65535)-e.gzindex;for(;e.pending+r>e.pending_buf_size;){let o=e.pending_buf_size-e.pending;if(e.pending_buf.set(e.gzhead.extra.subarray(e.gzindex,e.gzindex+o),e.pending),e.pending=e.pending_buf_size,e.gzhead.hcrc&&e.pending>s&&(t.adler=ft(t.adler,e.pending_buf,e.pending-s,s)),e.gzindex+=o,Rt(t),e.pending!==0)return e.last_flush=-1,pt;s=0,r-=o}let a=new Uint8Array(e.gzhead.extra);e.pending_buf.set(a.subarray(e.gzindex,e.gzindex+r),e.pending),e.pending+=r,e.gzhead.hcrc&&e.pending>s&&(t.adler=ft(t.adler,e.pending_buf,e.pending-s,s)),e.gzindex=0}e.status=ms}if(e.status===ms){if(e.gzhead.name){let s=e.pending,r;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>s&&(t.adler=ft(t.adler,e.pending_buf,e.pending-s,s)),Rt(t),e.pending!==0)return e.last_flush=-1,pt;s=0}e.gzindex<e.gzhead.name.length?r=e.gzhead.name.charCodeAt(e.gzindex++)&255:r=0,K(e,r)}while(r!==0);e.gzhead.hcrc&&e.pending>s&&(t.adler=ft(t.adler,e.pending_buf,e.pending-s,s)),e.gzindex=0}e.status=bs}if(e.status===bs){if(e.gzhead.comment){let s=e.pending,r;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>s&&(t.adler=ft(t.adler,e.pending_buf,e.pending-s,s)),Rt(t),e.pending!==0)return e.last_flush=-1,pt;s=0}e.gzindex<e.gzhead.comment.length?r=e.gzhead.comment.charCodeAt(e.gzindex++)&255:r=0,K(e,r)}while(r!==0);e.gzhead.hcrc&&e.pending>s&&(t.adler=ft(t.adler,e.pending_buf,e.pending-s,s))}e.status=ws}if(e.status===ws){if(e.gzhead.hcrc){if(e.pending+2>e.pending_buf_size&&(Rt(t),e.pending!==0))return e.last_flush=-1,pt;K(e,t.adler&255),K(e,t.adler>>8&255),t.adler=0}if(e.status=Ce,Rt(t),e.pending!==0)return e.last_flush=-1,pt}if(t.avail_in!==0||e.lookahead!==0||i!==be&&e.status!==hi){let s=e.level===0?_c(e,i):e.strategy===Zi?zv(e,i):e.strategy===Av?jv(e,i):ui[e.level].func(e,i);if((s===Pe||s===ni)&&(e.status=hi),s===_t||s===Pe)return t.avail_out===0&&(e.last_flush=-1),pt;if(s===ii&&(i===wv?bv(e):i!==Ia&&(ps(e,0,0,!1),i===_v&&(ve(e.head),e.lookahead===0&&(e.strstart=0,e.block_start=0,e.insert=0))),Rt(t),t.avail_out===0))return e.last_flush=-1,pt}return i!==kt?pt:e.wrap<=0?La:(e.wrap===2?(K(e,t.adler&255),K(e,t.adler>>8&255),K(e,t.adler>>16&255),K(e,t.adler>>24&255),K(e,t.total_in&255),K(e,t.total_in>>8&255),K(e,t.total_in>>16&255),K(e,t.total_in>>24&255)):(oi(e,t.adler>>>16),oi(e,t.adler&65535)),Rt(t),e.wrap>0&&(e.wrap=-e.wrap),e.pending!==0?pt:La)},Qv=t=>{if(Ni(t))return Yt;const i=t.state.status;return t.state=null,i===Ce?Oe(t,yv):pt},qv=(t,i)=>{let e=i.length;if(Ni(t))return Yt;const n=t.state,s=n.wrap;if(s===2||s===1&&n.status!==We||n.lookahead)return Yt;if(s===1&&(t.adler=Ti(t.adler,i,e,0)),n.wrap=0,e>=n.w_size){s===0&&(ve(n.head),n.strstart=0,n.block_start=0,n.insert=0);let f=new Uint8Array(n.w_size);f.set(i.subarray(e-n.w_size,e),0),i=f,e=n.w_size}const r=t.avail_in,a=t.next_in,o=t.input;for(t.avail_in=e,t.next_in=0,t.input=i,Qe(n);n.lookahead>=V;){let f=n.strstart,c=n.lookahead-(V-1);do n.ins_h=we(n,n.ins_h,n.window[f+V-1]),n.prev[f&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=f,f++;while(--c);n.strstart=f,n.lookahead=V-1,Qe(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=V-1,n.match_available=0,t.next_in=a,t.input=o,t.avail_in=r,n.wrap=s,pt};var Kv=Vv,Yv=Sc,Xv=Ec,Jv=yc,tg=Zv,eg=Wv,ig=Qv,ng=qv,sg="pako deflate (from Nodeca project)",mi={deflateInit:Kv,deflateInit2:Yv,deflateReset:Xv,deflateResetKeep:Jv,deflateSetHeader:tg,deflate:eg,deflateEnd:ig,deflateSetDictionary:ng,deflateInfo:sg};const rg=(t,i)=>Object.prototype.hasOwnProperty.call(t,i);var ag=function(t){const i=Array.prototype.slice.call(arguments,1);for(;i.length;){const e=i.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const n in e)rg(e,n)&&(t[n]=e[n])}}return t},og=t=>{let i=0;for(let n=0,s=t.length;n<s;n++)i+=t[n].length;const e=new Uint8Array(i);for(let n=0,s=0,r=t.length;n<r;n++){let a=t[n];e.set(a,s),s+=a.length}return e},Sn={assign:ag,flattenChunks:og};let Ac=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Ac=!1}const Ci=new Uint8Array(256);for(let t=0;t<256;t++)Ci[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Ci[254]=Ci[254]=1;var lg=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let i,e,n,s,r,a=t.length,o=0;for(s=0;s<a;s++)e=t.charCodeAt(s),(e&64512)===55296&&s+1<a&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),s++)),o+=e<128?1:e<2048?2:e<65536?3:4;for(i=new Uint8Array(o),r=0,s=0;r<o;s++)e=t.charCodeAt(s),(e&64512)===55296&&s+1<a&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),s++)),e<128?i[r++]=e:e<2048?(i[r++]=192|e>>>6,i[r++]=128|e&63):e<65536?(i[r++]=224|e>>>12,i[r++]=128|e>>>6&63,i[r++]=128|e&63):(i[r++]=240|e>>>18,i[r++]=128|e>>>12&63,i[r++]=128|e>>>6&63,i[r++]=128|e&63);return i};const cg=(t,i)=>{if(i<65534&&t.subarray&&Ac)return String.fromCharCode.apply(null,t.length===i?t:t.subarray(0,i));let e="";for(let n=0;n<i;n++)e+=String.fromCharCode(t[n]);return e};var hg=(t,i)=>{const e=i||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,i));let n,s;const r=new Array(e*2);for(s=0,n=0;n<e;){let a=t[n++];if(a<128){r[s++]=a;continue}let o=Ci[a];if(o>4){r[s++]=65533,n+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&n<e;)a=a<<6|t[n++]&63,o--;if(o>1){r[s++]=65533;continue}a<65536?r[s++]=a:(a-=65536,r[s++]=55296|a>>10&1023,r[s++]=56320|a&1023)}return cg(r,s)},ug=(t,i)=>{i=i||t.length,i>t.length&&(i=t.length);let e=i-1;for(;e>=0&&(t[e]&192)===128;)e--;return e<0||e===0?i:e+Ci[t[e]]>i?e:i},Oi={string2buf:lg,buf2string:hg,utf8border:ug};function dg(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var xc=dg;const Dc=Object.prototype.toString,{Z_NO_FLUSH:fg,Z_SYNC_FLUSH:pg,Z_FULL_FLUSH:vg,Z_FINISH:gg,Z_OK:hn,Z_STREAM_END:mg,Z_DEFAULT_COMPRESSION:bg,Z_DEFAULT_STRATEGY:wg,Z_DEFLATED:_g}=yn;function An(t){this.options=Sn.assign({level:bg,method:_g,chunkSize:16384,windowBits:15,memLevel:8,strategy:wg},t||{});let i=this.options;i.raw&&i.windowBits>0?i.windowBits=-i.windowBits:i.gzip&&i.windowBits>0&&i.windowBits<16&&(i.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new xc,this.strm.avail_out=0;let e=mi.deflateInit2(this.strm,i.level,i.method,i.windowBits,i.memLevel,i.strategy);if(e!==hn)throw new Error(Me[e]);if(i.header&&mi.deflateSetHeader(this.strm,i.header),i.dictionary){let n;if(typeof i.dictionary=="string"?n=Oi.string2buf(i.dictionary):Dc.call(i.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(i.dictionary):n=i.dictionary,e=mi.deflateSetDictionary(this.strm,n),e!==hn)throw new Error(Me[e]);this.It=!0}}An.prototype.push=function(t,i){const e=this.strm,n=this.options.chunkSize;let s,r;if(this.ended)return!1;for(i===~~i?r=i:r=i===!0?gg:fg,typeof t=="string"?e.input=Oi.string2buf(t):Dc.call(t)==="[object ArrayBuffer]"?e.input=new Uint8Array(t):e.input=t,e.next_in=0,e.avail_in=e.input.length;;){if(e.avail_out===0&&(e.output=new Uint8Array(n),e.next_out=0,e.avail_out=n),(r===pg||r===vg)&&e.avail_out<=6){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(s=mi.deflate(e,r),s===mg)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),s=mi.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===hn;if(e.avail_out===0){this.onData(e.output);continue}if(r>0&&e.next_out>0){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(e.avail_in===0)break}return!0};An.prototype.onData=function(t){this.chunks.push(t)};An.prototype.onEnd=function(t){t===hn&&(this.result=Sn.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function yg(t,i){const e=new An(i);if(e.push(t,!0),e.err)throw e.msg||Me[e.err];return e.result}var Eg=yg,Sg={deflate:Eg};const Vi=16209,Ag=16191;var xg=function(i,e){let n,s,r,a,o,f,c,v,y,h,d,l,u,g,p,m,_,w,E,A,S,x,D,I;const P=i.state;n=i.next_in,D=i.input,s=n+(i.avail_in-5),r=i.next_out,I=i.output,a=r-(e-i.avail_out),o=r+(i.avail_out-257),f=P.dmax,c=P.wsize,v=P.whave,y=P.wnext,h=P.window,d=P.hold,l=P.bits,u=P.lencode,g=P.distcode,p=(1<<P.lenbits)-1,m=(1<<P.distbits)-1;t:do{l<15&&(d+=D[n++]<<l,l+=8,d+=D[n++]<<l,l+=8),_=u[d&p];e:for(;;){if(w=_>>>24,d>>>=w,l-=w,w=_>>>16&255,w===0)I[r++]=_&65535;else if(w&16){E=_&65535,w&=15,w&&(l<w&&(d+=D[n++]<<l,l+=8),E+=d&(1<<w)-1,d>>>=w,l-=w),l<15&&(d+=D[n++]<<l,l+=8,d+=D[n++]<<l,l+=8),_=g[d&m];i:for(;;){if(w=_>>>24,d>>>=w,l-=w,w=_>>>16&255,w&16){if(A=_&65535,w&=15,l<w&&(d+=D[n++]<<l,l+=8,l<w&&(d+=D[n++]<<l,l+=8)),A+=d&(1<<w)-1,A>f){i.msg="invalid distance too far back",P.mode=Vi;break t}if(d>>>=w,l-=w,w=r-a,A>w){if(w=A-w,w>v&&P.sane){i.msg="invalid distance too far back",P.mode=Vi;break t}if(S=0,x=h,y===0){if(S+=c-w,w<E){E-=w;do I[r++]=h[S++];while(--w);S=r-A,x=I}}else if(y<w){if(S+=c+y-w,w-=y,w<E){E-=w;do I[r++]=h[S++];while(--w);if(S=0,y<E){w=y,E-=w;do I[r++]=h[S++];while(--w);S=r-A,x=I}}}else if(S+=y-w,w<E){E-=w;do I[r++]=h[S++];while(--w);S=r-A,x=I}for(;E>2;)I[r++]=x[S++],I[r++]=x[S++],I[r++]=x[S++],E-=3;E&&(I[r++]=x[S++],E>1&&(I[r++]=x[S++]))}else{S=r-A;do I[r++]=I[S++],I[r++]=I[S++],I[r++]=I[S++],E-=3;while(E>2);E&&(I[r++]=I[S++],E>1&&(I[r++]=I[S++]))}}else if((w&64)===0){_=g[(_&65535)+(d&(1<<w)-1)];continue i}else{i.msg="invalid distance code",P.mode=Vi;break t}break}}else if((w&64)===0){_=u[(_&65535)+(d&(1<<w)-1)];continue e}else if(w&32){P.mode=Ag;break t}else{i.msg="invalid literal/length code",P.mode=Vi;break t}break}}while(n<s&&r<o);E=l>>3,n-=E,l-=E<<3,d&=(1<<l)-1,i.next_in=n,i.next_out=r,i.avail_in=n<s?5+(s-n):5-(n-s),i.avail_out=r<o?257+(o-r):257-(r-o),P.hold=d,P.bits=l};const Fe=15,Ua=852,Na=592,$a=0,Vn=1,Ba=2,Dg=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Tg=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Cg=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Og=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Rg=(t,i,e,n,s,r,a,o)=>{const f=o.bits;let c=0,v=0,y=0,h=0,d=0,l=0,u=0,g=0,p=0,m=0,_,w,E,A,S,x=null,D;const I=new Uint16Array(Fe+1),P=new Uint16Array(Fe+1);let z=null,W,Z,nt;for(c=0;c<=Fe;c++)I[c]=0;for(v=0;v<n;v++)I[i[e+v]]++;for(d=f,h=Fe;h>=1&&I[h]===0;h--);if(d>h&&(d=h),h===0)return s[r++]=1<<24|64<<16|0,s[r++]=1<<24|64<<16|0,o.bits=1,0;for(y=1;y<h&&I[y]===0;y++);for(d<y&&(d=y),g=1,c=1;c<=Fe;c++)if(g<<=1,g-=I[c],g<0)return-1;if(g>0&&(t===$a||h!==1))return-1;for(P[1]=0,c=1;c<Fe;c++)P[c+1]=P[c]+I[c];for(v=0;v<n;v++)i[e+v]!==0&&(a[P[i[e+v]]++]=v);if(t===$a?(x=z=a,D=20):t===Vn?(x=Dg,z=Tg,D=257):(x=Cg,z=Og,D=0),m=0,v=0,c=y,S=r,l=d,u=0,E=-1,p=1<<d,A=p-1,t===Vn&&p>Ua||t===Ba&&p>Na)return 1;for(;;){W=c-u,a[v]+1<D?(Z=0,nt=a[v]):a[v]>=D?(Z=z[a[v]-D],nt=x[a[v]-D]):(Z=96,nt=0),_=1<<c-u,w=1<<l,y=w;do w-=_,s[S+(m>>u)+w]=W<<24|Z<<16|nt|0;while(w!==0);for(_=1<<c-1;m&_;)_>>=1;if(_!==0?(m&=_-1,m+=_):m=0,v++,--I[c]===0){if(c===h)break;c=i[e+a[v]]}if(c>d&&(m&A)!==E){for(u===0&&(u=d),S+=y,l=c-u,g=1<<l;l+u<h&&(g-=I[l+u],!(g<=0));)l++,g<<=1;if(p+=1<<l,t===Vn&&p>Ua||t===Ba&&p>Na)return 1;E=m&A,s[E]=d<<24|l<<16|S-r|0}}return m!==0&&(s[S+m]=c-u<<24|64<<16|0),o.bits=d,0};var bi=Rg;const Mg=0,Tc=1,Cc=2,{Z_FINISH:Fa,Z_BLOCK:Pg,Z_TREES:Wi,Z_OK:Ie,Z_STREAM_END:Ig,Z_NEED_DICT:Lg,Z_STREAM_ERROR:$t,Z_DATA_ERROR:Oc,Z_MEM_ERROR:Rc,Z_BUF_ERROR:kg,Z_DEFLATED:ja}=yn,xn=16180,za=16181,Ha=16182,Ga=16183,Za=16184,Va=16185,Wa=16186,Qa=16187,qa=16188,Ka=16189,un=16190,se=16191,Wn=16192,Ya=16193,Qn=16194,Xa=16195,Ja=16196,to=16197,eo=16198,Qi=16199,qi=16200,io=16201,no=16202,so=16203,ro=16204,ao=16205,qn=16206,oo=16207,lo=16208,st=16209,Mc=16210,Pc=16211,Ug=852,Ng=592,$g=15,Bg=$g,co=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function Fg(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ue=t=>{if(!t)return 1;const i=t.state;return!i||i.strm!==t||i.mode<xn||i.mode>Pc?1:0},Ic=t=>{if(Ue(t))return $t;const i=t.state;return t.total_in=t.total_out=i.total=0,t.msg="",i.wrap&&(t.adler=i.wrap&1),i.mode=xn,i.last=0,i.havedict=0,i.flags=-1,i.dmax=32768,i.head=null,i.hold=0,i.bits=0,i.lencode=i.lendyn=new Int32Array(Ug),i.distcode=i.distdyn=new Int32Array(Ng),i.sane=1,i.back=-1,Ie},Lc=t=>{if(Ue(t))return $t;const i=t.state;return i.wsize=0,i.whave=0,i.wnext=0,Ic(t)},kc=(t,i)=>{let e;if(Ue(t))return $t;const n=t.state;return i<0?(e=0,i=-i):(e=(i>>4)+5,i<48&&(i&=15)),i&&(i<8||i>15)?$t:(n.window!==null&&n.wbits!==i&&(n.window=null),n.wrap=e,n.wbits=i,Lc(t))},Uc=(t,i)=>{if(!t)return $t;const e=new Fg;t.state=e,e.strm=t,e.window=null,e.mode=xn;const n=kc(t,i);return n!==Ie&&(t.state=null),n},jg=t=>Uc(t,Bg);let ho=!0,Kn,Yn;const zg=t=>{if(ho){Kn=new Int32Array(512),Yn=new Int32Array(32);let i=0;for(;i<144;)t.lens[i++]=8;for(;i<256;)t.lens[i++]=9;for(;i<280;)t.lens[i++]=7;for(;i<288;)t.lens[i++]=8;for(bi(Tc,t.lens,0,288,Kn,0,t.work,{bits:9}),i=0;i<32;)t.lens[i++]=5;bi(Cc,t.lens,0,32,Yn,0,t.work,{bits:5}),ho=!1}t.lencode=Kn,t.lenbits=9,t.distcode=Yn,t.distbits=5},Nc=(t,i,e,n)=>{let s;const r=t.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),n>=r.wsize?(r.window.set(i.subarray(e-r.wsize,e),0),r.wnext=0,r.whave=r.wsize):(s=r.wsize-r.wnext,s>n&&(s=n),r.window.set(i.subarray(e-n,e-n+s),r.wnext),n-=s,n?(r.window.set(i.subarray(e-n,e),0),r.wnext=n,r.whave=r.wsize):(r.wnext+=s,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=s))),0},Hg=(t,i)=>{let e,n,s,r,a,o,f,c,v,y,h,d,l,u,g=0,p,m,_,w,E,A,S,x;const D=new Uint8Array(4);let I,P;const z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ue(t)||!t.output||!t.input&&t.avail_in!==0)return $t;e=t.state,e.mode===se&&(e.mode=Wn),a=t.next_out,s=t.output,f=t.avail_out,r=t.next_in,n=t.input,o=t.avail_in,c=e.hold,v=e.bits,y=o,h=f,x=Ie;t:for(;;)switch(e.mode){case xn:if(e.wrap===0){e.mode=Wn;break}for(;v<16;){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}if(e.wrap&2&&c===35615){e.wbits===0&&(e.wbits=15),e.check=0,D[0]=c&255,D[1]=c>>>8&255,e.check=ft(e.check,D,2,0),c=0,v=0,e.mode=za;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",e.mode=st;break}if((c&15)!==ja){t.msg="unknown compression method",e.mode=st;break}if(c>>>=4,v-=4,S=(c&15)+8,e.wbits===0&&(e.wbits=S),S>15||S>e.wbits){t.msg="invalid window size",e.mode=st;break}e.dmax=1<<e.wbits,e.flags=0,t.adler=e.check=1,e.mode=c&512?Ka:se,c=0,v=0;break;case za:for(;v<16;){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}if(e.flags=c,(e.flags&255)!==ja){t.msg="unknown compression method",e.mode=st;break}if(e.flags&57344){t.msg="unknown header flags set",e.mode=st;break}e.head&&(e.head.text=c>>8&1),e.flags&512&&e.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,e.check=ft(e.check,D,2,0)),c=0,v=0,e.mode=Ha;case Ha:for(;v<32;){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}e.head&&(e.head.time=c),e.flags&512&&e.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,D[2]=c>>>16&255,D[3]=c>>>24&255,e.check=ft(e.check,D,4,0)),c=0,v=0,e.mode=Ga;case Ga:for(;v<16;){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}e.head&&(e.head.xflags=c&255,e.head.os=c>>8),e.flags&512&&e.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,e.check=ft(e.check,D,2,0)),c=0,v=0,e.mode=Za;case Za:if(e.flags&1024){for(;v<16;){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}e.length=c,e.head&&(e.head.extra_len=c),e.flags&512&&e.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,e.check=ft(e.check,D,2,0)),c=0,v=0}else e.head&&(e.head.extra=null);e.mode=Va;case Va:if(e.flags&1024&&(d=e.length,d>o&&(d=o),d&&(e.head&&(S=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(n.subarray(r,r+d),S)),e.flags&512&&e.wrap&4&&(e.check=ft(e.check,n,d,r)),o-=d,r+=d,e.length-=d),e.length))break t;e.length=0,e.mode=Wa;case Wa:if(e.flags&2048){if(o===0)break t;d=0;do S=n[r+d++],e.head&&S&&e.length<65536&&(e.head.name+=String.fromCharCode(S));while(S&&d<o);if(e.flags&512&&e.wrap&4&&(e.check=ft(e.check,n,d,r)),o-=d,r+=d,S)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=Qa;case Qa:if(e.flags&4096){if(o===0)break t;d=0;do S=n[r+d++],e.head&&S&&e.length<65536&&(e.head.comment+=String.fromCharCode(S));while(S&&d<o);if(e.flags&512&&e.wrap&4&&(e.check=ft(e.check,n,d,r)),o-=d,r+=d,S)break t}else e.head&&(e.head.comment=null);e.mode=qa;case qa:if(e.flags&512){for(;v<16;){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}if(e.wrap&4&&c!==(e.check&65535)){t.msg="header crc mismatch",e.mode=st;break}c=0,v=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),t.adler=e.check=0,e.mode=se;break;case Ka:for(;v<32;){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}t.adler=e.check=co(c),c=0,v=0,e.mode=un;case un:if(e.havedict===0)return t.next_out=a,t.avail_out=f,t.next_in=r,t.avail_in=o,e.hold=c,e.bits=v,Lg;t.adler=e.check=1,e.mode=se;case se:if(i===Pg||i===Wi)break t;case Wn:if(e.last){c>>>=v&7,v-=v&7,e.mode=qn;break}for(;v<3;){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}switch(e.last=c&1,c>>>=1,v-=1,c&3){case 0:e.mode=Ya;break;case 1:if(zg(e),e.mode=Qi,i===Wi){c>>>=2,v-=2;break t}break;case 2:e.mode=Ja;break;case 3:t.msg="invalid block type",e.mode=st}c>>>=2,v-=2;break;case Ya:for(c>>>=v&7,v-=v&7;v<32;){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",e.mode=st;break}if(e.length=c&65535,c=0,v=0,e.mode=Qn,i===Wi)break t;case Qn:e.mode=Xa;case Xa:if(d=e.length,d){if(d>o&&(d=o),d>f&&(d=f),d===0)break t;s.set(n.subarray(r,r+d),a),o-=d,r+=d,f-=d,a+=d,e.length-=d;break}e.mode=se;break;case Ja:for(;v<14;){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}if(e.nlen=(c&31)+257,c>>>=5,v-=5,e.ndist=(c&31)+1,c>>>=5,v-=5,e.ncode=(c&15)+4,c>>>=4,v-=4,e.nlen>286||e.ndist>30){t.msg="too many length or distance symbols",e.mode=st;break}e.have=0,e.mode=to;case to:for(;e.have<e.ncode;){for(;v<3;){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}e.lens[z[e.have++]]=c&7,c>>>=3,v-=3}for(;e.have<19;)e.lens[z[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,I={bits:e.lenbits},x=bi(Mg,e.lens,0,19,e.lencode,0,e.work,I),e.lenbits=I.bits,x){t.msg="invalid code lengths set",e.mode=st;break}e.have=0,e.mode=eo;case eo:for(;e.have<e.nlen+e.ndist;){for(;g=e.lencode[c&(1<<e.lenbits)-1],p=g>>>24,m=g>>>16&255,_=g&65535,!(p<=v);){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}if(_<16)c>>>=p,v-=p,e.lens[e.have++]=_;else{if(_===16){for(P=p+2;v<P;){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}if(c>>>=p,v-=p,e.have===0){t.msg="invalid bit length repeat",e.mode=st;break}S=e.lens[e.have-1],d=3+(c&3),c>>>=2,v-=2}else if(_===17){for(P=p+3;v<P;){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}c>>>=p,v-=p,S=0,d=3+(c&7),c>>>=3,v-=3}else{for(P=p+7;v<P;){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}c>>>=p,v-=p,S=0,d=11+(c&127),c>>>=7,v-=7}if(e.have+d>e.nlen+e.ndist){t.msg="invalid bit length repeat",e.mode=st;break}for(;d--;)e.lens[e.have++]=S}}if(e.mode===st)break;if(e.lens[256]===0){t.msg="invalid code -- missing end-of-block",e.mode=st;break}if(e.lenbits=9,I={bits:e.lenbits},x=bi(Tc,e.lens,0,e.nlen,e.lencode,0,e.work,I),e.lenbits=I.bits,x){t.msg="invalid literal/lengths set",e.mode=st;break}if(e.distbits=6,e.distcode=e.distdyn,I={bits:e.distbits},x=bi(Cc,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,I),e.distbits=I.bits,x){t.msg="invalid distances set",e.mode=st;break}if(e.mode=Qi,i===Wi)break t;case Qi:e.mode=qi;case qi:if(o>=6&&f>=258){t.next_out=a,t.avail_out=f,t.next_in=r,t.avail_in=o,e.hold=c,e.bits=v,xg(t,h),a=t.next_out,s=t.output,f=t.avail_out,r=t.next_in,n=t.input,o=t.avail_in,c=e.hold,v=e.bits,e.mode===se&&(e.back=-1);break}for(e.back=0;g=e.lencode[c&(1<<e.lenbits)-1],p=g>>>24,m=g>>>16&255,_=g&65535,!(p<=v);){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}if(m&&(m&240)===0){for(w=p,E=m,A=_;g=e.lencode[A+((c&(1<<w+E)-1)>>w)],p=g>>>24,m=g>>>16&255,_=g&65535,!(w+p<=v);){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}c>>>=w,v-=w,e.back+=w}if(c>>>=p,v-=p,e.back+=p,e.length=_,m===0){e.mode=ao;break}if(m&32){e.back=-1,e.mode=se;break}if(m&64){t.msg="invalid literal/length code",e.mode=st;break}e.extra=m&15,e.mode=io;case io:if(e.extra){for(P=e.extra;v<P;){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}e.length+=c&(1<<e.extra)-1,c>>>=e.extra,v-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=no;case no:for(;g=e.distcode[c&(1<<e.distbits)-1],p=g>>>24,m=g>>>16&255,_=g&65535,!(p<=v);){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}if((m&240)===0){for(w=p,E=m,A=_;g=e.distcode[A+((c&(1<<w+E)-1)>>w)],p=g>>>24,m=g>>>16&255,_=g&65535,!(w+p<=v);){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}c>>>=w,v-=w,e.back+=w}if(c>>>=p,v-=p,e.back+=p,m&64){t.msg="invalid distance code",e.mode=st;break}e.offset=_,e.extra=m&15,e.mode=so;case so:if(e.extra){for(P=e.extra;v<P;){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}e.offset+=c&(1<<e.extra)-1,c>>>=e.extra,v-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){t.msg="invalid distance too far back",e.mode=st;break}e.mode=ro;case ro:if(f===0)break t;if(d=h-f,e.offset>d){if(d=e.offset-d,d>e.whave&&e.sane){t.msg="invalid distance too far back",e.mode=st;break}d>e.wnext?(d-=e.wnext,l=e.wsize-d):l=e.wnext-d,d>e.length&&(d=e.length),u=e.window}else u=s,l=a-e.offset,d=e.length;d>f&&(d=f),f-=d,e.length-=d;do s[a++]=u[l++];while(--d);e.length===0&&(e.mode=qi);break;case ao:if(f===0)break t;s[a++]=e.length,f--,e.mode=qi;break;case qn:if(e.wrap){for(;v<32;){if(o===0)break t;o--,c|=n[r++]<<v,v+=8}if(h-=f,t.total_out+=h,e.total+=h,e.wrap&4&&h&&(t.adler=e.check=e.flags?ft(e.check,s,h,a-h):Ti(e.check,s,h,a-h)),h=f,e.wrap&4&&(e.flags?c:co(c))!==e.check){t.msg="incorrect data check",e.mode=st;break}c=0,v=0}e.mode=oo;case oo:if(e.wrap&&e.flags){for(;v<32;){if(o===0)break t;o--,c+=n[r++]<<v,v+=8}if(e.wrap&4&&c!==(e.total&4294967295)){t.msg="incorrect length check",e.mode=st;break}c=0,v=0}e.mode=lo;case lo:x=Ig;break t;case st:x=Oc;break t;case Mc:return Rc;case Pc:default:return $t}return t.next_out=a,t.avail_out=f,t.next_in=r,t.avail_in=o,e.hold=c,e.bits=v,(e.wsize||h!==t.avail_out&&e.mode<st&&(e.mode<qn||i!==Fa))&&Nc(t,t.output,t.next_out,h-t.avail_out),y-=t.avail_in,h-=t.avail_out,t.total_in+=y,t.total_out+=h,e.total+=h,e.wrap&4&&h&&(t.adler=e.check=e.flags?ft(e.check,s,h,t.next_out-h):Ti(e.check,s,h,t.next_out-h)),t.data_type=e.bits+(e.last?64:0)+(e.mode===se?128:0)+(e.mode===Qi||e.mode===Qn?256:0),(y===0&&h===0||i===Fa)&&x===Ie&&(x=kg),x},Gg=t=>{if(Ue(t))return $t;let i=t.state;return i.window&&(i.window=null),t.state=null,Ie},Zg=(t,i)=>{if(Ue(t))return $t;const e=t.state;return(e.wrap&2)===0?$t:(e.head=i,i.done=!1,Ie)},Vg=(t,i)=>{const e=i.length;let n,s,r;return Ue(t)||(n=t.state,n.wrap!==0&&n.mode!==un)?$t:n.mode===un&&(s=1,s=Ti(s,i,e,0),s!==n.check)?Oc:(r=Nc(t,i,e,e),r?(n.mode=Mc,Rc):(n.havedict=1,Ie))};var Wg=Lc,Qg=kc,qg=Ic,Kg=jg,Yg=Uc,Xg=Hg,Jg=Gg,tm=Zg,em=Vg,im="pako inflate (from Nodeca project)",oe={inflateReset:Wg,inflateReset2:Qg,inflateResetKeep:qg,inflateInit:Kg,inflateInit2:Yg,inflate:Xg,inflateEnd:Jg,inflateGetHeader:tm,inflateSetDictionary:em,inflateInfo:im};function nm(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var sm=nm;const $c=Object.prototype.toString,{Z_NO_FLUSH:rm,Z_FINISH:am,Z_OK:Ri,Z_STREAM_END:Xn,Z_NEED_DICT:Jn,Z_STREAM_ERROR:om,Z_DATA_ERROR:uo,Z_MEM_ERROR:lm}=yn;function Dn(t){this.options=Sn.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const i=this.options;i.raw&&i.windowBits>=0&&i.windowBits<16&&(i.windowBits=-i.windowBits,i.windowBits===0&&(i.windowBits=-15)),i.windowBits>=0&&i.windowBits<16&&!(t&&t.windowBits)&&(i.windowBits+=32),i.windowBits>15&&i.windowBits<48&&(i.windowBits&15)===0&&(i.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new xc,this.strm.avail_out=0;let e=oe.inflateInit2(this.strm,i.windowBits);if(e!==Ri)throw new Error(Me[e]);if(this.header=new sm,oe.inflateGetHeader(this.strm,this.header),i.dictionary&&(typeof i.dictionary=="string"?i.dictionary=Oi.string2buf(i.dictionary):$c.call(i.dictionary)==="[object ArrayBuffer]"&&(i.dictionary=new Uint8Array(i.dictionary)),i.raw&&(e=oe.inflateSetDictionary(this.strm,i.dictionary),e!==Ri)))throw new Error(Me[e])}Dn.prototype.push=function(t,i){const e=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let r,a,o;if(this.ended)return!1;for(i===~~i?a=i:a=i===!0?am:rm,$c.call(t)==="[object ArrayBuffer]"?e.input=new Uint8Array(t):e.input=t,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(n),e.next_out=0,e.avail_out=n),r=oe.inflate(e,a),r===Jn&&s&&(r=oe.inflateSetDictionary(e,s),r===Ri?r=oe.inflate(e,a):r===uo&&(r=Jn));e.avail_in>0&&r===Xn&&e.state.wrap>0&&t[e.next_in]!==0;)oe.inflateReset(e),r=oe.inflate(e,a);switch(r){case om:case uo:case Jn:case lm:return this.onEnd(r),this.ended=!0,!1}if(o=e.avail_out,e.next_out&&(e.avail_out===0||r===Xn))if(this.options.to==="string"){let f=Oi.utf8border(e.output,e.next_out),c=e.next_out-f,v=Oi.buf2string(e.output,f);e.next_out=c,e.avail_out=n-c,c&&e.output.set(e.output.subarray(f,f+c),0),this.onData(v)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(r===Ri&&o===0)){if(r===Xn)return r=oe.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};Dn.prototype.onData=function(t){this.chunks.push(t)};Dn.prototype.onEnd=function(t){t===Ri&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Sn.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function cm(t,i){const e=new Dn(i);if(e.push(t),e.err)throw e.msg||Me[e.err];return e.result}var hm=cm,um={inflate:hm};const{deflate:dm}=Sg,{inflate:fm}=um;var pm=dm,vm=fm;function gm(t){const i=t.reduce((s,r)=>s+r.length+4,0),e=new Uint8Array(i);let n=0;return t.forEach(s=>{const r=s.length;e[n++]=r>>24&255,e[n++]=r>>16&255,e[n++]=r>>8&255,e[n++]=r&255,e.set(s,n),n+=r}),e}function mm(t){const i=[];let e=0;for(;e<t.length;){const n=t[e++]<<24|t[e++]<<16|t[e++]<<8|t[e++],s=t.slice(e,e+n);i.push(s),e+=n}return i}function bm(t,i){const e=JSON.stringify(i),n=Em(e);return gm([n,t])}function wm(t,i){return bm(t,i)}function _m(t){const i=mm(t);if(i.length!==2)throw new Error("Invalid buffer");const[e,n]=i,s=JSON.parse(Sm(e));return[n,s]}function ym(t){const[i,e]=_m(t);return e.contentType||(e.contentType="application/octet-stream"),[i,e]}function Em(t){const i=new Uint8Array(t.length);for(let e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i}function Sm(t){return String.fromCharCode(...t)}function Am(){const t=new Uint32Array(256);for(let i=0;i<256;i++){let e=i;for(let n=8;n>0;n--)e&1?e=e>>>1^3988292384:e=e>>>1;t[i]=e>>>0}return t}const xm=Am();function ys(t,i){let e=4294967295;for(let n=0;n<t.length;n++){const s=t[n];e=e>>>8^xm[(e^s)&255]}return(e^i^4294967295)>>>0}function Dm(t){const{k:i,bytes:e,checksum:n,indices:s,data:r}=t,a=new Uint32Array([s.length,...s,i,e,n]),o=new Uint8Array(a.length*4+r.length);let f=0;return o.set(new Uint8Array(a.buffer),f),f+=a.length*4,o.set(r,f),o}function Tm(t){const i=new Uint32Array(t.buffer,0,4)[0],e=Array.from(new Uint32Array(t.buffer,4,i+3)),n=e.slice(0,i),[s,r,a]=e.slice(i),o=t.slice(4*(i+4));return{k:s,bytes:r,checksum:a,indices:n,data:o}}function ts(t,i){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t[n]^i[n];return e}function Cm(t){return new Om(t)}class Om{constructor(i){wt(this,"decodedData",[]);wt(this,"decodedCount",0);wt(this,"encodedCount",0);wt(this,"encodedBlocks",new Set);wt(this,"encodedBlockKeyMap",new Map);wt(this,"encodedBlockSubkeyMap",new Map);wt(this,"encodedBlockIndexMap",new Map);wt(this,"disposedEncodedBlocks",new Map);wt(this,"meta");if(i)for(const e of i)this.addBlock(e)}addBlock(i){if(this.meta||(this.meta=i,this.decodedData=Array.from({length:this.meta.k})),i.checksum!==this.meta.checksum)throw new Error("Adding block with different checksum");return this.encodedCount+=1,i.indices=i.indices.sort((e,n)=>e-n),this.propagateDecoded(li(i.indices),i),this.decodedCount===this.meta.k}propagateDecoded(i,e){var g;const{decodedData:n,encodedBlocks:s,encodedBlockIndexMap:r,encodedBlockKeyMap:a,encodedBlockSubkeyMap:o,disposedEncodedBlocks:f}=this;let c,v,{data:y,indices:h}=e;const d=new Set(h);let l,u;if(!(a.has(i)||h.every(p=>n[p]!=null))){if(h.length>1){for(const p of h)n[p]!=null&&(e.data=y=ts(y,n[p]),d.delete(p));d.size!==h.length&&(e.indices=h=Array.from(d))}if(h.length>2){const p=[];for(const m of h){const _=li(h.filter(w=>w!==m));if(l=a.get(_)){e.data=y=ts(y,l.data),u=new Set(l.indices);for(const w of u)d.delete(w);e.indices=h=Array.from(d);break}else p.push([m,_])}d.size>1&&p.forEach(([m,_])=>{var E,A,S,x;const w=()=>{var D;return(D=o.get(_))==null?void 0:D.delete(e)};(A=(E=o.get(_))==null?void 0:E.add(e))!=null||o.set(_,new Set([e])),(x=(S=f.get(m))==null?void 0:S.push(w))!=null||f.set(m,[w])})}if(h.length>1){e.indices.forEach(m=>{var _,w;s.add(e),(w=(_=r.get(m))==null?void 0:_.add(e))!=null||r.set(m,new Set([e]))}),a.set(i=li(h),e);const p=o.get(i);if(p){o.delete(i);for(const m of p){const _=new Set(m.indices);m.data=ts(m.data,y);for(const w of h)_.delete(w);m.indices=Array.from(_),this.propagateDecoded(li(m.indices),m)}}}else if(n[c=h[0]]==null&&(s.delete(e),(g=f.get(c))==null||g.forEach(p=>p()),n[c]=e.data,this.decodedCount+=1,v=r.get(c))){r.delete(c);for(const p of v)i=li(p.indices),a.delete(i),this.propagateDecoded(i,p)}}}getDecoded(){if(this.decodedCount!==this.meta.k||this.decodedData.some(s=>s==null))return;const i=this.meta.data.length,e=this.decodedData,n=new Uint8Array(this.meta.bytes);e.forEach((s,r)=>{const a=r*i;if(a+i>n.length)for(let o=0;o<n.length-a;o++)n[a+o]=s[o];else n.set(s,r*i)});try{const s=vm(n);if(ys(s,this.meta.k)===this.meta.checksum)return s}catch(s){if(ys(n,this.meta.k)===this.meta.checksum)return n}throw new Error("Checksum mismatch")}}function li(t){return t.join(",")}function Rm(t,i,e=!0){return new Mm(t,i,e)}class Mm{constructor(i,e,n=!0){wt(this,"k");wt(this,"indices");wt(this,"checksum");wt(this,"bytes");wt(this,"compressed");this.data=i,this.sliceSize=e,this.compress=n,this.compressed=n?pm(i):i,this.indices=Pm(this.compressed,e),this.k=this.indices.length,this.checksum=ys(this.data,this.k),this.bytes=this.compressed.length}createBlock(i){const e=new Uint8Array(this.sliceSize);for(const n of i){const s=this.indices[n];for(let r=0;r<this.sliceSize;r++)e[r]=e[r]^s[r]}return{k:this.k,bytes:this.bytes,checksum:this.checksum,indices:i,data:e}}*fountain(){for(;;){const i=Im(this.k),e=Lm(this.k,i);yield this.createBlock(e)}}}function Pm(t,i){const e=[];for(let n=0;n<t.length;n+=i){const s=new Uint8Array(i);s.set(t.slice(n,n+i)),e.push(s)}return e}function Im(t){const i=Array.from({length:t},()=>0);i[0]=1/t;for(let s=2;s<=t;s++)i[s-1]=1/(s*(s-1));const e=i.reduce((s,r,a)=>(s.push(r+(s[a-1]||0)),s),[]),n=Math.random();for(let s=0;s<e.length;s++)if(n<e[s])return s+1;return t}function Lm(t,i){const e=new Set;for(;e.size<i;){const n=Math.floor(Math.random()*t);e.add(n)}return Array.from(e)}const Tn=typeof Buffer=="function";typeof TextDecoder=="function"&&new TextDecoder;typeof TextEncoder=="function"&&new TextEncoder;const km="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",di=Array.prototype.slice.call(km),Ki=(t=>{let i={};return t.forEach((e,n)=>i[e]=n),i})(di),Um=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,nn=String.fromCharCode.bind(String),fo=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),Nm=t=>t.replace(/=/g,"").replace(/[+\/]/g,i=>i=="+"?"-":"_"),Bc=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),$m=t=>{let i,e,n,s,r="";const a=t.length%3;for(let o=0;o<t.length;){if((e=t.charCodeAt(o++))>255||(n=t.charCodeAt(o++))>255||(s=t.charCodeAt(o++))>255)throw new TypeError("invalid character found");i=e<<16|n<<8|s,r+=di[i>>18&63]+di[i>>12&63]+di[i>>6&63]+di[i&63]}return a?r.slice(0,a-3)+"===".substring(a):r},Bm=typeof btoa=="function"?t=>btoa(t):Tn?t=>Buffer.from(t,"binary").toString("base64"):$m,po=Tn?t=>Buffer.from(t).toString("base64"):t=>{let e=[];for(let n=0,s=t.length;n<s;n+=4096)e.push(nn.apply(null,t.subarray(n,n+4096)));return Bm(e.join(""))},Fm=(t,i=!1)=>i?Nm(po(t)):po(t),jm=t=>{if(t=t.replace(/\s+/g,""),!Um.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let i,e="",n,s;for(let r=0;r<t.length;)i=Ki[t.charAt(r++)]<<18|Ki[t.charAt(r++)]<<12|(n=Ki[t.charAt(r++)])<<6|(s=Ki[t.charAt(r++)]),e+=n===64?nn(i>>16&255):s===64?nn(i>>16&255,i>>8&255):nn(i>>16&255,i>>8&255,i&255);return e},zm=typeof atob=="function"?t=>atob(Bc(t)):Tn?t=>Buffer.from(t,"base64").toString("binary"):jm,Hm=Tn?t=>fo(Buffer.from(t,"base64")):t=>fo(zm(t).split("").map(i=>i.charCodeAt(0))),Gm=t=>Hm(Zm(t)),Zm=t=>Bc(t.replace(/[-_]/g,i=>i=="-"?"+":"/"));var Vm=Object.getOwnPropertyDescriptor,Wm=(t,i,e,n)=>{for(var s=n>1?void 0:n?Vm(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let vo=class{constructor(){this.b=null,this.c=b(bn),this.a=null,this.d=new ut,this.e=b(ti),this.checksum=null,this.data=null,this.decodedCount=0,this.encodedCount=0,this.endTime=null,this.explainAsk=!1,this.explainDeny=!1,this.explainUnavailable=!1,this.fps=0,this.k=0,this.lastFrameTime=null,this.showControls=!1,this.startTime=null,this.timeFilter=null,this.torchAvailable=!1,this.torchClass="",this.torchEnabled=!1}onViewInit(){this.c.availabilityState(!0).pipe(tt(this.d)).subscribe(t=>{this.explainAsk=t===T.PROMPT,this.explainDeny=t===T.DENIED,this.explainUnavailable=t===T.UNAVAILABLE;const i=t===T.ALLOWED;this.showControls!==i&&(this.showControls=i,this.showControls&&this.g())}),this.e.availabilityState(!0).pipe(tt(this.d)).subscribe(t=>{this.torchAvailable=t===T.ALLOWED})}onDestroy(){this.d.next(null),this.d.complete(),this.h()}grant(){this.explainAsk=!1,this.c.prompt()}toggleTorch(){this.torchEnabled?this.e.turnOff():this.e.turnOn(),this.f()}i(){let t="";const i=()=>{this.c.detect(this.video).then(e=>{e.length&&e[0].rawValue!==t&&(t=e[0].rawValue,this.j(e[0].rawValue))||(this.b=requestAnimationFrame(i))})};this.b=requestAnimationFrame(i)}h(){this.b!==null&&cancelAnimationFrame(this.b)}j(t){t.startsWith("http")&&(t=t.slice(t.indexOf("#")+1));const i=Gm(t),e=Tm(i);if((this.checksum!==e.checksum||this.k!==e.k)&&(this.checksum=e.checksum,this.k=e.k,this.a=Cm(),this.decodedCount=0,this.encodedCount=0,this.fps=null,this.startTime=Date.now(),this.timeFilter=new sd({initialEstimate:500,initialErrorInEstimate:500}),this.lastFrameTime=null),this.lastFrameTime){const s=this.timeFilter.update({measurement:Date.now()-this.lastFrameTime,errorInMeasurement:1}),[r]=s;this.fps=Math.round(1e3/r*100)/100}this.lastFrameTime=Date.now();const n=this.a.addBlock(e);if(this.decodedCount=this.a.decodedCount,this.encodedCount=this.a.encodedCount,n){const s=this.a.getDecoded(),[r,a]=ym(s);this.endTime=Date.now(),this.data=r,this.meta=a}return n}f(){this.e.currentStatus().then(t=>{this.torchEnabled=t,this.torchClass=t?"enabled":""})}g(){this.c.getStream().then(t=>{const i=t.getVideoTracks()[0];if(!i)return;const e=i.getCapabilities().zoom;if(e){const n=Math.min(Math.max(1,e.min),e.max);i.applyConstraints({advanced:[{zoom:n}]})}this.video&&(this.video.srcObject=t,this.video.addEventListener("loadedmetadata",()=>{this.i()})),this.f()})}};vo=Wm([O("file-transfer-receive-app",{style:R`.wrapper{display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;height:100%;width:100%;overflow:hidden}@media (orientation:landscape){.wrapper{flex-direction:row}}.qr{max-height:95vmin;max-width:95vmin;flex-grow:1;aspect-ratio:1/1;box-sizing:border-box;margin:2em;border:1px solid}.center{display:flex;justify-content:center;align-items:center}video{height:100%;width:100%;object-fit:cover;touch-action:none}`,template:C`<permission-prompt *if="explainAsk" @grant.stop.prevent="grant()" message-id="fileTransfer.receive.explainAsk"></permission-prompt><permission-denied *if="explainDeny"></permission-denied><camera-unavailable *if="explainUnavailable"></camera-unavailable><default-layout *if="showControls"><div *if="!data" class="wrapper"><div class="qr"><video #ref="video" autoplay muted playsinline></video></div><div class="center">{{ decodedCount }} / {{ k }} (+ {{ encodedCount }}) @ {{ fps }} <i18n-label id="fileTransfer.receive.fps"></i18n-label></div></div><file-transfer-receive-view *if="data" .data="data" .meta="meta"></file-transfer-receive-view><scaling-icon slot="more-buttons" *if="torchAvailable" @click.stop.prevent="toggleTorch()" class="{{torchClass}}" href="/flashlight.svg"></scaling-icon></default-layout>`})],vo);var Qm=Object.getOwnPropertyDescriptor,qm=(t,i,e,n)=>{for(var s=n>1?void 0:n?Qm(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};const es={downloadUrl:null};let go=class{constructor(){this.contentType="application/octet-stream",this.contentTypeFirst="application",this.downloadUrl=null,this.filename="download.dat"}onChange(t){var i,e;t==="meta"&&(this.contentType=`${(i=this.meta)==null?void 0:i.contentType}`||"application/octet-stream",this.contentTypeFirst=this.contentType.split("/")[0],this.contentTypeFirst==="text"?this.text=new TextDecoder().decode(this.data||new Uint8Array):this.text="",this.filename=`${(e=this.meta)==null?void 0:e.filename}`||"download.dat",this.a()),t==="data"&&this.a()}a(){this.b()}b(){es.downloadUrl&&URL.revokeObjectURL(es.downloadUrl),this.downloadUrl=URL.createObjectURL(new Blob([this.data||new Uint8Array],{type:this.contentType})),es.downloadUrl=this.downloadUrl}};go=qm([O("file-transfer-receive-view",{prop:["data","meta"],style:R`.wrapper{display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;height:100%;width:100%;overflow:hidden}.preview{max-width:100%;max-height:100%;border:1px solid;flex-shrink:1;overflow:auto;display:flex}audio,img,video{max-width:100%;max-height:100%;flex-shrink:1}`,template:C`<div class="wrapper"><div *if="contentTypeFirst === 'image'" class="preview"><img src="{{downloadUrl}}"></div><div *if="contentTypeFirst === 'video'" class="preview"><video controls><source src="{{downloadUrl}}" type="{{contentType}}"></video></div><div *if="contentTypeFirst === 'audio'" class="preview"><audio controls src="{{downloadUrl}}"></audio></div><div *if="contentTypeFirst === 'text'" class="preview"><pre>{{text}}</pre></div><a *if="downloadUrl" .href="downloadUrl" download="{{filename}}"><i18n-label id="fileTransfer.receive.download"></i18n-label>{{ filename }}</a></div>`})],go);var Km=Object.getOwnPropertyDescriptor,Ym=(t,i,e,n)=>{for(var s=n>1?void 0:n?Km(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let mo=class{constructor(){this.b=null,this.a=[],this.c=[1],this.d=null,this.contentType="",this.fileLoaded=!1,this.filename="",this.fileSelected=!1,this.fps=10,this.qrContent="",this.size=300}onDestroy(){this.d&&clearTimeout(this.d)}fpsChange(t){this.fps=+t}selectFile(t){return Ne(this,null,function*(){if(!t||!t.length)return;const i=t[0];this.fileSelected=!0,this.filename=i.name,this.contentType=i.type;const e=yield i.arrayBuffer(),n=wm(new Uint8Array(e),{filename:this.filename,contentType:this.contentType});this.fileLoaded=!0,this.b=Rm(n,this.size),this.c=this.f(this.b.k),this.e()})}sizeChange(t){this.size=+t}e(){const t=Date.now(),i=this.g(this.b.k),e=this.h(this.b.k,i),n=this.b.createBlock(e),s=Dm(n),r=Fm(s);this.qrContent=`https://be-prepared.github.io/r#${r}`;const a=Date.now(),o=1e3/this.fps;this.d=setTimeout(()=>this.e(),Math.max(10,o-(a-t)))}g(t){const i=Math.random();for(let e=0;e<this.c.length&&e<t;e+=1)if(i<=this.c[e])return e+1;return t}h(t,i){const e=new Set;if(!this.a.length){this.a=Array.from({length:t},(n,s)=>s);for(let n=0;n<t;n+=1){const s=Math.floor(Math.random()*t),r=this.a[n];this.a[n]=this.a[s],this.a[s]=r}}for(e.add(this.a.pop());e.size<i;)e.add(Math.floor(Math.random()*t));return Array.from(e)}f(t){const n=.04*Math.sqrt(t)*Math.log(t/.01),s=Math.min(t/16,Math.floor(n)),r=Math.floor(t/s);let a=0;const o=[];for(let c=1;c<=16;c+=1){let v=n/(t*c);c===r&&(v=s*Math.log(s/.01)/t);let y=1/(c*(c-1));c===1&&(y=1/t);const h=v+y;o.push(h),a+=h}let f=0;for(let c=0;c<o.length;c+=1)f+=o[c]/a,o[c]=f;return o[15]=1,t<16&&(o[t-1]=1),o}};mo=Ym([O("file-transfer-send-app",{style:R`.wrapper{display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;height:100%;width:100%;overflow:hidden}@media (orientation:landscape){.wrapper{flex-direction:row}}.qr{max-height:95vmin;max-width:95vmin;flex-grow:1;aspect-ratio:1/1;box-sizing:border-box;margin:2em;border:1px solid}.center{display:flex;justify-content:center;align-items:center}.range{width:50vw}.file-input{display:none}.full{width:100%;height:100%}`,template:C`<default-layout><div *if="!fileSelected && !fileLoaded" class="wrapper"><div class="qr"><label class="full center"><input type="file" class="file-input" @change="selectFile($event.target.files)"><i18n-label id="fileTransfer.send.selectFile"></i18n-label></label></div><div class="controls"><div class="center"><span><i18n-label id="fileTransfer.send.size"></i18n-label>{{size}}</span></div><input type="range" min="100" max="2100" step="50" value="{{size}}" @change.stop.prevent="sizeChange($event.target.value)" class="range"></div></div><div *if="!fileLoaded && fileSelected" class="wrapper"><i18n-label id="fileTransfer.send.loading"></i18n-label></div><div *if="fileLoaded" class="wrapper"><div class="qr"><qr-code content="{{qrContent}}"></qr-code></div><div class="controls"><div class="center"><span><i18n-label id="fileTransfer.send.fps"></i18n-label>{{fps}}</span></div><input type="range" min="1" max="30" step="1" value="{{fps}}" @change.stop.prevent="fpsChange($event.target.value)" class="range"></div></div></default-layout>`})],mo);const Cn=()=>history.back();var Xm=Object.getOwnPropertyDescriptor,Jm=(t,i,e,n)=>{for(var s=n>1?void 0:n?Xm(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let bo=class{back(){Cn()}};bo=Jm([O("back-button",{style:R``,template:C`<scaling-icon @click.stop.prevent="back()" href="/back.svg"></scaling-icon>`})],bo);var t0=Object.getOwnPropertyDescriptor,e0=(t,i,e,n)=>{for(var s=n>1?void 0:n?t0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let wo=class{constructor(){this.content=""}};wo=e0([O("big-qr",{attr:["content"],style:R`:host{display:flex;justify-content:center;align-items:center}.svg{width:90vmin;height:90vmin}`,template:C`<div class="svg"><qr-code content="{{content}}"></qr-code></div>`})],wo);var i0=Object.getOwnPropertyDescriptor,n0=(t,i,e,n)=>{for(var s=n>1?void 0:n?i0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let _o=Promise.resolve(),yo=class{constructor(){this.c=()=>{}}onInit(){const t=this.b();t.show=()=>this.f(),t.hide=()=>this.d()}onDestroy(){this.a&&clearTimeout(this.a),this.c&&this.c()}d(){this.a&&clearTimeout(this.a),this.b().style.bottom=`-${this.e()}px`,this.a=setTimeout(()=>this.g(),2e3)}f(){_o=_o.then(()=>new Promise(t=>{this.c=t;const i=this.b().style;i.top="auto",i.bottom=`-${this.e()}px`,this.a=setTimeout(()=>{i.bottom="0",this.a=setTimeout(()=>{this.d()},15e3)},400)}))}g(){this.c(),this.b().remove()}b(){return Qc(this)}e(){const t=this.b().getBoundingClientRect();return Math.ceil(t.height+1)}};yo=n0([O("bottom-drawer",{style:R`:host{top:200vh;position:fixed;display:flex;transition:bottom 1s ease-in-out 0s;left:50%;transform:translate(-50%)}.tab{border-top-left-radius:8px;border-top-right-radius:8px;border-top:2px solid;border-left:2px solid;border-right:2px solid;padding:.3em .6em;background-color:var(--button-bg-color);display:flex;align-items:center}`,template:C`<div class="tab"><slot></slot></div>`,useShadow:!0})],yo);var s0=Object.getOwnPropertyDescriptor,r0=(t,i,e,n)=>{for(var s=n>1?void 0:n?s0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Eo=class{};Eo=r0([O("camera-unavailable",{style:R`.wrapper{height:100%;width:100%;display:flex;flex-direction:column;justify-content:space-evenly;align-items:center}.heading{font-size:2em}.message{max-width:90%}`,template:C`<default-layout><div class="wrapper"><div class="heading"><i18n-label id="shared.cameraUnavailable.heading"></i18n-label></div><div class="message"><i18n-label id="shared.cameraUnavailable.message"></i18n-label></div></div></default-layout>`})],Eo);var a0=Object.getOwnPropertyDescriptor,o0=(t,i,e,n)=>{for(var s=n>1?void 0:n?a0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let So=class{};So=o0([O("changeable-setting",{style:R`:host{text-decoration:underline;text-decoration-style:solid;text-decoration-color:var(--changeable-setting-underline-color);cursor:pointer}`,template:"<slot></slot>",useShadow:!0})],So);var l0=Object.getOwnPropertyDescriptor,c0=(t,i,e,n)=>{for(var s=n>1?void 0:n?l0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Ao=class{constructor(){this.innerClasses="inner"}onChange(){const t=["inner"];(this.frame||this.frame==="")&&t.push("frame"),this.innerClasses=t.join(" ")}};Ao=c0([O("default-layout",{attr:["frame"],style:R`:host{display:flex;flex-direction:column;height:100%;width:100%;box-sizing:border-box;position:absolute;inset:0}.outer{padding:1em 1em .2em 1em;height:100%;width:100%;overflow:hidden;display:flex;box-sizing:border-box}.inner{flex-grow:1;overflow:auto;height:100%;width:100%}.frame{padding:.3em;box-sizing:border-box;border-style:solid;border-width:1px}.buttons{display:flex;justify-content:space-between;padding:5px}@media (orientation:landscape){:host{flex-direction:row}.buttons{flex-direction:column-reverse}.outer{padding:1em .2em 1em 1em}}`,template:C`<div class="outer"><div class="{{innerClasses}}"><slot></slot></div></div><div class="buttons"><back-button></back-button><slot name="more-buttons"></slot></div>`,useShadow:!0})],Ao);var h0=Object.getOwnPropertyDescriptor,u0=(t,i,e,n)=>{for(var s=n>1?void 0:n?h0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let xo=class{onViewInit(){this.c(),this.d()}onDestroy(){this.b&&this.b.disconnect(),this.a&&this.a.disconnect()}c(){const t=this.wrapper,i=this.content;let e=1,n=16;const s=()=>i.style.fontSize=`${e}px`,r=t.clientWidth,a=t.clientHeight;s();const o=i.clientHeight;if(e=n,s(),i.clientHeight!==o){for(;i.clientHeight<=a;)e+=n,s();for(;n>=.1;)i.clientHeight>a||i.clientWidth>r?e-=n:(n-=n/2,e+=n),s();(i.clientHeight>a||i.clientWidth>r)&&(e-=n,s())}}d(){this.b=new ResizeObserver(()=>this.c()),this.b.observe(this.wrapper),this.a=new MutationObserver(()=>this.c()),this.a.observe(this.slot,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}};xo=u0([O("grow-to-fit-font-size",{style:R`:host{box-sizing:border-box;height:100%;width:100%}.wrapper{width:100%;height:100%;display:flex;align-items:center;justify-content:center}`,template:C`<div class="wrapper" #ref="wrapper"><div #ref="content"><slot #ref="slot"></slot></div></div>`,useShadow:!0})],xo);var d0=Object.getOwnPropertyDescriptor,f0=(t,i,e,n)=>{for(var s=n>1?void 0:n?d0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Do=class{constructor(){this.a=null}onChange(){this.a&&(this.c(),this.b(this.href))}onViewInit(){this.b(this.href)}d(t){const i=document.importNode(t,!0),e=al(this);e&&(e.appendChild(i),ye(this,"loadsvg"),this.a=i)}c(){this.a&&(this.a.remove(),this.a=null)}b(t){if(!t)return;const i=new XMLHttpRequest;i.open("get",t,!0),i.onreadystatechange=()=>{i.readyState===4&&i.responseXML&&this.d(i.responseXML.documentElement)},i.send()}};Do=f0([O("load-svg",{attr:["href"],style:R`:host{display:block}`,template:""})],Do);var p0=Object.getOwnPropertyDescriptor,v0=(t,i,e,n)=>{for(var s=n>1?void 0:n?p0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let To=class{constructor(){this.content=""}};To=v0([O("mini-qr",{attr:["content"],style:R`:host{position:relative;display:block;width:4em;height:4em}`,template:C`<qr-code content="{{content}}"></qr-code>`})],To);var g0=Object.getOwnPropertyDescriptor,m0=(t,i,e,n)=>{for(var s=n>1?void 0:n?g0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Co=class{constructor(){this.messageId=""}goBack(){Cn()}grant(){ye(this,"grant")}};Co=m0([O("permission-denied",{attr:["messageId"],style:R`:host{height:100%;width:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center}.heading{font-size:2em}.message{max-width:90%}`,template:C`<div></div><div class="heading"><i18n-label id="shared.permissionDenied.heading"></i18n-label></div><div class="message"><i18n-label id="shared.permissionDenied.message"></i18n-label></div><back-button></back-button><div></div>`})],Co);var b0=Object.getOwnPropertyDescriptor,w0=(t,i,e,n)=>{for(var s=n>1?void 0:n?b0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Oo=class{constructor(){this.messageId=""}goBack(){Cn()}};Oo=w0([O("permission-error",{attr:["messageId"],style:R`:host{height:100%;width:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center}.heading{font-size:2em}.message{max-width:90%}`,template:C`<div></div><div class="heading"><i18n-label id="shared.permissionError.heading"></i18n-label></div><div class="message"><i18n-label id="shared.permissionError.message"></i18n-label></div><back-button></back-button><div></div>`})],Oo);var _0=Object.getOwnPropertyDescriptor,y0=(t,i,e,n)=>{for(var s=n>1?void 0:n?_0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Ro=class{constructor(){this.messageId=""}goBack(){Cn()}grant(){ye(this,"grant")}};Ro=y0([O("permission-prompt",{attr:["messageId"],style:R`:host{height:100%;width:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center}.heading{font-size:2em}.message{max-width:90%}.bigger{font-size:1.5em}`,template:C`<div></div><div class="heading"><i18n-label id="shared.permissionPrompt.heading"></i18n-label></div><div class="message"><i18n-label id="{{messageId}}"></i18n-label></div><div class="bigger"><pretty-labeled-button @click.stop.prevent="grant()" id="shared.permissionPrompt.grantPermission"></pretty-labeled-button></div><div class="bigger"><pretty-labeled-button @click.stop.prevent="goBack()" id="shared.permissionPrompt.goBack"></pretty-labeled-button></div><div></div>`})],Ro);var E0=Object.getOwnPropertyDescriptor,S0=(t,i,e,n)=>{for(var s=n>1?void 0:n?E0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Mo=class{constructor(){this.padding="0.5em"}onViewInit(){this.button&&(this.button.style.padding=this.padding||"0.5em")}};Mo=S0([O("pretty-button",{attr:["padding"],prop:["enabled"],style:R`:host{display:block}button{background-color:var(--button-bg-color);border:2px solid var(--fg-color);border-radius:1em;color:inherit;font-size:inherit;overflow:hidden;cursor:pointer;overflow:none;user-select:none}.enabled{background-color:var(--button-bg-color-enabled)}`,template:C`<button class="{{enabled && 'enabled'}}" #ref="button"><slot></slot></button>`,useShadow:!0})],Mo);var A0=Object.getOwnPropertyDescriptor,x0=(t,i,e,n)=>{for(var s=n>1?void 0:n?A0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Po=class{constructor(){this.showingHelp=!1,this.type="text"}change(t){ye(this,"change",t)}hideHelp(){this.showingHelp=!1}showHelp(){this.showingHelp=!0}};Po=x0([O("pretty-input",{attr:["helpHtml","type","value"],prop:["value"],style:R`:host{display:inline-block}.wrapper{display:flex;align-items:center;border:1px solid var(--fg-color);padding:0}input{font:inherit;width:100%;text-align:center;color:var(--fg-color);background-color:var(--bg-color);border:0}input:focus{outline:0;background-color:var(--active-background-color)}.help-icon{cursor:pointer;margin:0 .3em;height:1em;aspect-ratio:1}.help-wrapper{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;overflow:hidden;gap:.5em}.help{flex-grow:1;overflow:auto;background-color:var(--bg-color);border:1px solid var(--fg-color);padding:0 .5em}`,template:C`<div class="wrapper"><input type="{{type}}" value="{{value}}" @change.stop.prevent="change($event.target.value)"><load-svg *if="helpHtml" class="help-icon" @click.stop.prevent="showHelp()" href="/question.svg"></load-svg></div><show-modal *if="showingHelp" @clickoutside="hideHelp()"><div class="help-wrapper"><div class="help"><i18n-html id="{{helpHtml}}"></i18n-html></div><pretty-labeled-button id="shared.prettyInput.close" @click="hideHelp()"></pretty-labeled-button></div></show-modal>`})],Po);var D0=Object.getOwnPropertyDescriptor,T0=(t,i,e,n)=>{for(var s=n>1?void 0:n?D0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Io=class{};Io=T0([O("pretty-labeled-button",{attr:["id"],style:R``,template:C`<pretty-button><i18n-label id="{{id}}"></i18n-label></pretty-button>`})],Io);var C0=Object.getOwnPropertyDescriptor,O0=(t,i,e,n)=>{for(var s=n>1?void 0:n?C0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Lo=class{constructor(){this.c=b(X),this.default="",this.i18nBase="",this.label="",this.options=[],this.sorted=[],this.value=""}onInit(){this.sorted=this.options.map(t=>({value:t,label:this.a(t)})).sort((t,i)=>t.label.localeCompare(i.label)),this.d(),this.label=this.a(this.value)}onViewInit(){this.select&&(this.select.value=this.value)}selectValue(t){this.b(t)&&(this.value=t,this.label=this.a(this.value),this.select&&(this.select.value=t),ye(this,"change",t))}d(){const t=this.b(this.value);let i=this.value;t||(i=this.default,this.b(i)||(i=this.sorted[0]?this.sorted[0].value:"UNKNOWN_VALUE")),this.value!==i&&this.selectValue(i)}b(t){return this.sorted.find(i=>i.value===t)}a(t){return this.c.get(`${this.i18nBase}.${t}`)}};Lo=O0([O("pretty-select",{attr:["i18nBase","default","value"],prop:["options"],style:R`:host{display:inline-block;position:relative}select{position:absolute;inset:0;opacity:0;font-size:inherit;cursor:pointer}`,template:C`<changeable-setting>{{label}} ▿</changeable-setting><select #ref="select" @change.stop.prevent="selectValue($event.target.value)" value="{{value}}"><option *for="option of sorted" value="{{option.value}}">{{option.label}}</option></select>`})],Lo);var R0=Object.getOwnPropertyDescriptor,M0=(t,i,e,n)=>{for(var s=n>1?void 0:n?R0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let ko=class{constructor(){this.b=b(tc),this.content=""}onChange(){this.a()}onViewInit(){this.a()}a(){this.svg&&this.content&&(this.svg.innerHTML=this.b.svg(this.content))}};ko=M0([O("qr-code",{attr:["content"],style:R`:host,div{display:block;height:100%;width:100%}`,template:C`<div #ref="svg"></div>`})],ko);var P0=Object.getOwnPropertyDescriptor,I0=(t,i,e,n)=>{for(var s=n>1?void 0:n?P0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Uo=class{};Uo=I0([O("scaling-icon",{attr:["href"],style:R`:host{display:block}.icon{height:128px;height:25vmin;max-height:128px;width:128px;width:25vmin;max-width:128px}`,template:C`<load-svg class="icon" href="{{href}}"></load-svg>`})],Uo);var L0=Object.getOwnPropertyDescriptor,k0=(t,i,e,n)=>{for(var s=n>1?void 0:n?L0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let No=class{clickOutside(){ye(this,"clickoutside")}ignore(){}};No=k0([O("show-modal",{style:R`.outer{display:flex;justify-content:center;align-items:center;position:fixed;inset:0;background-color:rgba(0,0,0,.5);backdrop-filter:blur(5px)}.inner{width:90%;height:90%;display:flex;justify-content:center;align-items:center;flex-direction:column}`,template:C`<div class="outer" @click.stop.prevent="clickOutside()"><div class="inner"><slot @click.stop="ignore"></slot></div></div>`,useShadow:!0})],No);var U0=Object.getOwnPropertyDescriptor,N0=(t,i,e,n)=>{for(var s=n>1?void 0:n?U0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let $o=class{constructor(){this.hijackGeo=!1,this.href="#",this.ws=" "}onChange(t){t==="href"&&this.a(this.href||"#")}a(t){t.startsWith("geo:")?(this.hrefGeo=t.slice(4),this.hijackGeo=!0):this.hijackGeo=!1}};$o=N0([O("styled-link",{attr:["href","target"],style:R`:host{display:inline}a{color:var(--link-color);text-decoration:none}`,template:C`{{ws}} <a *if="hijackGeo" href="/location-add/{{hrefGeo}}"><slot></slot></a><a *if="!hijackGeo" href="{{href}}" target="{{target}}"><slot></slot></a>{{ws}}`,useShadow:!0})],$o);var $0=Object.getOwnPropertyDescriptor,B0=(t,i,e,n)=>{for(var s=n>1?void 0:n?$0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Bo=class{constructor(){this.b=b(Se),this.timeStr=""}onInit(){this.a=this.b.getCurrentSetting().subscribe(()=>{this.c()})}onDestroy(){this.a&&this.a.unsubscribe()}onChange(t){t==="time"&&this.c()}toggle(){this.b.toggleSystem(),this.c()}c(){this.time&&this.time instanceof Date&&!isNaN(this.time.getTime())?this.timeStr=this.b.formatTimeOfDay(this.time.getTime()):this.timeStr=""}};Bo=B0([O("display-time",{attr:["id","failId"],prop:["time"],style:R``,template:C`<div *if="time"><i18n-label id="{{id}}"></i18n-label><changeable-setting @click.stop.prevent="toggle()">{{timeStr}}</changeable-setting></div>`})],Bo);var F0=Object.getOwnPropertyDescriptor,j0=(t,i,e,n)=>{for(var s=n>1?void 0:n?F0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Fo=class{constructor(){this.a=b(Tt),this.b=b(de),this.c=b(gt),this.coordinates=null,this.nearestMajorCity=null}onChange(t){t==="coordinates"&&this.coordinates&&this.a.getNearestCityByCoords(this.coordinates.lat,this.coordinates.lon).subscribe(i=>{const e=this.c.metersToString(i.distance),n=this.b.toHeadingDirection(i.bearing);this.nearestMajorCity=`${i.name} (${e}, ${n})`})}};Fo=j0([O("nearest-major-city",{prop:["coordinates"],style:R``,template:C`<div *if="coordinates"><i18n-label id="sunMoon.nearestMajorCity.label"></i18n-label>{{nearestMajorCity}}</div>`})],Fo);var is={exports:{}},jo;function z0(){return jo||(jo=1,function(t,i){(function(){var e=Math.PI,n=Math.sin,s=Math.cos,r=Math.tan,a=Math.asin,o=Math.atan2,f=Math.acos,c=e/180,v=1e3*60*60*24,y=2440588,h=2451545;function d(k){return k.valueOf()/v-.5+y}function l(k){return new Date((k+.5-y)*v)}function u(k){return d(k)-h}var g=c*23.4397;function p(k,N){return o(n(k)*s(g)-r(N)*n(g),s(k))}function m(k,N){return a(n(N)*s(g)+s(N)*n(g)*n(k))}function _(k,N,B){return o(n(k),s(k)*n(N)-r(B)*s(N))}function w(k,N,B){return a(n(N)*n(B)+s(N)*s(B)*s(k))}function E(k,N){return c*(280.16+360.9856235*k)-N}function A(k){return k<0&&(k=0),2967e-7/Math.tan(k+.00312536/(k+.08901179))}function S(k){return c*(357.5291+.98560028*k)}function x(k){var N=c*(1.9148*n(k)+.02*n(2*k)+3e-4*n(3*k)),B=c*102.9372;return k+N+B+e}function D(k){var N=S(k),B=x(N);return{dec:m(B,0),ra:p(B,0)}}var I={};I.getPosition=function(k,N,B){var Q=c*-B,j=c*N,lt=u(k),et=D(lt),ot=E(lt,Q)-et.ra;return{azimuth:_(ot,j,et.dec),altitude:w(ot,j,et.dec)}};var P=I.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];I.addTime=function(k,N,B){P.push([k,N,B])};var z=9e-4;function W(k,N){return Math.round(k-z-N/(2*e))}function Z(k,N,B){return z+(k+N)/(2*e)+B}function nt(k,N,B){return h+k+.0053*n(N)-.0069*n(2*B)}function jt(k,N,B){return f((n(k)-n(N)*n(B))/(s(N)*s(B)))}function Ct(k){return-2.076*Math.sqrt(k)/60}function zt(k,N,B,Q,j,lt,et){var ot=jt(k,B,Q),M=Z(ot,N,j);return nt(M,lt,et)}I.getTimes=function(k,N,B,Q){Q=Q||0;var j=c*-B,lt=c*N,et=Ct(Q),ot=u(k),M=W(ot,j),L=Z(0,j,M),F=S(L),U=x(F),G=m(U,0),J=nt(L,F,U),q,ct,rt,it,St,Ht,bt={solarNoon:l(J),nadir:l(J-.5)};for(q=0,ct=P.length;q<ct;q+=1)rt=P[q],it=(rt[0]+et)*c,St=zt(it,j,lt,G,M,F,U),Ht=J-(St-J),bt[rt[1]]=l(Ht),bt[rt[2]]=l(St);return bt};function Ae(k){var N=c*(218.316+13.176396*k),B=c*(134.963+13.064993*k),Q=c*(93.272+13.22935*k),j=N+c*6.289*n(B),lt=c*5.128*n(Q),et=385001-20905*s(B);return{ra:p(j,lt),dec:m(j,lt),dist:et}}I.getMoonPosition=function(k,N,B){var Q=c*-B,j=c*N,lt=u(k),et=Ae(lt),ot=E(lt,Q)-et.ra,M=w(ot,j,et.dec),L=o(n(ot),r(j)*s(et.dec)-n(et.dec)*s(ot));return M=M+A(M),{azimuth:_(ot,j,et.dec),altitude:M,distance:et.dist,parallacticAngle:L}},I.getMoonIllumination=function(k){var N=u(k||new Date),B=D(N),Q=Ae(N),j=149598e3,lt=f(n(B.dec)*n(Q.dec)+s(B.dec)*s(Q.dec)*s(B.ra-Q.ra)),et=o(j*n(lt),Q.dist-j*s(lt)),ot=o(s(B.dec)*n(B.ra-Q.ra),n(B.dec)*s(Q.dec)-s(B.dec)*n(Q.dec)*s(B.ra-Q.ra));return{fraction:(1+s(et))/2,phase:.5+.5*et*(ot<0?-1:1)/Math.PI,angle:ot}};function dt(k,N){return new Date(k.valueOf()+N*v/24)}I.getMoonTimes=function(k,N,B,Q){var j=new Date(k);Q?j.setUTCHours(0,0,0,0):j.setHours(0,0,0,0);for(var lt=.133*c,et=I.getMoonPosition(j,N,B).altitude-lt,ot,M,L,F,U,G,J,q,ct,rt,it,St,Ht,bt=1;bt<=24&&(ot=I.getMoonPosition(dt(j,bt),N,B).altitude-lt,M=I.getMoonPosition(dt(j,bt+1),N,B).altitude-lt,U=(et+M)/2-ot,G=(M-et)/2,J=-G/(2*U),q=(U*J+G)*J+ot,ct=G*G-4*U*ot,rt=0,ct>=0&&(Ht=Math.sqrt(ct)/(Math.abs(U)*2),it=J-Ht,St=J+Ht,Math.abs(it)<=1&&rt++,Math.abs(St)<=1&&rt++,it<-1&&(it=St)),rt===1?et<0?L=bt+it:F=bt+it:rt===2&&(L=bt+(q<0?St:it),F=bt+(q<0?it:St)),!(L&&F));bt+=2)et=M;var Bi={};return L&&(Bi.rise=dt(j,L)),F&&(Bi.set=dt(j,F)),!L&&!F&&(Bi[q>0?"alwaysUp":"alwaysDown"]=!0),Bi},t.exports=I})()}(is)),is.exports}var H0=z0();const $i=_n(H0);var G0=Object.getOwnPropertyDescriptor,Z0=(t,i,e,n)=>{for(var s=n>1?void 0:n?G0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let zo=class{constructor(){this.coordinates=null,this.date=null,this.fraction=null,this.moonIllumination=null}onChange(t){if(!(!this.coordinates||!this.date)&&(t==="coordinates"||t==="date")){const i=$i.getMoonIllumination(this.date);this.fraction=Math.round(i.fraction*100);const e=i.phase;e<.0625?this.moonIllumination="sunMoon.moonIllumination.newMoon":e<.1875?this.moonIllumination="sunMoon.moonIllumination.waxingCrescent":e<.3125?this.moonIllumination="sunMoon.moonIllumination.firstQuarter":e<.4375?this.moonIllumination="sunMoon.moonIllumination.waxingGibbous":e<.5625?this.moonIllumination="sunMoon.moonIllumination.fullMoon":e<.6875?this.moonIllumination="sunMoon.moonIllumination.waningGibbous":e<.8125?this.moonIllumination="sunMoon.moonIllumination.lastQuarter":e<.9375?this.moonIllumination="sunMoon.moonIllumination.waningCrescent":this.moonIllumination="sunMoon.moonIllumination.newMoon"}}};zo=Z0([O("moon-illumination",{prop:["coordinates","date"],style:R``,template:C`<div *if="coordinates"><i18n-label id="sunMoon.moonIllumination.label"></i18n-label><i18n-label id="{{moonIllumination}}"></i18n-label><span>({{fraction}}%)</span></div>`})],zo);var V0=Object.getOwnPropertyDescriptor,W0=(t,i,e,n)=>{for(var s=n>1?void 0:n?V0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Ho=class{constructor(){this.a=b(de),this.coordinates=null,this.date=null,this.moonPosition=null}onChange(t){if(!(!this.coordinates||!this.date)&&(t==="coordinates"||t==="date")){const i=$i.getMoonPosition(this.date,this.coordinates.lat,this.coordinates.lon),e=this.a.radiansToDegreesSW(i.azimuth),n=this.a.toHeadingDirection(e),s=this.a.radiansToDegreesNW(i.altitude),r=this.a.toHeading(s);this.moonPosition=`${n}, +${r}`}}};Ho=W0([O("moon-position",{prop:["coordinates","date"],style:R``,template:C`<div *if="coordinates"><i18n-label id="sunMoon.moonPosition.label"></i18n-label>{{moonPosition}}</div>`})],Ho);var Q0=Object.getOwnPropertyDescriptor,q0=(t,i,e,n)=>{for(var s=n>1?void 0:n?Q0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Go=class{constructor(){this.alwaysDown=!1,this.alwaysUp=!1,this.coordinates=null,this.date=null}onChange(t){if(!(!this.coordinates||!this.date)&&(t==="coordinates"||t==="date")){const i=$i.getMoonTimes(this.date,this.coordinates.lat,this.coordinates.lon);this.alwaysUp=!!i.alwaysUp,this.alwaysDown=!!i.alwaysDown,this.moonRise=i.rise,this.moonSet=i.set,this.moonRise&&(this.moonRiseTime=this.a(this.moonRise)),this.moonSet&&(this.moonSetTime=this.a(this.moonSet))}}a(t){return t.toLocaleString()}};Go=q0([O("moon-times",{prop:["coordinates","date"],style:R``,template:C`<div *if="coordinates"><i18n-label *if="alwaysUp" id="sunMoon.moonTimes.alwaysUp"></i18n-label><i18n-label *if="alwaysDown" id="sunMoon.moonTimes.alwaysDown"></i18n-label><div *if="!alwaysUp && !alwaysDown"><display-time id="sunMoon.moonTimes.rise" fail-id="sunMoon.moonTimes.neverRise" .time="moonRise"></display-time><display-time id="sunMoon.moonTimes.set" fail-id="sunMoon.moonTimes.neverSet" .time="moonSet"></display-time></div></div>`})],Go);var K0=Object.getOwnPropertyDescriptor,Y0=(t,i,e,n)=>{for(var s=n>1?void 0:n?K0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Zo=class{constructor(){this.a=b(Tt),this.b=b(Y),this.g=b(X),this.c=b(Ft),this.h=b(Je),this.allowGetLocation=!1,this.coordinates=null,this.dateValue=new Date,this.gettingLocation=!1,this.location="",this.subject=new ut,this.b.availabilityState().pipe(tt(this.subject)).subscribe(t=>{t===T.PROMPT||t===T.ALLOWED?this.allowGetLocation=!0:this.allowGetLocation=!1})}onViewInit(){const t=this.c.sunMoonLocation.getItem();this.date&&(this.date.value=this.dateValue.toISOString().slice(0,16)),t?this.d(t):this.e()}onDestroy(){this.subject.next(null),this.subject.complete()}dateUpdate(t){this.dateValue=new Date(t)}locationUpdate(t){this.a.fromString(t).subscribe(i=>{i&&(this.c.sunMoonLocation.setItem(t),this.coordinates=i,this.e())})}getCurrentLocation(){this.gettingLocation=!0,this.b.getPosition().pipe(tt(this.subject),Xe(),Pi(()=>{this.gettingLocation=!1})).subscribe(t=>{t.success?this.d(`${t.lat} ${t.lon}`):this.f()},()=>{this.f()})}e(){this.coordinates?this.location=this.a.latLonToSystemString(this.coordinates.lat,this.coordinates.lon):this.location=this.g.get("sunMoon.locationUnknown")}f(){this.h.popI18n("sunMoon.geolocationError")}d(t){this.input&&(this.input.value=t),this.locationUpdate(t)}};Zo=Y0([O("sun-moon-app",{style:R`.flex-full{display:flex;flex-direction:column;height:100%;width:100%}.location{display:flex;align-items:center;gap:1em}.date{padding-top:.25em;display:flex;flex-direction:column}.coordinates{display:flex;flex-direction:column}.grow{flex-grow:1}.wrapper{padding-top:1em;height:100%;width:100%;overflow:hidden;display:flex;box-sizing:border-box}.wrapper-inner{flex-grow:1;padding:.3em;border-style:solid;box-sizing:border-box;border-width:1px;overflow-x:auto;height:100%;width:100%}.gap{height:.5em}load-svg{width:3em;height:3em}.space-between-bottom{display:flex;justify-content:space-between;align-items:flex-end}.getting-location{display:flex;padding:.5em;border:1px solid var(--fg-color)}`,template:C`<default-layout frameless><div class="flex-full"><div class="location"><div class="grow coordinates"><div class="space-between-bottom"><i18n-label id="sunMoon.enterCoordinates"></i18n-label><location-coordinate-info></location-coordinate-info></div><pretty-input type="text" @change.stop.prevent="locationUpdate($event.detail)" #ref="input" class="grow" help-html="location.help.html"></pretty-input></div><div *if="allowGetLocation"><load-svg href="/location.svg" @click.stop.prevent="getCurrentLocation()"></load-svg></div></div><div class="date"><div class="space-between-bottom"><i18n-label id="sunMoon.enterDate"></i18n-label><location-coordinate-info></location-coordinate-info></div><pretty-input type="datetime-local" @change.stop.prevent="dateUpdate($event.detail)" #ref="date" class="grow"></pretty-input></div><div class="wrapper"><div class="wrapper-inner"><div>{{location}}</div><nearest-major-city .coordinates="coordinates"></nearest-major-city><div class="gap"></div><sun-position .coordinates="coordinates" .date="dateValue"></sun-position><sun-times .coordinates="coordinates" .date="dateValue"></sun-times><div class="gap"></div><moon-position .coordinates="coordinates" .date="dateValue"></moon-position><moon-times .coordinates="coordinates" .date="dateValue"></moon-times><moon-illumination .coordinates="coordinates" .date="dateValue"></moon-illumination></div></div></div></default-layout><show-modal *if="gettingLocation"><div class="getting-location"><i18n-label id="sunMoon.geolocation"></i18n-label></div></show-modal>`})],Zo);var X0=Object.getOwnPropertyDescriptor,J0=(t,i,e,n)=>{for(var s=n>1?void 0:n?X0(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Vo=class{constructor(){this.a=b(de),this.coordinates=null,this.date=null,this.sunPosition=null}onChange(t){if(!(!this.date||!this.coordinates)&&(t==="date"||t==="coordinates")){const i=$i.getPosition(this.date,this.coordinates.lat,this.coordinates.lon),e=this.a.radiansToDegreesSW(i.azimuth),n=this.a.toHeadingDirection(e),s=this.a.radiansToDegreesNW(i.altitude),r=this.a.toHeading(s);this.sunPosition=`${n}, +${r}`}}};Vo=J0([O("sun-position",{prop:["coordinates","date"],style:R``,template:C`<div *if="coordinates"><i18n-label id="sunMoon.sunPosition.label"></i18n-label>{{sunPosition}}</div>`})],Vo);var t1=Object.getOwnPropertyDescriptor,e1=(t,i,e,n)=>{for(var s=n>1?void 0:n?t1(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let Wo=class{constructor(){this.coordinates=null,this.date=null}onChange(t){if(!(!this.coordinates||!this.date)&&(t==="coordinates"||t==="date")){const i=$i.getTimes(this.date,this.coordinates.lat,this.coordinates.lon);this.sunrise=i.sunrise,this.sunriseEnd=i.sunriseEnd,this.goldenHourEnd=i.goldenHourEnd,this.solarNoon=i.solarNoon,this.goldenHour=i.goldenHour,this.sunsetStart=i.sunsetStart,this.sunset=i.sunset,this.dusk=i.dusk,this.nauticalDusk=i.nauticalDusk,this.night=i.night,this.nadir=i.nadir,this.nightEnd=i.nightEnd,this.nauticalDawn=i.nauticalDawn,this.dawn=i.dawn}}a(t){return t.toLocaleString()}};Wo=e1([O("sun-times",{prop:["coordinates","date"],style:R``,template:C`<div *if="coordinates"><display-time id="sunMoon.sunTimes.nadir" .time="nadir"></display-time><display-time id="sunMoon.sunTimes.nightEnd" .time="nightEnd"></display-time><display-time id="sunMoon.sunTimes.nauticalDawn" .time="nauticalDawn"></display-time><display-time id="sunMoon.sunTimes.dawn" .time="dawn"></display-time><display-time id="sunMoon.sunTimes.sunrise" fail-id="sunMoon.sunTimes.neverRise" .time="sunrise"></display-time><display-time id="sunMoon.sunTimes.sunriseEnd" .time="sunriseEnd"></display-time><display-time id="sunMoon.sunTimes.goldenHourEnd" .time="goldenHourEnd"></display-time><display-time id="sunMoon.sunTimes.solarNoon" .time="solarNoon"></display-time><display-time id="sunMoon.sunTimes.goldenHour" .time="goldenHour"></display-time><display-time id="sunMoon.sunTimes.sunsetStart" .time="sunsetStart"></display-time><display-time id="sunMoon.sunTimes.sunset" fail-id="sunMoon.sunTimes.neverSet" .time="sunset"></display-time><display-time id="sunMoon.sunTimes.dusk" .time="dusk"></display-time><display-time id="sunMoon.sunTimes.nauticalDusk" .time="nauticalDusk"></display-time><display-time id="sunMoon.sunTimes.night" .time="night"></display-time></div>`})],Wo);const i1="modulepreload",n1=function(t){return"/"+t},Qo={},s1=function(i,e,n){let s=Promise.resolve();if(e&&e.length>0){let a=function(c){return Promise.all(c.map(v=>Promise.resolve(v).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),f=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=a(e.map(c=>{if(c=n1(c),c in Qo)return;Qo[c]=!0;const v=c.endsWith(".css"),y=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${y}`))return;const h=document.createElement("link");if(h.rel=v?"stylesheet":i1,v||(h.as="script"),h.crossOrigin="",h.href=c,f&&h.setAttribute("nonce",f),document.head.appendChild(h),v)return new Promise((d,l)=>{h.addEventListener("load",d),h.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&r(o.reason);return i().catch(r)})};function r1(t={}){const{immediate:i=!1,onNeedRefresh:e,onOfflineReady:n,onRegistered:s,onRegisteredSW:r,onRegisterError:a}=t;let o,f,c;const v=(h=!0)=>Ne(null,null,function*(){yield f,c==null||c()});function y(){return Ne(this,null,function*(){if("serviceWorker"in navigator){if(o=yield s1(()=>Ne(null,null,function*(){const{Workbox:h}=yield import("./workbox-window.prod.es5-fJwV-9vL.js");return{Workbox:h}}),[]).then(({Workbox:h})=>new h("/sw.js",{scope:"/",type:"classic"})).catch(h=>{a==null||a(h)}),!o)return;c=()=>{o==null||o.messageSkipWaiting()};{let h=!1;const d=()=>{h=!0,o==null||o.addEventListener("controlling",l=>{l.isUpdate&&window.location.reload()}),e==null||e()};o.addEventListener("installed",l=>{typeof l.isUpdate=="undefined"?typeof l.isExternal!="undefined"&&l.isExternal?d():!h&&(n==null||n()):l.isUpdate||n==null||n()}),o.addEventListener("waiting",d)}o.register({immediate:i}).then(h=>{r?r("/sw.js",h):s==null||s(h)}).catch(h=>{a==null||a(h)})}})}return f=y(),v}class Fc{constructor(){this.a=null}listenForEvents(){window.location.hostname==="localhost"||window.location.protocol==="http:"||(this.a=r1({onNeedRefresh:()=>{this.b()}}))}performUpdate(){this.a&&this.a()}b(){document.body.appendChild(document.createElement("update-pwa"))}}var a1=Object.getOwnPropertyDescriptor,o1=(t,i,e,n)=>{for(var s=n>1?void 0:n?a1(i,e):i,r=t.length-1,a;r>=0;r--)(a=t[r])&&(s=a(s)||s);return s};let qo=class{constructor(){this.a=b(Fc)}onViewInit(){this.drawer&&this.drawer.show()}reload(){this.a.performUpdate(),this.b("hide")}b(t){this.drawer&&this.drawer[t]()}};qo=o1([O("update-pwa",{style:R`.load-svg-wrapper{padding:0 3%;width:5em;background-color:var(--bg-color)}.update-text{display:flex;justify-content:center;padding:0 .3em}.space{min-width:2em;flex-grow:1}.buttons{display:flex;justify-content:space-between}.button{text-align:center}.drawer{width:100%;flex-direction:column;align-items:center;justify-content:center}`,template:C`<bottom-drawer #ref="drawer"><div class="drawer"><div class="update-text"><i18n-label id="update.message"></i18n-label></div><div class="buttons"><div class="button"><styled-link @click.stop.prevent="reload()"><i18n-label id="update.reload"></i18n-label></styled-link></div><div class="space"></div><div class="button"><styled-link @click.stop.prevent="skip()"><i18n-label id="update.skip"></i18n-label></styled-link></div></div></div></bottom-drawer>`})],qo);const l1=()=>{b(X).set(navigator.language||""),b(ec).listenForEvents(),b(Fc).listenForEvents()};Uh("app-router");const jc="redirect",ns=sessionStorage.getItem(jc);sessionStorage.removeItem(jc);ns&&ns!==location.href&&history.pushState(null,null,ns);const Ko=()=>{l1(),document.body.append(document.createElement("app-root"))},ss="eruda";if(window.location.toString().indexOf(ss)>=0||xt.getItem(ss)){try{sessionStorage.setItem(ss,"1")}catch(i){sessionStorage.clear()}const t=document.createElement("script");t.src="//cdn.jsdelivr.net/npm/eruda",t.onload=()=>{window.eruda.init(),Ko()},document.body.append(t)}else Ko();
